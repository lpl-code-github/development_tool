"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[346],{65346:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"space-between"}},[e("a-select",{key:t.componentKey,staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"选择Controller","option-filter-prop":"children","filter-option":t.filterOption,value:t.existSelectController?t.selectedController:void 0},on:{select:t.handleSelect}},t._l(t.controllerLists,(function(n,o){return e("a-select-option",{key:o,attrs:{value:n}},[t._v(" "+t._s(n)+" ")])})),1),e("a-popconfirm",{staticStyle:{"z-index":"99999!important"},attrs:{placement:"leftTop",title:"编辑器中还有内容，确认获取默认模版吗？","ok-text":"Yes","cancel-text":"No",disabled:t.buttonConfirmIsDisabled},on:{confirm:t.confirm,cancel:t.cancel}},[e("a-button",{on:{click:t.getDefaultClick}},[t._v("获取默认模版")])],1)],1),e("a-spin",{attrs:{size:"large",spinning:t.loading}},[e("Markdown",{staticStyle:{"z-index":"-1!important"},attrs:{"doc-content":t.docContent}})],1)],1)},r=[],l=function(){var t=this,e=t._self._c;return e("div",[e("mavon-editor",{ref:"md",staticStyle:{height:"60vh",margin:"20px 0","z-index":"1"},attrs:{ishljs:!1,toolbars:t.toolbars},on:{save:t.saveDoc,change:t.change},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},a=[],i=(n(46229),n(17330),n(62062),{name:"Markdown",props:["docContent"],watch:{content:{deep:!0,handler(t,e){this.$bus.$emit("markdownInput",t)}},docContent:{deep:!0,handler(t,e){this.content=t}}},data(){return{content:"",html:"",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,code:!0,table:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0}}},methods:{change(t,e){localStorage.setItem("edit_doc",t)},saveDoc(t){this.saveTextToFile(t)},saveTextToFile(t){const e=new Date,n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0"),s=`${n}${o}${r}${l}${a}${i}.md`,c=new Blob([t],{type:"text/plain"}),d=document.createElement("a"),h=URL.createObjectURL(c);d.href=h,d.download=s,d.click(),URL.revokeObjectURL(h)}}}),s=i,c=n(1001),d=(0,c.Z)(s,l,a,!1,null,"1f0d555e",null),h=d.exports,u=(n(19410),{name:"SlateGenerator",components:{Markdown:h},data(){return{componentKey:0,docContent:"",loading:!1,buttonConfirmIsDisabled:!0,controllerLists:[],selectedController:null,existSelectController:!1}},created(){this.$bus.$on("markdownInput",(t=>{this.docContent=t})),this.getControllerLists()},beforeDestroy(){""===this.docContent&&localStorage.removeItem("selected_controller")},mounted(){var t=localStorage.getItem("edit_doc");null!==t&&""!==t&&(this.docContent=t);var e=localStorage.getItem("selected_controller");null!==e&&""!==e&&(null!==t&&""===t?(this.docContent=t,this.docContent=t,this.existSelectController=!1):(this.existSelectController=!0,this.selectedController=e))},methods:{getDefaultClick(){""===this.docContent?(this.existSelectController=!1,this.selectedController="",this.buttonConfirmIsDisabled=!0,localStorage.removeItem("selected_controller"),this.handleGetSlateDoc()):this.buttonConfirmIsDisabled=!1},handleSelect(t,e){if(localStorage.setItem("selected_controller",t),""===this.docContent)this.existSelectController=!0,this.selectedController=t,this.handleGetSlateDoc(t);else var n=this.$confirm({title:"提示",content:"编辑器中还有内容，确认生成新的文档吗？",okText:"确认",cancelText:"取消",onOk:()=>{this.existSelectController=!0,this.selectedController=t,this.handleGetSlateDoc(t),n.destroy()},onCancel(){n.destroy()}})},confirm(t){this.componentKey+=1,this.existSelectController=!1,localStorage.removeItem("selected_controller"),this.handleGetSlateDoc()},cancel(t){},filterOption(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},handleGetSlateDoc(t){this.loading=!0;var e="";void 0!==t&&(e="?controller="+t),this.$request.getSlateDoc(e).then((t=>{200===t.status&&(this.docContent=t.data),this.loading=!1}))},getControllerLists(){var t="?type=controller";this.$request.getFileLists(t).then((t=>{200===t.status&&(this.controllerLists=t.data)}))}}}),f=u,p=(0,c.Z)(f,o,r,!1,null,"3b448683",null),g=p.exports},70648:function(t,e,n){var o=n(51694),r=n(60614),l=n(84326),a=n(5112),i=a("toStringTag"),s=Object,c="Arguments"==l(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(n){}};t.exports=o?l:function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=d(e=s(t),i))?n:c?l(e):"Object"==(o=l(e))&&r(e.callee)?"Arguments":o}},47045:function(t,e,n){var o=n(56339),r=n(3070);t.exports=function(t,e,n){return n.get&&o(n.get,e,{getter:!0}),n.set&&o(n.set,e,{setter:!0}),r.f(t,e,n)}},51694:function(t,e,n){var o=n(5112),r=o("toStringTag"),l={};l[r]="z",t.exports="[object z]"===String(l)},41340:function(t,e,n){var o=n(70648),r=String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},48053:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},46229:function(t,e,n){var o=n(98052),r=n(1702),l=n(41340),a=n(48053),i=URLSearchParams,s=i.prototype,c=r(s.append),d=r(s["delete"]),h=r(s.forEach),u=r([].push),f=new i("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&o(s,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return d(this,t);var o=[];h(this,(function(t,e){u(o,{key:e,value:t})})),a(e,1);var r,i=l(t),s=l(n),f=0,p=0,g=!1,v=o.length;while(f<v)r=o[f++],g||r.key===i?(g=!0,d(this,r.key)):p++;while(p<v)r=o[p++],r.key===i&&r.value===s||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},17330:function(t,e,n){var o=n(98052),r=n(1702),l=n(41340),a=n(48053),i=URLSearchParams,s=i.prototype,c=r(s.getAll),d=r(s.has),h=new i("a=1");!h.has("a",2)&&h.has("a",void 0)||o(s,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return d(this,t);var o=c(this,t);a(e,1);var r=l(n),i=0;while(i<o.length)if(o[i++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},62062:function(t,e,n){var o=n(19781),r=n(1702),l=n(47045),a=URLSearchParams.prototype,i=r(a.forEach);o&&!("size"in a)&&l(a,"size",{get:function(){var t=0;return i(this,(function(){t++})),t},configurable:!0,enumerable:!0})}}]);