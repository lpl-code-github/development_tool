(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[7],{92007:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return g}});var n=function(){var e=this,t=e._self._c;return t("div",[t("a-select",{staticStyle:{width:"200px",margin:"20px 20px 20px 0"},attrs:{"show-search":"",placeholder:"选择Controller","option-filter-prop":"children","filter-option":e.filterOption},on:{change:e.handleChange}},e._l(e.controllerLists,(function(o,n){return t("a-select-option",{key:n,attrs:{value:o}},[e._v(" "+e._s(o)+" ")])})),1),t("a-button",{attrs:{type:"primary"},on:{click:e.exportAllService}},[e._v(" 导出全部Endpoints Service.zip ")]),""!==e.codeText?t("a-button",{staticClass:"copy-btn code-data-copy",staticStyle:{float:"right","margin-top":"20px"},attrs:{icon:"copy","data-clipboard-action":"copy","data-clipboard-text":e.codeText},on:{click:e.copyMessage}},[e._v(" 复制 ")]):e._e(),t("a-spin",{attrs:{size:"large",spinning:e.loading}},[t("Code",{attrs:{"language-class":"language-php","code-text":e.codeText}},[t("a-spin")],1)],1)],1)},s=[],i=o(6442),r=o(42152),a=o.n(r),c=o(35823),l=o.n(c),d={name:"TsServiceGenerator",components:{Code:i.Z},data(){return{controllerLists:[],selectController:"",codeText:"",copySuccess:!1,loading:!1}},created(){this.getControllerLists()},methods:{handleChange(e){this.loading=!0,this.selectController=e;var t="?controller="+this.selectController;this.$request.generateTsServiceCode(t).then((e=>{200===e.status&&(this.codeText=e.data),this.loading=!1}))},filterOption(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},exportAllService(){this.$confirm({title:"确认一键导出?",content:"需要和您确认的是，本工具所在数据库是否存在record_api_info表？表中是否有记录？如果没有请取消",okText:"确认导出",okType:"danger",cancelText:"我再想想",cancelType:"danger",onOk:()=>{var e=this.$message,t=e.loading("正在生成相关文件，您可以继续进行其他操作，但不要刷新页面",0);this.$request.generateAllTsServiceCode().then((o=>{if(200===o.status){setTimeout(t,0),e.success("导出成功",2.5);const n=o.headers["content-disposition"],s=n.split("filename=")[1].trim();l()(o.data,s)}else e.error("导出失败",2.5),setTimeout(t,0)}))},onCancel(){console.log("Cancel")}})},getControllerLists(){var e="?type=controller";this.$request.getFileLists(e).then((e=>{200===e.status&&(this.controllerLists=e.data)}))},copyMessage(){let e=this;if(""===e.codeText)return void e.$message.warn("没有可以复制的内容");e.copySuccess=!1;let t=new(a())(".code-data-copy");t.on("success",(function(o){e.copySuccess=!0,e.$message.success("已复制到剪贴板"),t.destroy()})),t.on("error",(function(){e.$message.error("复制错误")}))}}},p=d,u=o(1001),h=(0,u.Z)(p,n,s,!1,null,"0b6de046",null),g=h.exports},35823:function(e){e.exports=function(e,t,o,n){var s="undefined"!==typeof n?[n,e]:[e],i=new Blob(s,{type:o||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(i):window.webkitURL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=r,a.setAttribute("download",t),"undefined"===typeof a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)}),200)}}}}]);