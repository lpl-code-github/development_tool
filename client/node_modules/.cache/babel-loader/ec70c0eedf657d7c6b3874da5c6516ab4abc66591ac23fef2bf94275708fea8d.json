{"ast":null,"code":"import Code from \"@/components/code/Code\";\nimport clipboard from \"clipboard\";\nimport { getFileLists } from \"@/api/request\";\nexport default {\n  name: \"CodeGenerator\",\n  components: {\n    Code\n  },\n  data() {\n    return {\n      entityLists: [],\n      selectEntity: \"\",\n      selectedType: \"dto\",\n      codeText: \"\",\n      copySuccess: false,\n      loading: false\n    };\n  },\n  created() {\n    this.getEntityLists();\n  },\n  methods: {\n    // entity选择器发生变化时触发\n    handleChange(value) {\n      this.loading = true; // 打开code显示 的loading\n      this.selectEntity = value;\n      this.$request.generateCode(this.selectEntity, this.selectedType).then(res => {\n        if (res.status === 200) {\n          this.codeText = res.data;\n        }\n        this.loading = false;\n      });\n    },\n    // entity选择器搜索\n    filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    /**\n     * 一些请求事件\n     */\n    // 获取r1所有的entity列表\n    getEntityLists() {\n      var params = \"?type=entity\";\n      this.$request.getFileLists(params).then(res => {\n        if (res.status === 200) {\n          this.entityLists = res.data;\n        }\n      });\n    },\n    // radio发生变化 也就是需要生成代码类型发生变化时调用\n    handleChangeType(e) {\n      this.loading = true; // 打开code显示 的loading\n\n      this.selectedType = e.target.value;\n      if (this.selectEntity !== \"\") {\n        this.$request.generateCode(this.selectEntity, this.selectedType).then(res => {\n          if (res.status === 200) {\n            this.codeText = res.data;\n            this.loading = false;\n          } else {\n            this.loading = false;\n          }\n        });\n      } else {\n        this.$message.warning(\"请先选择实体类\");\n        this.loading = false;\n      }\n    },\n    // 复制功能\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText === \"\") {\n        _this.$message.warn(\"没有可以复制的内容\");\n        return;\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}