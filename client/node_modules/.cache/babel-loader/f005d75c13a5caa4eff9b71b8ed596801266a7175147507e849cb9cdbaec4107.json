{"ast":null,"code":"import Code from \"@/components/code/Code\";\nimport clipboard from \"clipboard\";\nimport { getFileLists } from \"@/api/request\";\nexport default {\n  name: \"CodeGenerator\",\n  components: {\n    Code\n  },\n  data() {\n    return {\n      entityLists: [],\n      selectEntity: \"\",\n      selectedType: \"dto\",\n      codeText: \"\",\n      copySuccess: false,\n      loading: false\n    };\n  },\n  created() {\n    this.getEntityLists();\n  },\n  methods: {\n    handleChangeType(e) {\n      this.loading = true; // 打开code显示 的loading\n\n      this.selectedType = e.target.value;\n      if (this.selectEntity !== \"\") {\n        this.$request.generateCode(this.selectEntity, this.selectedType).then(res => {\n          if (res.status === 200) {\n            this.codeText = res.data;\n          }\n        });\n      } else {\n        this.$message.warning(\"请先选择实体类\");\n      }\n      this.loading = false;\n    },\n    getEntityLists() {\n      var params = \"?type=entity\";\n      this.$request.getFileLists(params).then(res => {\n        if (res.status === 200) {\n          this.entityLists = res.data;\n        }\n      });\n    },\n    handleChange(value) {\n      this.loading = true; // 打开code显示 的loading\n      this.selectEntity = value;\n      this.$request.generateCode(this.selectEntity, this.selectedType).then(res => {\n        if (res.status === 200) {\n          this.codeText = res.data;\n        }\n        this.loading = false;\n      });\n    },\n    filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText === \"\") {\n        _this.$message.warn(\"没有可以复制的内容\");\n        return;\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["Code","clipboard","getFileLists","name","components","data","entityLists","selectEntity","selectedType","codeText","copySuccess","loading","created","getEntityLists","methods","handleChangeType","e","target","value","$request","generateCode","then","res","status","$message","warning","params","handleChange","filterOption","input","option","componentOptions","children","text","toLowerCase","indexOf","copyMessage","_this","warn","clipboardObj","on","success","destroy","error"],"sources":["src/views/CodeGenerator.vue"],"sourcesContent":["<template>\n  <div>\n    <a-select\n        show-search\n        placeholder=\"选择Entity\"\n        option-filter-prop=\"children\"\n        style=\"width: 200px;margin: 20px 20px 20px 0\"\n        :filter-option=\"filterOption\"\n        @change=\"handleChange\"\n    >\n      <a-select-option v-for=\"(item,index) in entityLists\" :key=\"index\" :value=\"item\">\n        {{item}}\n      </a-select-option>\n    </a-select>\n\n\n    <a-radio-group :value=\"selectedType\" size=\"default\" @change=\"handleChangeType\" buttonStyle=\"solid\" v-model=\"selectedType\">\n      <a-radio-button value=\"dto\">\n        Dto\n      </a-radio-button>\n      <a-radio-button value=\"factory\">\n        Factory\n      </a-radio-button>\n      <a-radio-button value=\"controller\">\n        Controller\n      </a-radio-button>\n      <a-radio-button value=\"service\">\n        Service\n      </a-radio-button>\n    </a-radio-group>\n\n    <a-button\n        class=\"copy-btn code-data-copy\"\n        icon=\"copy\"\n        v-if=\"codeText!==''\"\n        style=\"float: right;margin-top: 20px\"\n        @click=\"copyMessage\"\n        data-clipboard-action=\"copy\"\n        :data-clipboard-text=\"codeText\">\n      复制\n    </a-button>\n\n    <a-spin size=\"large\" :spinning=\"loading\">\n      <Code :code-text=\"codeText\"><a-spin /></Code>\n    </a-spin>\n  </div>\n</template>\n\n<script>\nimport Code from \"@/components/code/Code\";\nimport clipboard from \"clipboard\";\nimport {getFileLists} from \"@/api/request\";\n\nexport default {\n  name: \"CodeGenerator\",\n  components: {Code},\n  data(){\n    return{\n      entityLists:[],\n      selectEntity:\"\",\n      selectedType:\"dto\",\n      codeText: \"\",\n      copySuccess: false,\n      loading:false,\n    }\n  },\n  created() {\n    this.getEntityLists()\n  },\n  methods: {\n    handleChangeType(e) {\n      this.loading = true // 打开code显示 的loading\n\n      this.selectedType = e.target.value\n      if (this.selectEntity !== \"\"){\n        this.$request.generateCode(this.selectEntity,this.selectedType).then(res=>{\n          if (res.status === 200){\n            this.codeText = res.data\n          }\n        })\n      }else {\n        this.$message.warning(\"请先选择实体类\")\n      }\n      this.loading = false\n    },\n    getEntityLists(){\n      var params = \"?type=entity\"\n      this.$request.getFileLists(params).then(res=>{\n        if (res.status === 200){\n          this.entityLists = res.data\n        }\n      })\n    },\n    handleChange(value) {\n      this.loading = true // 打开code显示 的loading\n      this.selectEntity = value\n      this.$request.generateCode(this.selectEntity,this.selectedType).then(res=>{\n        if (res.status === 200){\n          this.codeText = res.data\n        }\n        this.loading = false\n      })\n    },\n    filterOption(input, option) {\n      return (\n          option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      );\n    },\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText===\"\"){\n        _this.$message.warn(\"没有可以复制的内容\");\n        return\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  },\n}\n</script>\n\n<style scoped>\n/deep/ .ant-select-selection--single{\n  height: 35px;\n}\n</style>\n"],"mappings":"AAiDA,OAAAA,IAAA;AACA,OAAAC,SAAA;AACA,SAAAC,YAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAJ;EAAA;EACAK,KAAA;IACA;MACAC,WAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACAC,iBAAAC,CAAA;MACA,KAAAL,OAAA;;MAEA,KAAAH,YAAA,GAAAQ,CAAA,CAAAC,MAAA,CAAAC,KAAA;MACA,SAAAX,YAAA;QACA,KAAAY,QAAA,CAAAC,YAAA,MAAAb,YAAA,OAAAC,YAAA,EAAAa,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,MAAA;YACA,KAAAd,QAAA,GAAAa,GAAA,CAAAjB,IAAA;UACA;QACA;MACA;QACA,KAAAmB,QAAA,CAAAC,OAAA;MACA;MACA,KAAAd,OAAA;IACA;IACAE,eAAA;MACA,IAAAa,MAAA;MACA,KAAAP,QAAA,CAAAjB,YAAA,CAAAwB,MAAA,EAAAL,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAjB,WAAA,GAAAgB,GAAA,CAAAjB,IAAA;QACA;MACA;IACA;IACAsB,aAAAT,KAAA;MACA,KAAAP,OAAA;MACA,KAAAJ,YAAA,GAAAW,KAAA;MACA,KAAAC,QAAA,CAAAC,YAAA,MAAAb,YAAA,OAAAC,YAAA,EAAAa,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAd,QAAA,GAAAa,GAAA,CAAAjB,IAAA;QACA;QACA,KAAAM,OAAA;MACA;IACA;IACAiB,aAAAC,KAAA,EAAAC,MAAA;MACA,OACAA,MAAA,CAAAC,gBAAA,CAAAC,QAAA,IAAAC,IAAA,CAAAC,WAAA,GAAAC,OAAA,CAAAN,KAAA,CAAAK,WAAA;IAEA;IACAE,YAAA;MACA,IAAAC,KAAA;MACA,IAAAA,KAAA,CAAA5B,QAAA;QACA4B,KAAA,CAAAb,QAAA,CAAAc,IAAA;QACA;MACA;MACAD,KAAA,CAAA3B,WAAA;MACA,IAAA6B,YAAA,OAAAtC,SAAA;MACAsC,YAAA,CAAAC,EAAA,sBAAAxB,CAAA;QACAqB,KAAA,CAAA3B,WAAA;QACA2B,KAAA,CAAAb,QAAA,CAAAiB,OAAA;QACAF,YAAA,CAAAG,OAAA;MACA;;MACAH,YAAA,CAAAC,EAAA;QACAH,KAAA,CAAAb,QAAA,CAAAmB,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}