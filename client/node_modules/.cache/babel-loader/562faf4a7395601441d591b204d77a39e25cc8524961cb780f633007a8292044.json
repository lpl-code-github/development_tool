{"ast":null,"code":"export default {\n  name: \"OneLog\",\n  props: {\n    openFlag: {\n      type: Boolean,\n      required: true\n    },\n    date: {\n      type: String,\n      required: true\n    },\n    logData: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      loadingMore: false,\n      showLoadingMore: false,\n      visible: false,\n      busy: false,\n      listData: [],\n      showData: []\n    };\n  },\n  computed: {\n    splitTime() {\n      return function (item) {\n        const [date, time] = item.split(' ');\n        return time;\n      };\n    }\n  },\n  watch: {\n    openFlag: {\n      handler: function (newVal, oldVal) {\n        this.visible = newVal;\n      },\n      // 深度观察监听\n      deep: true\n    },\n    logData: {\n      handler: function (newVal, oldVal) {\n        console.log(newVal);\n        this.listData = newVal;\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  mounted() {\n    console.log(this.taskName);\n    this.visible = this.openFlag;\n  },\n  methods: {\n    afterClose(e) {\n      this.$emit('updateModelStatus', false);\n    },\n    handleInfiniteOnLoad() {\n      const data = this.data;\n      this.listLoading = true;\n      if (data.length > 14) {\n        this.$message.warning('Infinite List loaded all');\n        this.busy = true;\n        this.listLoading = false;\n        return;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","openFlag","type","Boolean","required","date","String","logData","Array","data","loading","loadingMore","showLoadingMore","visible","busy","listData","showData","computed","splitTime","item","time","split","watch","handler","newVal","oldVal","deep","console","log","mounted","taskName","methods","afterClose","e","$emit","handleInfiniteOnLoad","listLoading","length","$message","warning"],"sources":["src/components/log/OneLog.vue"],"sourcesContent":["<template>\n  <div>\n    <a-modal\n        v-model=\"visible\"\n        :title=\"date\"\n        on-ok=\"handleOk\"\n        :footer=\"null\"\n        :afterClose=\"afterClose\"\n        :maskClosable=\"true\">\n\n\n      <a-list\n          class=\"demo-loadmore-list\"\n          :loading=\"loading\"\n          item-layout=\"horizontal\"\n          :data-source=\"listData\">\n\n        <div\n            v-if=\"showLoadingMore\"\n            slot=\"loadMore\"\n            :style=\"{ textAlign: 'center', marginTop: '12px', height: '32px', lineHeight: '32px' }\"\n        >\n          <a-spin v-if=\"loadingMore\"/>\n          <a-button v-else @click=\"onLoadMore\">\n            loading more\n          </a-button>\n        </div>\n\n        <a-list-item slot=\"renderItem\" slot-scope=\"item, index\">\n          <a-popover placement=\"bottom\" slot=\"actions\">\n            <template slot=\"content\">\n              <p>{{ item.message ? item.message : '没有记录' }}</p>\n            </template>\n            <a v-if=\"item.status_code !== 200\" size=\"small\">\n              报错信息\n            </a>\n          </a-popover>\n          <a-list-item-meta>\n              <span slot=\"title\" style=\"display: flex;justify-content: space-between\">\n                <span>\n                   <a-tag :color=\"item.status_code === 200? '#1ba81e' :'#f50' \">\n                  {{ item.status_code }}\n                  </a-tag>\n\n                  <span>{{ item.type }}</span>\n                </span>\n                <span style=\"color: #a6a3a3\">\n                    {{ splitTime(item.created_at) }}\n                </span>\n              </span>\n          </a-list-item-meta>\n          {{ item.name }}\n        </a-list-item>\n        <div v-if=\"loading && !busy\" class=\"demo-loading-container\">\n          <a-spin/>\n        </div>\n      </a-list>\n\n    </a-modal>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"OneLog\",\n  props: {\n    openFlag: {\n      type: Boolean,\n      required: true\n    },\n    date: {\n      type: String,\n      required: true\n    },\n    logData: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      loadingMore: false,\n      showLoadingMore:false,\n      visible: false,\n      busy: false,\n      listData: [],\n      showData: [],\n    };\n  },\n  computed: {\n    splitTime() {\n      return function (item) {\n        const [date, time] = item.split(' ');\n        return time;\n      }\n    }\n  },\n  watch: {\n    openFlag: {\n      handler: function (newVal, oldVal) {\n        this.visible = newVal\n      },\n      // 深度观察监听\n      deep: true\n    },\n    logData: {\n      handler: function (newVal, oldVal) {\n        console.log(newVal)\n        this.listData = newVal\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  mounted() {\n    console.log(this.taskName)\n    this.visible = this.openFlag\n  },\n  methods: {\n    afterClose(e) {\n      this.$emit('updateModelStatus', false)\n    },\n    handleInfiniteOnLoad() {\n      const data = this.data;\n      this.listLoading = true;\n      if (data.length > 14) {\n        this.$message.warning('Infinite List loaded all');\n        this.busy = true;\n        this.listLoading = false;\n        return;\n      }\n\n    },\n  }\n};\n</script>\n<style scoped>\n/deep/ .ant-modal-body {\n  max-height: 400px;\n  overflow-y: auto;\n}\n</style>\n"],"mappings":"AA8DA;EACAA,IAAA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;IACAG,OAAA;MACAL,IAAA,EAAAM,KAAA;MACAJ,QAAA;IACA;EACA;EACAK,KAAA;IACA;MACAC,OAAA;MACAC,WAAA;MACAC,eAAA;MACAC,OAAA;MACAC,IAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACAC,UAAA;MACA,iBAAAC,IAAA;QACA,OAAAd,IAAA,EAAAe,IAAA,IAAAD,IAAA,CAAAE,KAAA;QACA,OAAAD,IAAA;MACA;IACA;EACA;EACAE,KAAA;IACArB,QAAA;MACAsB,OAAA,WAAAA,CAAAC,MAAA,EAAAC,MAAA;QACA,KAAAZ,OAAA,GAAAW,MAAA;MACA;MACA;MACAE,IAAA;IACA;IACAnB,OAAA;MACAgB,OAAA,WAAAA,CAAAC,MAAA,EAAAC,MAAA;QACAE,OAAA,CAAAC,GAAA,CAAAJ,MAAA;QACA,KAAAT,QAAA,GAAAS,MAAA;MACA;MACA;MACAE,IAAA;IACA;EACA;EACAG,QAAA;IACAF,OAAA,CAAAC,GAAA,MAAAE,QAAA;IACA,KAAAjB,OAAA,QAAAZ,QAAA;EACA;EACA8B,OAAA;IACAC,WAAAC,CAAA;MACA,KAAAC,KAAA;IACA;IACAC,qBAAA;MACA,MAAA1B,IAAA,QAAAA,IAAA;MACA,KAAA2B,WAAA;MACA,IAAA3B,IAAA,CAAA4B,MAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACA,KAAAzB,IAAA;QACA,KAAAsB,WAAA;QACA;MACA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}