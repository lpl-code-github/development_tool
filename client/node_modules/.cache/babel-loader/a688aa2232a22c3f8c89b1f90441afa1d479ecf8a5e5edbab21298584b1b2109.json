{"ast":null,"code":"import canUseDom from '../../_util/canUseDom';\nimport contains from './contains';\nconst APPEND_ORDER = 'data-vc-order';\nconst MARK_KEY = `vc-util-key`;\nconst containerCache = new Map();\nfunction getMark() {\n  let {\n    mark\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (mark) {\n    return mark.startsWith('data-') ? mark : `data-${mark}`;\n  }\n  return MARK_KEY;\n}\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n  const head = document.querySelector('head');\n  return head || document.body;\n}\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n  return prepend ? 'prepend' : 'append';\n}\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(node => node.tagName === 'STYLE');\n}\nexport function injectCSS(css) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!canUseDom()) {\n    return null;\n  }\n  const {\n    csp,\n    prepend\n  } = option;\n  const styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, getOrder(prepend));\n  if (csp === null || csp === void 0 ? void 0 : csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n  styleNode.innerHTML = css;\n  const container = getContainer(option);\n  const {\n    firstChild\n  } = container;\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (prepend === 'queue') {\n      const existStyle = findStyles(container).filter(node => ['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER)));\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    }\n    // Use `insertBefore` as `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n  return styleNode;\n}\nfunction findExistNode(key) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const container = getContainer(option);\n  return findStyles(container).find(node => node.getAttribute(getMark(option)) === key);\n}\nexport function removeCSS(key) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    const container = getContainer(option);\n    container.removeChild(existNode);\n  }\n}\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container, option) {\n  const cachedRealContainer = containerCache.get(container);\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !contains(document, cachedRealContainer)) {\n    const placeholderStyle = injectCSS('', option);\n    const {\n      parentNode\n    } = placeholderStyle;\n    containerCache.set(container, parentNode);\n    container.removeChild(placeholderStyle);\n  }\n}\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nexport function clearContainerCache() {\n  containerCache.clear();\n}\nexport function updateCSS(css, key) {\n  let option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _a, _b, _c;\n  const container = getContainer(option);\n  // Sync real parent\n  syncRealContainer(container, option);\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    if (((_a = option.csp) === null || _a === void 0 ? void 0 : _a.nonce) && existNode.nonce !== ((_b = option.csp) === null || _b === void 0 ? void 0 : _b.nonce)) {\n      existNode.nonce = (_c = option.csp) === null || _c === void 0 ? void 0 : _c.nonce;\n    }\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n    return existNode;\n  }\n  const newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}","map":{"version":3,"names":["canUseDom","contains","APPEND_ORDER","MARK_KEY","containerCache","Map","getMark","mark","arguments","length","undefined","startsWith","getContainer","option","attachTo","head","document","querySelector","body","getOrder","prepend","findStyles","container","Array","from","get","children","filter","node","tagName","injectCSS","css","csp","styleNode","createElement","setAttribute","nonce","innerHTML","firstChild","existStyle","includes","getAttribute","insertBefore","nextSibling","appendChild","findExistNode","key","find","removeCSS","existNode","removeChild","syncRealContainer","cachedRealContainer","placeholderStyle","parentNode","set","clearContainerCache","clear","updateCSS","_a","_b","_c","newNode"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/vc-util/Dom/dynamicCSS.js"],"sourcesContent":["import canUseDom from '../../_util/canUseDom';\nimport contains from './contains';\nconst APPEND_ORDER = 'data-vc-order';\nconst MARK_KEY = `vc-util-key`;\nconst containerCache = new Map();\nfunction getMark() {\n  let {\n    mark\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (mark) {\n    return mark.startsWith('data-') ? mark : `data-${mark}`;\n  }\n  return MARK_KEY;\n}\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n  const head = document.querySelector('head');\n  return head || document.body;\n}\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n  return prepend ? 'prepend' : 'append';\n}\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(node => node.tagName === 'STYLE');\n}\nexport function injectCSS(css) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!canUseDom()) {\n    return null;\n  }\n  const {\n    csp,\n    prepend\n  } = option;\n  const styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, getOrder(prepend));\n  if (csp === null || csp === void 0 ? void 0 : csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n  styleNode.innerHTML = css;\n  const container = getContainer(option);\n  const {\n    firstChild\n  } = container;\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (prepend === 'queue') {\n      const existStyle = findStyles(container).filter(node => ['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER)));\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    }\n    // Use `insertBefore` as `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n  return styleNode;\n}\nfunction findExistNode(key) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const container = getContainer(option);\n  return findStyles(container).find(node => node.getAttribute(getMark(option)) === key);\n}\nexport function removeCSS(key) {\n  let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    const container = getContainer(option);\n    container.removeChild(existNode);\n  }\n}\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container, option) {\n  const cachedRealContainer = containerCache.get(container);\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !contains(document, cachedRealContainer)) {\n    const placeholderStyle = injectCSS('', option);\n    const {\n      parentNode\n    } = placeholderStyle;\n    containerCache.set(container, parentNode);\n    container.removeChild(placeholderStyle);\n  }\n}\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nexport function clearContainerCache() {\n  containerCache.clear();\n}\nexport function updateCSS(css, key) {\n  let option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _a, _b, _c;\n  const container = getContainer(option);\n  // Sync real parent\n  syncRealContainer(container, option);\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    if (((_a = option.csp) === null || _a === void 0 ? void 0 : _a.nonce) && existNode.nonce !== ((_b = option.csp) === null || _b === void 0 ? void 0 : _b.nonce)) {\n      existNode.nonce = (_c = option.csp) === null || _c === void 0 ? void 0 : _c.nonce;\n    }\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n    return existNode;\n  }\n  const newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}"],"mappings":"AAAA,OAAOA,SAAS,MAAM,uBAAuB;AAC7C,OAAOC,QAAQ,MAAM,YAAY;AACjC,MAAMC,YAAY,GAAG,eAAe;AACpC,MAAMC,QAAQ,GAAI,aAAY;AAC9B,MAAMC,cAAc,GAAG,IAAIC,GAAG,CAAC,CAAC;AAChC,SAASC,OAAOA,CAAA,EAAG;EACjB,IAAI;IACFC;EACF,CAAC,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EAC1E,IAAID,IAAI,EAAE;IACR,OAAOA,IAAI,CAACI,UAAU,CAAC,OAAO,CAAC,GAAGJ,IAAI,GAAI,QAAOA,IAAK,EAAC;EACzD;EACA,OAAOJ,QAAQ;AACjB;AACA,SAASS,YAAYA,CAACC,MAAM,EAAE;EAC5B,IAAIA,MAAM,CAACC,QAAQ,EAAE;IACnB,OAAOD,MAAM,CAACC,QAAQ;EACxB;EACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EAC3C,OAAOF,IAAI,IAAIC,QAAQ,CAACE,IAAI;AAC9B;AACA,SAASC,QAAQA,CAACC,OAAO,EAAE;EACzB,IAAIA,OAAO,KAAK,OAAO,EAAE;IACvB,OAAO,cAAc;EACvB;EACA,OAAOA,OAAO,GAAG,SAAS,GAAG,QAAQ;AACvC;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAACC,SAAS,EAAE;EAC7B,OAAOC,KAAK,CAACC,IAAI,CAAC,CAACpB,cAAc,CAACqB,GAAG,CAACH,SAAS,CAAC,IAAIA,SAAS,EAAEI,QAAQ,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,KAAK,OAAO,CAAC;AACnH;AACA,OAAO,SAASC,SAASA,CAACC,GAAG,EAAE;EAC7B,IAAIlB,MAAM,GAAGL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACnF,IAAI,CAACR,SAAS,CAAC,CAAC,EAAE;IAChB,OAAO,IAAI;EACb;EACA,MAAM;IACJgC,GAAG;IACHZ;EACF,CAAC,GAAGP,MAAM;EACV,MAAMoB,SAAS,GAAGjB,QAAQ,CAACkB,aAAa,CAAC,OAAO,CAAC;EACjDD,SAAS,CAACE,YAAY,CAACjC,YAAY,EAAEiB,QAAQ,CAACC,OAAO,CAAC,CAAC;EACvD,IAAIY,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACI,KAAK,EAAE;IACvDH,SAAS,CAACG,KAAK,GAAGJ,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACI,KAAK;EACvE;EACAH,SAAS,CAACI,SAAS,GAAGN,GAAG;EACzB,MAAMT,SAAS,GAAGV,YAAY,CAACC,MAAM,CAAC;EACtC,MAAM;IACJyB;EACF,CAAC,GAAGhB,SAAS;EACb,IAAIF,OAAO,EAAE;IACX;IACA,IAAIA,OAAO,KAAK,OAAO,EAAE;MACvB,MAAMmB,UAAU,GAAGlB,UAAU,CAACC,SAAS,CAAC,CAACK,MAAM,CAACC,IAAI,IAAI,CAAC,SAAS,EAAE,cAAc,CAAC,CAACY,QAAQ,CAACZ,IAAI,CAACa,YAAY,CAACvC,YAAY,CAAC,CAAC,CAAC;MAC9H,IAAIqC,UAAU,CAAC9B,MAAM,EAAE;QACrBa,SAAS,CAACoB,YAAY,CAACT,SAAS,EAAEM,UAAU,CAACA,UAAU,CAAC9B,MAAM,GAAG,CAAC,CAAC,CAACkC,WAAW,CAAC;QAChF,OAAOV,SAAS;MAClB;IACF;IACA;IACAX,SAAS,CAACoB,YAAY,CAACT,SAAS,EAAEK,UAAU,CAAC;EAC/C,CAAC,MAAM;IACLhB,SAAS,CAACsB,WAAW,CAACX,SAAS,CAAC;EAClC;EACA,OAAOA,SAAS;AAClB;AACA,SAASY,aAAaA,CAACC,GAAG,EAAE;EAC1B,IAAIjC,MAAM,GAAGL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACnF,MAAMc,SAAS,GAAGV,YAAY,CAACC,MAAM,CAAC;EACtC,OAAOQ,UAAU,CAACC,SAAS,CAAC,CAACyB,IAAI,CAACnB,IAAI,IAAIA,IAAI,CAACa,YAAY,CAACnC,OAAO,CAACO,MAAM,CAAC,CAAC,KAAKiC,GAAG,CAAC;AACvF;AACA,OAAO,SAASE,SAASA,CAACF,GAAG,EAAE;EAC7B,IAAIjC,MAAM,GAAGL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACnF,MAAMyC,SAAS,GAAGJ,aAAa,CAACC,GAAG,EAAEjC,MAAM,CAAC;EAC5C,IAAIoC,SAAS,EAAE;IACb,MAAM3B,SAAS,GAAGV,YAAY,CAACC,MAAM,CAAC;IACtCS,SAAS,CAAC4B,WAAW,CAACD,SAAS,CAAC;EAClC;AACF;AACA;AACA;AACA;AACA,SAASE,iBAAiBA,CAAC7B,SAAS,EAAET,MAAM,EAAE;EAC5C,MAAMuC,mBAAmB,GAAGhD,cAAc,CAACqB,GAAG,CAACH,SAAS,CAAC;EACzD;EACA,IAAI,CAAC8B,mBAAmB,IAAI,CAACnD,QAAQ,CAACe,QAAQ,EAAEoC,mBAAmB,CAAC,EAAE;IACpE,MAAMC,gBAAgB,GAAGvB,SAAS,CAAC,EAAE,EAAEjB,MAAM,CAAC;IAC9C,MAAM;MACJyC;IACF,CAAC,GAAGD,gBAAgB;IACpBjD,cAAc,CAACmD,GAAG,CAACjC,SAAS,EAAEgC,UAAU,CAAC;IACzChC,SAAS,CAAC4B,WAAW,CAACG,gBAAgB,CAAC;EACzC;AACF;AACA;AACA;AACA;AACA,OAAO,SAASG,mBAAmBA,CAAA,EAAG;EACpCpD,cAAc,CAACqD,KAAK,CAAC,CAAC;AACxB;AACA,OAAO,SAASC,SAASA,CAAC3B,GAAG,EAAEe,GAAG,EAAE;EAClC,IAAIjC,MAAM,GAAGL,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACnF,IAAImD,EAAE,EAAEC,EAAE,EAAEC,EAAE;EACd,MAAMvC,SAAS,GAAGV,YAAY,CAACC,MAAM,CAAC;EACtC;EACAsC,iBAAiB,CAAC7B,SAAS,EAAET,MAAM,CAAC;EACpC,MAAMoC,SAAS,GAAGJ,aAAa,CAACC,GAAG,EAAEjC,MAAM,CAAC;EAC5C,IAAIoC,SAAS,EAAE;IACb,IAAI,CAAC,CAACU,EAAE,GAAG9C,MAAM,CAACmB,GAAG,MAAM,IAAI,IAAI2B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACvB,KAAK,KAAKa,SAAS,CAACb,KAAK,MAAM,CAACwB,EAAE,GAAG/C,MAAM,CAACmB,GAAG,MAAM,IAAI,IAAI4B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACxB,KAAK,CAAC,EAAE;MAC9Ja,SAAS,CAACb,KAAK,GAAG,CAACyB,EAAE,GAAGhD,MAAM,CAACmB,GAAG,MAAM,IAAI,IAAI6B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACzB,KAAK;IACnF;IACA,IAAIa,SAAS,CAACZ,SAAS,KAAKN,GAAG,EAAE;MAC/BkB,SAAS,CAACZ,SAAS,GAAGN,GAAG;IAC3B;IACA,OAAOkB,SAAS;EAClB;EACA,MAAMa,OAAO,GAAGhC,SAAS,CAACC,GAAG,EAAElB,MAAM,CAAC;EACtCiD,OAAO,CAAC3B,YAAY,CAAC7B,OAAO,CAACO,MAAM,CAAC,EAAEiC,GAAG,CAAC;EAC1C,OAAOgB,OAAO;AAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}