{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent, onUnmounted, reactive, ref, watch } from 'vue';\nimport classNames from '../_util/classNames';\nfunction UnitNumber(_ref) {\n  let {\n    prefixCls,\n    value,\n    current,\n    offset = 0\n  } = _ref;\n  let style;\n  if (offset) {\n    style = {\n      position: 'absolute',\n      top: `${offset}00%`,\n      left: 0\n    };\n  }\n  return _createVNode(\"p\", {\n    \"style\": style,\n    \"class\": classNames(`${prefixCls}-only-unit`, {\n      current\n    })\n  }, [value]);\n}\nfunction getOffset(start, end, unit) {\n  let index = start;\n  let offset = 0;\n  while ((index + 10) % 10 !== end) {\n    index += unit;\n    offset += unit;\n  }\n  return offset;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'SingleNumber',\n  props: {\n    prefixCls: String,\n    value: String,\n    count: Number\n  },\n  setup(props) {\n    const originValue = computed(() => Number(props.value));\n    const originCount = computed(() => Math.abs(props.count));\n    const state = reactive({\n      prevValue: originValue.value,\n      prevCount: originCount.value\n    });\n    // ============================= Events =============================\n    const onTransitionEnd = () => {\n      state.prevValue = originValue.value;\n      state.prevCount = originCount.value;\n    };\n    const timeout = ref();\n    // Fallback if transition event not support\n    watch(originValue, () => {\n      clearTimeout(timeout.value);\n      timeout.value = setTimeout(() => {\n        onTransitionEnd();\n      }, 1000);\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(() => {\n      clearTimeout(timeout.value);\n    });\n    return () => {\n      let unitNodes;\n      let offsetStyle = {};\n      const value = originValue.value;\n      if (state.prevValue === value || Number.isNaN(value) || Number.isNaN(state.prevValue)) {\n        // Nothing to change\n        unitNodes = [UnitNumber(_extends(_extends({}, props), {\n          current: true\n        }))];\n        offsetStyle = {\n          transition: 'none'\n        };\n      } else {\n        unitNodes = [];\n        // Fill basic number units\n        const end = value + 10;\n        const unitNumberList = [];\n        for (let index = value; index <= end; index += 1) {\n          unitNumberList.push(index);\n        }\n        // Fill with number unit nodes\n        const prevIndex = unitNumberList.findIndex(n => n % 10 === state.prevValue);\n        unitNodes = unitNumberList.map((n, index) => {\n          const singleUnit = n % 10;\n          return UnitNumber(_extends(_extends({}, props), {\n            value: singleUnit,\n            offset: index - prevIndex,\n            current: index === prevIndex\n          }));\n        });\n        // Calculate container offset value\n        const unit = state.prevCount < originCount.value ? 1 : -1;\n        offsetStyle = {\n          transform: `translateY(${-getOffset(state.prevValue, value, unit)}00%)`\n        };\n      }\n      return _createVNode(\"span\", {\n        \"class\": `${props.prefixCls}-only`,\n        \"style\": offsetStyle,\n        \"onTransitionend\": () => onTransitionEnd()\n      }, [unitNodes]);\n    };\n  }\n});","map":{"version":3,"names":["_extends","createVNode","_createVNode","computed","defineComponent","onUnmounted","reactive","ref","watch","classNames","UnitNumber","_ref","prefixCls","value","current","offset","style","position","top","left","getOffset","start","end","unit","index","compatConfig","MODE","name","props","String","count","Number","setup","originValue","originCount","Math","abs","state","prevValue","prevCount","onTransitionEnd","timeout","clearTimeout","setTimeout","flush","unitNodes","offsetStyle","isNaN","transition","unitNumberList","push","prevIndex","findIndex","n","map","singleUnit","transform","onTransitionend"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/badge/SingleNumber.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent, onUnmounted, reactive, ref, watch } from 'vue';\nimport classNames from '../_util/classNames';\nfunction UnitNumber(_ref) {\n  let {\n    prefixCls,\n    value,\n    current,\n    offset = 0\n  } = _ref;\n  let style;\n  if (offset) {\n    style = {\n      position: 'absolute',\n      top: `${offset}00%`,\n      left: 0\n    };\n  }\n  return _createVNode(\"p\", {\n    \"style\": style,\n    \"class\": classNames(`${prefixCls}-only-unit`, {\n      current\n    })\n  }, [value]);\n}\nfunction getOffset(start, end, unit) {\n  let index = start;\n  let offset = 0;\n  while ((index + 10) % 10 !== end) {\n    index += unit;\n    offset += unit;\n  }\n  return offset;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'SingleNumber',\n  props: {\n    prefixCls: String,\n    value: String,\n    count: Number\n  },\n  setup(props) {\n    const originValue = computed(() => Number(props.value));\n    const originCount = computed(() => Math.abs(props.count));\n    const state = reactive({\n      prevValue: originValue.value,\n      prevCount: originCount.value\n    });\n    // ============================= Events =============================\n    const onTransitionEnd = () => {\n      state.prevValue = originValue.value;\n      state.prevCount = originCount.value;\n    };\n    const timeout = ref();\n    // Fallback if transition event not support\n    watch(originValue, () => {\n      clearTimeout(timeout.value);\n      timeout.value = setTimeout(() => {\n        onTransitionEnd();\n      }, 1000);\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(() => {\n      clearTimeout(timeout.value);\n    });\n    return () => {\n      let unitNodes;\n      let offsetStyle = {};\n      const value = originValue.value;\n      if (state.prevValue === value || Number.isNaN(value) || Number.isNaN(state.prevValue)) {\n        // Nothing to change\n        unitNodes = [UnitNumber(_extends(_extends({}, props), {\n          current: true\n        }))];\n        offsetStyle = {\n          transition: 'none'\n        };\n      } else {\n        unitNodes = [];\n        // Fill basic number units\n        const end = value + 10;\n        const unitNumberList = [];\n        for (let index = value; index <= end; index += 1) {\n          unitNumberList.push(index);\n        }\n        // Fill with number unit nodes\n        const prevIndex = unitNumberList.findIndex(n => n % 10 === state.prevValue);\n        unitNodes = unitNumberList.map((n, index) => {\n          const singleUnit = n % 10;\n          return UnitNumber(_extends(_extends({}, props), {\n            value: singleUnit,\n            offset: index - prevIndex,\n            current: index === prevIndex\n          }));\n        });\n        // Calculate container offset value\n        const unit = state.prevCount < originCount.value ? 1 : -1;\n        offsetStyle = {\n          transform: `translateY(${-getOffset(state.prevValue, value, unit)}00%)`\n        };\n      }\n      return _createVNode(\"span\", {\n        \"class\": `${props.prefixCls}-only`,\n        \"style\": offsetStyle,\n        \"onTransitionend\": () => onTransitionEnd()\n      }, [unitNodes]);\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}