{"ast":null,"code":"import Code from \"@/components/code/Code\";\nimport Json from \"@/components/code/Json\";\nimport clipboard from \"clipboard\";\nexport default {\n  name: \"PostmanTestGenerator\",\n  components: {\n    Json,\n    Code\n  },\n  data() {\n    return {\n      jsonData: {\n        hasJsonFlag: false\n      },\n      codeText: \"\",\n      loading: false,\n      copySuccess: false,\n      test: {\n        \"data\": {\n          \"name\": \"432\",\n          \"test\": \"$325\"\n        },\n        \"name\": \"stet\",\n        \"age\": 14434343444333,\n        \"balance\": \"3434\",\n        \"tags\": [\"43\", \"$325\"],\n        \"null\": null,\n        \"flag\": true\n      }\n    };\n  },\n  created() {\n    this.test = JSON.stringify(\"{\\\"data\\\":{\\\"name\\\":\\\"432\\\",\\\"test\\\":\\\"$325\\\"},\\\"name\\\":\\\"stet\\\",\\\"age\\\":14434343444333,\\\"balance\\\":\\\"3434\\\",\\\"tags\\\":[\\\"43\\\",\\\"$325\\\"],\\\"null\\\":null,\\\"flag\\\":true}\");\n  },\n  methods: {\n    getJsonData(jsonData) {\n      this.jsonData = jsonData;\n    },\n    generatePostmanTest() {\n      if (!this.jsonData.hasJsonFlag) {\n        this.$message.error(\"Json格式错误，请检查\");\n        return;\n      }\n      this.loading = true;\n      var jsonReq = this.jsonData.value;\n      this.$request.generatePostmanTest(jsonReq).then(res => {\n        if (res.status === 200) {\n          this.codeText = res.data;\n          this.loading = false;\n        } else {\n          this.loading = false;\n        }\n      });\n    },\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText === \"\") {\n        _this.$message.warn(\"没有可以复制的内容\");\n        return;\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["Code","Json","clipboard","name","components","data","jsonData","hasJsonFlag","codeText","loading","copySuccess","test","created","JSON","stringify","methods","getJsonData","generatePostmanTest","$message","error","jsonReq","value","$request","then","res","status","copyMessage","_this","warn","clipboardObj","on","e","success","destroy"],"sources":["src/views/PostmanTestGenerator.vue"],"sourcesContent":["<template>\n  <div class=\"postman-test-gen\">\n    <div style=\"width: 48%;\">\n      <div class=\"text-button\">\n        <p class=\"my-title\" style=\"margin-bottom: 10px!important;\">Json:</p>\n        <a-button type=\"primary\" @click=\"generatePostmanTest\" style=\"margin-top: 10px\">\n          生成测试\n        </a-button>\n      </div>\n      <Json @updateJsonData=\"getJsonData\"></Json>\n    </div>\n    <div style=\"width: 48%\">\n      <div class=\"text-button\">\n        <p class=\"my-title\" style=\"margin-bottom: 10px!important;\">Postman Test:</p>\n        <a-button\n            class=\"copy-btn code-data-copy\"\n            icon=\"copy\"\n            v-if=\"codeText!==''\"\n            style=\"margin-top: 10px\"\n            @click=\"copyMessage\"\n            data-clipboard-action=\"copy\"\n            :data-clipboard-text=\"codeText\">\n          复制\n        </a-button>\n      </div>\n      <a-spin size=\"large\" :spinning=\"loading\">\n         <Code :code-text=\"codeText\"><a-spin /></Code>\n      </a-spin>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Code from \"@/components/code/Code\";\nimport Json from \"@/components/code/Json\";\nimport clipboard from \"clipboard\";\nexport default {\n  name: \"PostmanTestGenerator\",\n  components: {Json, Code},\n  data(){\n    return{\n      jsonData:{\n        hasJsonFlag: false\n      },\n      codeText:\"\",\n      loading: false,\n      copySuccess: false,\n      test:{\"data\":{\"name\":\"432\",\"test\":\"$325\"},\"name\":\"stet\",\"age\":14434343444333,\"balance\":\"3434\",\"tags\":[\"43\",\"$325\"],\"null\":null,\"flag\":true}\n    }\n  },\n  created() {\n    this.test =JSON.stringify(\"{\\\"data\\\":{\\\"name\\\":\\\"432\\\",\\\"test\\\":\\\"$325\\\"},\\\"name\\\":\\\"stet\\\",\\\"age\\\":14434343444333,\\\"balance\\\":\\\"3434\\\",\\\"tags\\\":[\\\"43\\\",\\\"$325\\\"],\\\"null\\\":null,\\\"flag\\\":true}\")\n  },\n  methods:{\n    getJsonData(jsonData){\n      this.jsonData = jsonData\n    },\n    generatePostmanTest(){\n      if (!this.jsonData.hasJsonFlag){\n        this.$message.error(\"Json格式错误，请检查\")\n        return\n      }\n      this.loading = true\n      var jsonReq = this.jsonData.value\n      this.$request.generatePostmanTest(jsonReq).then(res=>{\n        if (res.status === 200){\n          this.codeText = res.data\n          this.loading = false\n        }else {\n          this.loading = false\n        }\n      })\n    },\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText===\"\"){\n        _this.$message.warn(\"没有可以复制的内容\");\n        return\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  },\n\n}\n</script>\n\n<style scoped>\n.postman-test-gen{\n  display: flex;\n  justify-content: space-around;\n  overflow-y: hidden;\n}\n.text-button{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.my-title{\n  margin-bottom: -12px;\n  margin-top: 20px;\n  font-size: 17px\n}\n.example-test {\n  text-align: center;\n}\n</style>\n"],"mappings":"AAiCA,OAAAA,IAAA;AACA,OAAAC,IAAA;AACA,OAAAC,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAH,IAAA;IAAAD;EAAA;EACAK,KAAA;IACA;MACAC,QAAA;QACAC,WAAA;MACA;MACAC,QAAA;MACAC,OAAA;MACAC,WAAA;MACAC,IAAA;QAAA;UAAA;UAAA;QAAA;QAAA;QAAA;QAAA;QAAA;QAAA;QAAA;MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAD,IAAA,GAAAE,IAAA,CAAAC,SAAA;EACA;EACAC,OAAA;IACAC,YAAAV,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;IACA;IACAW,oBAAA;MACA,UAAAX,QAAA,CAAAC,WAAA;QACA,KAAAW,QAAA,CAAAC,KAAA;QACA;MACA;MACA,KAAAV,OAAA;MACA,IAAAW,OAAA,QAAAd,QAAA,CAAAe,KAAA;MACA,KAAAC,QAAA,CAAAL,mBAAA,CAAAG,OAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAjB,QAAA,GAAAgB,GAAA,CAAAnB,IAAA;UACA,KAAAI,OAAA;QACA;UACA,KAAAA,OAAA;QACA;MACA;IACA;IACAiB,YAAA;MACA,IAAAC,KAAA;MACA,IAAAA,KAAA,CAAAnB,QAAA;QACAmB,KAAA,CAAAT,QAAA,CAAAU,IAAA;QACA;MACA;MACAD,KAAA,CAAAjB,WAAA;MACA,IAAAmB,YAAA,OAAA3B,SAAA;MACA2B,YAAA,CAAAC,EAAA,sBAAAC,CAAA;QACAJ,KAAA,CAAAjB,WAAA;QACAiB,KAAA,CAAAT,QAAA,CAAAc,OAAA;QACAH,YAAA,CAAAI,OAAA;MACA;;MACAJ,YAAA,CAAAC,EAAA;QACAH,KAAA,CAAAT,QAAA,CAAAC,KAAA;MACA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}