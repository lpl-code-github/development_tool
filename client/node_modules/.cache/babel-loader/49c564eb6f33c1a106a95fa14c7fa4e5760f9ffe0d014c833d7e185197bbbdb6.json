{"ast":null,"code":"import { watch, shallowRef } from 'vue';\nexport default function useLazyKVMap(dataRef, childrenColumnNameRef, getRowKeyRef) {\n  const mapCacheRef = shallowRef({});\n  watch([dataRef, childrenColumnNameRef, getRowKeyRef], () => {\n    const kvMap = new Map();\n    const getRowKey = getRowKeyRef.value;\n    const childrenColumnName = childrenColumnNameRef.value;\n    /* eslint-disable no-inner-declarations */\n    function dig(records) {\n      records.forEach((record, index) => {\n        const rowKey = getRowKey(record, index);\n        kvMap.set(rowKey, record);\n        if (record && typeof record === 'object' && childrenColumnName in record) {\n          dig(record[childrenColumnName] || []);\n        }\n      });\n    }\n    /* eslint-enable */\n    dig(dataRef.value);\n    mapCacheRef.value = {\n      kvMap\n    };\n  }, {\n    deep: true,\n    immediate: true\n  });\n  function getRecordByKey(key) {\n    return mapCacheRef.value.kvMap.get(key);\n  }\n  return [getRecordByKey];\n}","map":{"version":3,"names":["watch","shallowRef","useLazyKVMap","dataRef","childrenColumnNameRef","getRowKeyRef","mapCacheRef","kvMap","Map","getRowKey","value","childrenColumnName","dig","records","forEach","record","index","rowKey","set","deep","immediate","getRecordByKey","key","get"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/table/hooks/useLazyKVMap.js"],"sourcesContent":["import { watch, shallowRef } from 'vue';\nexport default function useLazyKVMap(dataRef, childrenColumnNameRef, getRowKeyRef) {\n  const mapCacheRef = shallowRef({});\n  watch([dataRef, childrenColumnNameRef, getRowKeyRef], () => {\n    const kvMap = new Map();\n    const getRowKey = getRowKeyRef.value;\n    const childrenColumnName = childrenColumnNameRef.value;\n    /* eslint-disable no-inner-declarations */\n    function dig(records) {\n      records.forEach((record, index) => {\n        const rowKey = getRowKey(record, index);\n        kvMap.set(rowKey, record);\n        if (record && typeof record === 'object' && childrenColumnName in record) {\n          dig(record[childrenColumnName] || []);\n        }\n      });\n    }\n    /* eslint-enable */\n    dig(dataRef.value);\n    mapCacheRef.value = {\n      kvMap\n    };\n  }, {\n    deep: true,\n    immediate: true\n  });\n  function getRecordByKey(key) {\n    return mapCacheRef.value.kvMap.get(key);\n  }\n  return [getRecordByKey];\n}"],"mappings":"AAAA,SAASA,KAAK,EAAEC,UAAU,QAAQ,KAAK;AACvC,eAAe,SAASC,YAAYA,CAACC,OAAO,EAAEC,qBAAqB,EAAEC,YAAY,EAAE;EACjF,MAAMC,WAAW,GAAGL,UAAU,CAAC,CAAC,CAAC,CAAC;EAClCD,KAAK,CAAC,CAACG,OAAO,EAAEC,qBAAqB,EAAEC,YAAY,CAAC,EAAE,MAAM;IAC1D,MAAME,KAAK,GAAG,IAAIC,GAAG,CAAC,CAAC;IACvB,MAAMC,SAAS,GAAGJ,YAAY,CAACK,KAAK;IACpC,MAAMC,kBAAkB,GAAGP,qBAAqB,CAACM,KAAK;IACtD;IACA,SAASE,GAAGA,CAACC,OAAO,EAAE;MACpBA,OAAO,CAACC,OAAO,CAAC,CAACC,MAAM,EAAEC,KAAK,KAAK;QACjC,MAAMC,MAAM,GAAGR,SAAS,CAACM,MAAM,EAAEC,KAAK,CAAC;QACvCT,KAAK,CAACW,GAAG,CAACD,MAAM,EAAEF,MAAM,CAAC;QACzB,IAAIA,MAAM,IAAI,OAAOA,MAAM,KAAK,QAAQ,IAAIJ,kBAAkB,IAAII,MAAM,EAAE;UACxEH,GAAG,CAACG,MAAM,CAACJ,kBAAkB,CAAC,IAAI,EAAE,CAAC;QACvC;MACF,CAAC,CAAC;IACJ;IACA;IACAC,GAAG,CAACT,OAAO,CAACO,KAAK,CAAC;IAClBJ,WAAW,CAACI,KAAK,GAAG;MAClBH;IACF,CAAC;EACH,CAAC,EAAE;IACDY,IAAI,EAAE,IAAI;IACVC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,SAASC,cAAcA,CAACC,GAAG,EAAE;IAC3B,OAAOhB,WAAW,CAACI,KAAK,CAACH,KAAK,CAACgB,GAAG,CAACD,GAAG,CAAC;EACzC;EACA,OAAO,CAACD,cAAc,CAAC;AACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}