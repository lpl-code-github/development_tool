{"ast":null,"code":"import Markdown from \"@/components/code/Markdown\";\nexport default {\n  name: 'SlateGenerator',\n  components: {\n    Markdown\n  },\n  data() {\n    return {\n      docContent: \"\",\n      loading: false,\n      confirmIsDisabled: true,\n      controllerLists: []\n    };\n  },\n  created() {\n    this.$bus.$on('markdownInput', newVal => {\n      this.docContent = newVal;\n    });\n    this.getControllerLists();\n  },\n  mounted() {\n    var editDoc = sessionStorage.getItem(\"edit_doc\");\n    if (editDoc !== null && editDoc !== \"\") {\n      this.docContent = editDoc;\n    }\n  },\n  methods: {\n    getControllerLists() {\n      var params = \"?type=controller\";\n      this.$request.getFileLists(params).then(res => {\n        if (res.status === 200) {\n          this.controllerLists = res.data;\n        }\n      });\n    },\n    getDefaultClick() {\n      if (this.docContent !== \"\") {\n        this.confirmIsDisabled = false;\n        return;\n      }\n      this.getDefaultDoc();\n    },\n    getDefaultDoc() {\n      this.loading = true;\n      this.$request.getDefaultSlateDoc().then(res => {\n        if (res.status === 200) {\n          this.docContent = res.data;\n        }\n        this.loading = false;\n      });\n    },\n    confirm(e) {\n      this.getDefaultDoc();\n    },\n    cancel(e) {},\n    filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    handleChange(value) {\n      this.loading = true; // 打开code显示 的loading\n      this.selectEntity = value;\n      this.$request.generateCode(this.selectEntity, this.selectedType).then(res => {\n        if (res.status === 200) {\n          this.codeText = res.data;\n        }\n        this.loading = false;\n      });\n    }\n  }\n};","map":{"version":3,"names":["Markdown","name","components","data","docContent","loading","confirmIsDisabled","controllerLists","created","$bus","$on","newVal","getControllerLists","mounted","editDoc","sessionStorage","getItem","methods","params","$request","getFileLists","then","res","status","getDefaultClick","getDefaultDoc","getDefaultSlateDoc","confirm","e","cancel","filterOption","input","option","componentOptions","children","text","toLowerCase","indexOf","handleChange","value","selectEntity","generateCode","selectedType","codeText"],"sources":["src/views/SlateGenerator.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin-top: 20px\">\n      <a-select\n          show-search\n          placeholder=\"选择Controller\"\n          option-filter-prop=\"children\"\n          style=\"width: 200px;\"\n          :filter-option=\"filterOption\"\n          @change=\"handleChange\"\n      >\n        <a-select-option v-for=\"(item,index) in controllerLists\" :key=\"index\" :value=\"item\">\n          {{item}}\n        </a-select-option>\n      </a-select>\n\n      <a-popconfirm\n          placement=\"leftTop\"\n          style=\"z-index: 99999!important;\"\n          title=\"编辑器中还有内容，确认重新获取模版吗？\"\n          ok-text=\"Yes\"\n          cancel-text=\"No\"\n          @confirm=\"confirm\"\n          @cancel=\"cancel\"\n          :disabled = \"confirmIsDisabled\"\n      >\n        <a-button @click=\"getDefaultClick\">获取默认模版</a-button>\n      </a-popconfirm>\n    </div>\n\n    <a-spin size=\"large\" :spinning=\"loading\">\n      <Markdown style=\"z-index: -1!important;\" :doc-content=\"docContent\"></Markdown>\n    </a-spin>\n\n  </div>\n</template>\n\n<script>\nimport Markdown from \"@/components/code/Markdown\";\nexport default {\n  name: 'SlateGenerator',\n  components: {Markdown},\n  data() {\n    return {\n      docContent:\"\",\n      loading: false,\n      confirmIsDisabled:true,\n      controllerLists:[]\n    }\n  },\n  created() {\n    this.$bus.$on('markdownInput', (newVal) => {\n      this.docContent = newVal\n    });\n    this.getControllerLists()\n  },\n  mounted() {\n    var editDoc = sessionStorage.getItem(\"edit_doc\");\n    if (editDoc !== null && editDoc !==\"\"){\n      this.docContent = editDoc\n    }\n  },\n  methods: {\n    getControllerLists(){\n      var params = \"?type=controller\"\n      this.$request.getFileLists(params).then(res=>{\n        if (res.status === 200){\n          this.controllerLists = res.data\n        }\n      })\n    },\n    getDefaultClick() {\n      if (this.docContent !== \"\"){\n        this.confirmIsDisabled = false\n        return\n      }\n      this.getDefaultDoc()\n    },\n    getDefaultDoc(){\n      this.loading = true\n      this.$request.getDefaultSlateDoc().then(res => {\n        if (res.status === 200) {\n          this.docContent = res.data\n        }\n        this.loading = false\n      })\n    },\n    confirm(e) {\n      this.getDefaultDoc()\n    },\n    cancel(e) {\n    },\n    filterOption(input, option) {\n      return (\n          option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      );\n    },\n    handleChange(value) {\n      this.loading = true // 打开code显示 的loading\n      this.selectEntity = value\n      this.$request.generateCode(this.selectEntity,this.selectedType).then(res=>{\n        if (res.status === 200){\n          this.codeText = res.data\n        }\n        this.loading = false\n      })\n    },\n  }\n};\n</script>\n<style scoped>\n\n\n</style>\n"],"mappings":"AAsCA,OAAAA,QAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,UAAA;MACAC,OAAA;MACAC,iBAAA;MACAC,eAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,kBAAAC,MAAA;MACA,KAAAP,UAAA,GAAAO,MAAA;IACA;IACA,KAAAC,kBAAA;EACA;EACAC,QAAA;IACA,IAAAC,OAAA,GAAAC,cAAA,CAAAC,OAAA;IACA,IAAAF,OAAA,aAAAA,OAAA;MACA,KAAAV,UAAA,GAAAU,OAAA;IACA;EACA;EACAG,OAAA;IACAL,mBAAA;MACA,IAAAM,MAAA;MACA,KAAAC,QAAA,CAAAC,YAAA,CAAAF,MAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAhB,eAAA,GAAAe,GAAA,CAAAnB,IAAA;QACA;MACA;IACA;IACAqB,gBAAA;MACA,SAAApB,UAAA;QACA,KAAAE,iBAAA;QACA;MACA;MACA,KAAAmB,aAAA;IACA;IACAA,cAAA;MACA,KAAApB,OAAA;MACA,KAAAc,QAAA,CAAAO,kBAAA,GAAAL,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAnB,UAAA,GAAAkB,GAAA,CAAAnB,IAAA;QACA;QACA,KAAAE,OAAA;MACA;IACA;IACAsB,QAAAC,CAAA;MACA,KAAAH,aAAA;IACA;IACAI,OAAAD,CAAA,GACA;IACAE,aAAAC,KAAA,EAAAC,MAAA;MACA,OACAA,MAAA,CAAAC,gBAAA,CAAAC,QAAA,IAAAC,IAAA,CAAAC,WAAA,GAAAC,OAAA,CAAAN,KAAA,CAAAK,WAAA;IAEA;IACAE,aAAAC,KAAA;MACA,KAAAlC,OAAA;MACA,KAAAmC,YAAA,GAAAD,KAAA;MACA,KAAApB,QAAA,CAAAsB,YAAA,MAAAD,YAAA,OAAAE,YAAA,EAAArB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAoB,QAAA,GAAArB,GAAA,CAAAnB,IAAA;QACA;QACA,KAAAE,OAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}