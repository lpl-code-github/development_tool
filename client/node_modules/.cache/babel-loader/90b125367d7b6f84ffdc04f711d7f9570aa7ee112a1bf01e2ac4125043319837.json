{"ast":null,"code":"import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nvar lazyLoadProps = {\n  debounce: PropTypes.bool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  _propsSymbol: PropTypes.any\n};\nexport default {\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n    return {\n      visible: false\n    };\n  },\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      if (!this.visible) {\n        this.lazyLoadHandler();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      _this._mounted = true;\n      var eventNode = _this.getEventNode();\n      _this.lazyLoadHandler();\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this._mounted = false;\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(this.$el);\n    },\n    getOffset: function getOffset() {\n      var _$props = this.$props,\n        offset = _$props.offset,\n        offsetVertical = _$props.offsetVertical,\n        offsetHorizontal = _$props.offsetHorizontal,\n        offsetTop = _$props.offsetTop,\n        offsetBottom = _$props.offsetBottom,\n        offsetLeft = _$props.offsetLeft,\n        offsetRight = _$props.offsetRight,\n        threshold = _$props.threshold;\n      var _offsetAll = threshold || offset;\n      var _offsetVertical = offsetVertical || _offsetAll;\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n      if (!this._mounted) {\n        return;\n      }\n      var offset = this.getOffset();\n      var node = this.$el;\n      var eventNode = this.getEventNode();\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render(createElement) {\n    var children = this.$slots['default'];\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n    var _$props2 = this.$props,\n      height = _$props2.height,\n      width = _$props2.width,\n      elementType = _$props2.elementType;\n    var visible = this.visible;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n    var elClasses = {\n      LazyLoad: true,\n      'is-visible': visible\n    };\n    return createElement(elementType, {\n      'class': elClasses,\n      style: elStyles\n    }, [visible ? children[0] : null]);\n  }\n};","map":{"version":3,"names":["PropTypes","BaseMixin","addEventListener","initDefaultProps","warning","debounce","throttle","parentScroll","inViewport","lazyLoadProps","bool","elementType","string","height","oneOfType","number","offset","offsetBottom","offsetHorizontal","offsetLeft","offsetRight","offsetTop","offsetVertical","threshold","width","_propsSymbol","any","name","mixins","props","data","lazyLoadHandler","visible","watch","mounted","_this","$nextTick","_mounted","eventNode","getEventNode","flush","resizeHander","window","scrollHander","beforeDestroy","cancel","detachListeners","methods","$el","getOffset","_$props","$props","_offsetAll","_offsetVertical","_offsetHorizontal","top","bottom","left","right","_this2","node","setState","__emit","remove","render","createElement","children","$slots","length","_$props2","elStyles","elClasses","LazyLoad","style"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/client/node_modules/ant-design-vue/es/vc-lazy-load/src/LazyLoad.js"],"sourcesContent":["import PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\n\nvar lazyLoadProps = {\n  debounce: PropTypes.bool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  _propsSymbol: PropTypes.any\n};\n\nexport default {\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n    return {\n      visible: false\n    };\n  },\n\n  watch: {\n    _propsSymbol: function _propsSymbol() {\n      if (!this.visible) {\n        this.lazyLoadHandler();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this._mounted = true;\n      var eventNode = _this.getEventNode();\n\n      _this.lazyLoadHandler();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this._mounted = false;\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(this.$el);\n    },\n    getOffset: function getOffset() {\n      var _$props = this.$props,\n          offset = _$props.offset,\n          offsetVertical = _$props.offsetVertical,\n          offsetHorizontal = _$props.offsetHorizontal,\n          offsetTop = _$props.offsetTop,\n          offsetBottom = _$props.offsetBottom,\n          offsetLeft = _$props.offsetLeft,\n          offsetRight = _$props.offsetRight,\n          threshold = _$props.threshold;\n\n\n      var _offsetAll = threshold || offset;\n      var _offsetVertical = offsetVertical || _offsetAll;\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._mounted) {\n        return;\n      }\n      var offset = this.getOffset();\n      var node = this.$el;\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({ visible: true }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render(createElement) {\n    var children = this.$slots['default'];\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n    var _$props2 = this.$props,\n        height = _$props2.height,\n        width = _$props2.width,\n        elementType = _$props2.elementType;\n    var visible = this.visible;\n\n\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n    var elClasses = {\n      LazyLoad: true,\n      'is-visible': visible\n    };\n\n    return createElement(elementType, {\n      'class': elClasses,\n      style: elStyles\n    }, [visible ? children[0] : null]);\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}