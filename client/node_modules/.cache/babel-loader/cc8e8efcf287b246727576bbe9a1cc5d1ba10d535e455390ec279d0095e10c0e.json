{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from '../_util/vue-types';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { isWindow, buffer, isSamePoint, isSimilarValue, restoreFocus } from './util';\nimport { cloneElement } from '../_util/vnode.js';\nimport clonedeep from 'lodash/cloneDeep';\nimport { getSlot, getListeners } from '../_util/props-util';\nfunction getElement(func) {\n  if (typeof func !== 'function' || !func) return null;\n  return func();\n}\nfunction getPoint(point) {\n  if ((typeof point === 'undefined' ? 'undefined' : _typeof(point)) !== 'object' || !point) return null;\n  return point;\n}\nexport default {\n  props: {\n    childrenProps: PropTypes.object,\n    align: PropTypes.object.isRequired,\n    target: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).def(function () {\n      return window;\n    }),\n    monitorBufferTime: PropTypes.number.def(50),\n    monitorWindowResize: PropTypes.bool.def(false),\n    disabled: PropTypes.bool.def(false)\n  },\n  data: function data() {\n    this.aligned = false;\n    return {};\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      _this.prevProps = _extends({}, _this.$props);\n      var props = _this.$props;\n      // if parent ref not attached .... use document.getElementById\n      !_this.aligned && _this.forceAlign();\n      if (!props.disabled && props.monitorWindowResize) {\n        _this.startMonitorWindowResize();\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n    this.$nextTick(function () {\n      var prevProps = _this2.prevProps;\n      var props = _this2.$props;\n      var reAlign = false;\n      if (!props.disabled) {\n        var source = _this2.$el;\n        var sourceRect = source ? source.getBoundingClientRect() : null;\n        if (prevProps.disabled) {\n          reAlign = true;\n        } else {\n          var lastElement = getElement(prevProps.target);\n          var currentElement = getElement(props.target);\n          var lastPoint = getPoint(prevProps.target);\n          var currentPoint = getPoint(props.target);\n          if (isWindow(lastElement) && isWindow(currentElement)) {\n            // Skip if is window\n            reAlign = false;\n          } else if (lastElement !== currentElement ||\n          // Element change\n          lastElement && !currentElement && currentPoint ||\n          // Change from element to point\n          lastPoint && currentPoint && currentElement ||\n          // Change from point to element\n          currentPoint && !isSamePoint(lastPoint, currentPoint)) {\n            reAlign = true;\n          }\n\n          // If source element size changed\n          var preRect = _this2.sourceRect || {};\n          if (!reAlign && source && (!isSimilarValue(preRect.width, sourceRect.width) || !isSimilarValue(preRect.height, sourceRect.height))) {\n            reAlign = true;\n          }\n        }\n        _this2.sourceRect = sourceRect;\n      }\n      if (reAlign) {\n        _this2.forceAlign();\n      }\n      if (props.monitorWindowResize && !props.disabled) {\n        _this2.startMonitorWindowResize();\n      } else {\n        _this2.stopMonitorWindowResize();\n      }\n      _this2.prevProps = _extends({}, _this2.$props, {\n        align: clonedeep(_this2.$props.align)\n      });\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopMonitorWindowResize();\n  },\n  methods: {\n    startMonitorWindowResize: function startMonitorWindowResize() {\n      if (!this.resizeHandler) {\n        this.bufferMonitor = buffer(this.forceAlign, this.$props.monitorBufferTime);\n        this.resizeHandler = addEventListener(window, 'resize', this.bufferMonitor);\n      }\n    },\n    stopMonitorWindowResize: function stopMonitorWindowResize() {\n      if (this.resizeHandler) {\n        this.bufferMonitor.clear();\n        this.resizeHandler.remove();\n        this.resizeHandler = null;\n      }\n    },\n    forceAlign: function forceAlign() {\n      var _$props = this.$props,\n        disabled = _$props.disabled,\n        target = _$props.target,\n        align = _$props.align;\n      if (!disabled && target) {\n        var source = this.$el;\n        var listeners = getListeners(this);\n        var result = void 0;\n        var element = getElement(target);\n        var point = getPoint(target);\n\n        // IE lose focus after element realign\n        // We should record activeElement and restore later\n        var activeElement = document.activeElement;\n        if (element) {\n          result = alignElement(source, element, align);\n        } else if (point) {\n          result = alignPoint(source, point, align);\n        }\n        restoreFocus(activeElement, source);\n        this.aligned = true;\n        listeners.align && listeners.align(source, result);\n      }\n    }\n  },\n  render: function render() {\n    var childrenProps = this.$props.childrenProps;\n    var child = getSlot(this)[0];\n    if (child && childrenProps) {\n      return cloneElement(child, {\n        props: childrenProps\n      });\n    }\n    return child;\n  }\n};","map":{"version":3,"names":["_extends","_typeof","PropTypes","alignElement","alignPoint","addEventListener","isWindow","buffer","isSamePoint","isSimilarValue","restoreFocus","cloneElement","clonedeep","getSlot","getListeners","getElement","func","getPoint","point","props","childrenProps","object","align","isRequired","target","oneOfType","def","window","monitorBufferTime","number","monitorWindowResize","bool","disabled","data","aligned","mounted","_this","$nextTick","prevProps","$props","forceAlign","startMonitorWindowResize","updated","_this2","reAlign","source","$el","sourceRect","getBoundingClientRect","lastElement","currentElement","lastPoint","currentPoint","preRect","width","height","stopMonitorWindowResize","beforeDestroy","methods","resizeHandler","bufferMonitor","clear","remove","_$props","listeners","result","element","activeElement","document","render","child"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/client/node_modules/ant-design-vue/es/vc-align/Align.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from '../_util/vue-types';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { isWindow, buffer, isSamePoint, isSimilarValue, restoreFocus } from './util';\nimport { cloneElement } from '../_util/vnode.js';\nimport clonedeep from 'lodash/cloneDeep';\nimport { getSlot, getListeners } from '../_util/props-util';\n\nfunction getElement(func) {\n  if (typeof func !== 'function' || !func) return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if ((typeof point === 'undefined' ? 'undefined' : _typeof(point)) !== 'object' || !point) return null;\n  return point;\n}\n\nexport default {\n  props: {\n    childrenProps: PropTypes.object,\n    align: PropTypes.object.isRequired,\n    target: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).def(function () {\n      return window;\n    }),\n    monitorBufferTime: PropTypes.number.def(50),\n    monitorWindowResize: PropTypes.bool.def(false),\n    disabled: PropTypes.bool.def(false)\n  },\n  data: function data() {\n    this.aligned = false;\n    return {};\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.prevProps = _extends({}, _this.$props);\n      var props = _this.$props;\n      // if parent ref not attached .... use document.getElementById\n      !_this.aligned && _this.forceAlign();\n      if (!props.disabled && props.monitorWindowResize) {\n        _this.startMonitorWindowResize();\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      var prevProps = _this2.prevProps;\n      var props = _this2.$props;\n      var reAlign = false;\n      if (!props.disabled) {\n        var source = _this2.$el;\n        var sourceRect = source ? source.getBoundingClientRect() : null;\n\n        if (prevProps.disabled) {\n          reAlign = true;\n        } else {\n          var lastElement = getElement(prevProps.target);\n          var currentElement = getElement(props.target);\n          var lastPoint = getPoint(prevProps.target);\n          var currentPoint = getPoint(props.target);\n          if (isWindow(lastElement) && isWindow(currentElement)) {\n            // Skip if is window\n            reAlign = false;\n          } else if (lastElement !== currentElement || // Element change\n          lastElement && !currentElement && currentPoint || // Change from element to point\n          lastPoint && currentPoint && currentElement || // Change from point to element\n          currentPoint && !isSamePoint(lastPoint, currentPoint)) {\n            reAlign = true;\n          }\n\n          // If source element size changed\n          var preRect = _this2.sourceRect || {};\n          if (!reAlign && source && (!isSimilarValue(preRect.width, sourceRect.width) || !isSimilarValue(preRect.height, sourceRect.height))) {\n            reAlign = true;\n          }\n        }\n        _this2.sourceRect = sourceRect;\n      }\n\n      if (reAlign) {\n        _this2.forceAlign();\n      }\n\n      if (props.monitorWindowResize && !props.disabled) {\n        _this2.startMonitorWindowResize();\n      } else {\n        _this2.stopMonitorWindowResize();\n      }\n      _this2.prevProps = _extends({}, _this2.$props, { align: clonedeep(_this2.$props.align) });\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.stopMonitorWindowResize();\n  },\n\n  methods: {\n    startMonitorWindowResize: function startMonitorWindowResize() {\n      if (!this.resizeHandler) {\n        this.bufferMonitor = buffer(this.forceAlign, this.$props.monitorBufferTime);\n        this.resizeHandler = addEventListener(window, 'resize', this.bufferMonitor);\n      }\n    },\n    stopMonitorWindowResize: function stopMonitorWindowResize() {\n      if (this.resizeHandler) {\n        this.bufferMonitor.clear();\n        this.resizeHandler.remove();\n        this.resizeHandler = null;\n      }\n    },\n    forceAlign: function forceAlign() {\n      var _$props = this.$props,\n          disabled = _$props.disabled,\n          target = _$props.target,\n          align = _$props.align;\n\n      if (!disabled && target) {\n        var source = this.$el;\n        var listeners = getListeners(this);\n        var result = void 0;\n        var element = getElement(target);\n        var point = getPoint(target);\n\n        // IE lose focus after element realign\n        // We should record activeElement and restore later\n        var activeElement = document.activeElement;\n\n        if (element) {\n          result = alignElement(source, element, align);\n        } else if (point) {\n          result = alignPoint(source, point, align);\n        }\n        restoreFocus(activeElement, source);\n        this.aligned = true;\n        listeners.align && listeners.align(source, result);\n      }\n    }\n  },\n\n  render: function render() {\n    var childrenProps = this.$props.childrenProps;\n\n    var child = getSlot(this)[0];\n    if (child && childrenProps) {\n      return cloneElement(child, { props: childrenProps });\n    }\n    return child;\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}