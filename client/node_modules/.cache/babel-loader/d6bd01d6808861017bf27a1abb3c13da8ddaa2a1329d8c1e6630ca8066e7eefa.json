{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { onMounted, getCurrentInstance, watch, onBeforeUnmount, ref, nextTick, defineComponent, withDirectives } from 'vue';\nimport ResizeObserver from '../vc-resize-observer';\nimport classNames from '../_util/classNames';\nimport calculateNodeHeight from './calculateNodeHeight';\nimport raf from '../_util/raf';\nimport warning from '../_util/warning';\nimport antInput from '../_util/antInputDirective';\nimport omit from '../_util/omit';\nimport { textAreaProps } from './inputProps';\nconst RESIZE_STATUS_NONE = 0;\nconst RESIZE_STATUS_RESIZING = 1;\nconst RESIZE_STATUS_RESIZED = 2;\nconst ResizableTextArea = defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'ResizableTextArea',\n  inheritAttrs: false,\n  props: textAreaProps(),\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      expose\n    } = _ref;\n    let nextFrameActionId;\n    let resizeFrameId;\n    const textAreaRef = ref();\n    const textareaStyles = ref({});\n    const resizeStatus = ref(RESIZE_STATUS_NONE);\n    onBeforeUnmount(() => {\n      raf.cancel(nextFrameActionId);\n      raf.cancel(resizeFrameId);\n    });\n    // https://github.com/ant-design/ant-design/issues/21870\n    const fixFirefoxAutoScroll = () => {\n      try {\n        if (document.activeElement === textAreaRef.value) {\n          const currentStart = textAreaRef.value.selectionStart;\n          const currentEnd = textAreaRef.value.selectionEnd;\n          textAreaRef.value.setSelectionRange(currentStart, currentEnd);\n        }\n      } catch (e) {\n        // Fix error in Chrome:\n        // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n        // http://stackoverflow.com/q/21177489/3040605\n      }\n    };\n    const resizeTextarea = () => {\n      const autoSize = props.autoSize || props.autosize;\n      if (!autoSize || !textAreaRef.value) {\n        return;\n      }\n      const {\n        minRows,\n        maxRows\n      } = autoSize;\n      textareaStyles.value = calculateNodeHeight(textAreaRef.value, false, minRows, maxRows);\n      resizeStatus.value = RESIZE_STATUS_RESIZING;\n      raf.cancel(resizeFrameId);\n      resizeFrameId = raf(() => {\n        resizeStatus.value = RESIZE_STATUS_RESIZED;\n        resizeFrameId = raf(() => {\n          resizeStatus.value = RESIZE_STATUS_NONE;\n          fixFirefoxAutoScroll();\n        });\n      });\n    };\n    const resizeOnNextFrame = () => {\n      raf.cancel(nextFrameActionId);\n      nextFrameActionId = raf(resizeTextarea);\n    };\n    const handleResize = size => {\n      if (resizeStatus.value !== RESIZE_STATUS_NONE) {\n        return;\n      }\n      emit('resize', size);\n      const autoSize = props.autoSize || props.autosize;\n      if (autoSize) {\n        resizeOnNextFrame();\n      }\n    };\n    warning(props.autosize === undefined, 'Input.TextArea', 'autosize is deprecated, please use autoSize instead.');\n    const renderTextArea = () => {\n      const {\n        prefixCls,\n        autoSize,\n        autosize,\n        disabled\n      } = props;\n      const otherProps = omit(props, ['prefixCls', 'onPressEnter', 'autoSize', 'autosize', 'defaultValue', 'allowClear', 'type', 'lazy', 'maxlength', 'valueModifiers']);\n      const cls = classNames(prefixCls, attrs.class, {\n        [`${prefixCls}-disabled`]: disabled\n      });\n      const style = [attrs.style, textareaStyles.value, resizeStatus.value === RESIZE_STATUS_RESIZING ? {\n        overflowX: 'hidden',\n        overflowY: 'hidden'\n      } : null];\n      const textareaProps = _extends(_extends(_extends({}, otherProps), attrs), {\n        style,\n        class: cls\n      });\n      if (!textareaProps.autofocus) {\n        delete textareaProps.autofocus;\n      }\n      if (textareaProps.rows === 0) {\n        delete textareaProps.rows;\n      }\n      return _createVNode(ResizeObserver, {\n        \"onResize\": handleResize,\n        \"disabled\": !(autoSize || autosize)\n      }, {\n        default: () => [withDirectives(_createVNode(\"textarea\", _objectSpread(_objectSpread({}, textareaProps), {}, {\n          \"ref\": textAreaRef\n        }), null), [[antInput]])]\n      });\n    };\n    watch(() => props.value, () => {\n      nextTick(() => {\n        resizeTextarea();\n      });\n    });\n    onMounted(() => {\n      nextTick(() => {\n        resizeTextarea();\n      });\n    });\n    const instance = getCurrentInstance();\n    expose({\n      resizeTextarea,\n      textArea: textAreaRef,\n      instance\n    });\n    return () => {\n      return renderTextArea();\n    };\n  }\n});\nexport default ResizableTextArea;","map":{"version":3,"names":["_objectSpread","_extends","createVNode","_createVNode","onMounted","getCurrentInstance","watch","onBeforeUnmount","ref","nextTick","defineComponent","withDirectives","ResizeObserver","classNames","calculateNodeHeight","raf","warning","antInput","omit","textAreaProps","RESIZE_STATUS_NONE","RESIZE_STATUS_RESIZING","RESIZE_STATUS_RESIZED","ResizableTextArea","compatConfig","MODE","name","inheritAttrs","props","setup","_ref","attrs","emit","expose","nextFrameActionId","resizeFrameId","textAreaRef","textareaStyles","resizeStatus","cancel","fixFirefoxAutoScroll","document","activeElement","value","currentStart","selectionStart","currentEnd","selectionEnd","setSelectionRange","e","resizeTextarea","autoSize","autosize","minRows","maxRows","resizeOnNextFrame","handleResize","size","undefined","renderTextArea","prefixCls","disabled","otherProps","cls","class","style","overflowX","overflowY","textareaProps","autofocus","rows","default","instance","textArea"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/input/ResizableTextArea.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { onMounted, getCurrentInstance, watch, onBeforeUnmount, ref, nextTick, defineComponent, withDirectives } from 'vue';\nimport ResizeObserver from '../vc-resize-observer';\nimport classNames from '../_util/classNames';\nimport calculateNodeHeight from './calculateNodeHeight';\nimport raf from '../_util/raf';\nimport warning from '../_util/warning';\nimport antInput from '../_util/antInputDirective';\nimport omit from '../_util/omit';\nimport { textAreaProps } from './inputProps';\nconst RESIZE_STATUS_NONE = 0;\nconst RESIZE_STATUS_RESIZING = 1;\nconst RESIZE_STATUS_RESIZED = 2;\nconst ResizableTextArea = defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'ResizableTextArea',\n  inheritAttrs: false,\n  props: textAreaProps(),\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      expose\n    } = _ref;\n    let nextFrameActionId;\n    let resizeFrameId;\n    const textAreaRef = ref();\n    const textareaStyles = ref({});\n    const resizeStatus = ref(RESIZE_STATUS_NONE);\n    onBeforeUnmount(() => {\n      raf.cancel(nextFrameActionId);\n      raf.cancel(resizeFrameId);\n    });\n    // https://github.com/ant-design/ant-design/issues/21870\n    const fixFirefoxAutoScroll = () => {\n      try {\n        if (document.activeElement === textAreaRef.value) {\n          const currentStart = textAreaRef.value.selectionStart;\n          const currentEnd = textAreaRef.value.selectionEnd;\n          textAreaRef.value.setSelectionRange(currentStart, currentEnd);\n        }\n      } catch (e) {\n        // Fix error in Chrome:\n        // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n        // http://stackoverflow.com/q/21177489/3040605\n      }\n    };\n    const resizeTextarea = () => {\n      const autoSize = props.autoSize || props.autosize;\n      if (!autoSize || !textAreaRef.value) {\n        return;\n      }\n      const {\n        minRows,\n        maxRows\n      } = autoSize;\n      textareaStyles.value = calculateNodeHeight(textAreaRef.value, false, minRows, maxRows);\n      resizeStatus.value = RESIZE_STATUS_RESIZING;\n      raf.cancel(resizeFrameId);\n      resizeFrameId = raf(() => {\n        resizeStatus.value = RESIZE_STATUS_RESIZED;\n        resizeFrameId = raf(() => {\n          resizeStatus.value = RESIZE_STATUS_NONE;\n          fixFirefoxAutoScroll();\n        });\n      });\n    };\n    const resizeOnNextFrame = () => {\n      raf.cancel(nextFrameActionId);\n      nextFrameActionId = raf(resizeTextarea);\n    };\n    const handleResize = size => {\n      if (resizeStatus.value !== RESIZE_STATUS_NONE) {\n        return;\n      }\n      emit('resize', size);\n      const autoSize = props.autoSize || props.autosize;\n      if (autoSize) {\n        resizeOnNextFrame();\n      }\n    };\n    warning(props.autosize === undefined, 'Input.TextArea', 'autosize is deprecated, please use autoSize instead.');\n    const renderTextArea = () => {\n      const {\n        prefixCls,\n        autoSize,\n        autosize,\n        disabled\n      } = props;\n      const otherProps = omit(props, ['prefixCls', 'onPressEnter', 'autoSize', 'autosize', 'defaultValue', 'allowClear', 'type', 'lazy', 'maxlength', 'valueModifiers']);\n      const cls = classNames(prefixCls, attrs.class, {\n        [`${prefixCls}-disabled`]: disabled\n      });\n      const style = [attrs.style, textareaStyles.value, resizeStatus.value === RESIZE_STATUS_RESIZING ? {\n        overflowX: 'hidden',\n        overflowY: 'hidden'\n      } : null];\n      const textareaProps = _extends(_extends(_extends({}, otherProps), attrs), {\n        style,\n        class: cls\n      });\n      if (!textareaProps.autofocus) {\n        delete textareaProps.autofocus;\n      }\n      if (textareaProps.rows === 0) {\n        delete textareaProps.rows;\n      }\n      return _createVNode(ResizeObserver, {\n        \"onResize\": handleResize,\n        \"disabled\": !(autoSize || autosize)\n      }, {\n        default: () => [withDirectives(_createVNode(\"textarea\", _objectSpread(_objectSpread({}, textareaProps), {}, {\n          \"ref\": textAreaRef\n        }), null), [[antInput]])]\n      });\n    };\n    watch(() => props.value, () => {\n      nextTick(() => {\n        resizeTextarea();\n      });\n    });\n    onMounted(() => {\n      nextTick(() => {\n        resizeTextarea();\n      });\n    });\n    const instance = getCurrentInstance();\n    expose({\n      resizeTextarea,\n      textArea: textAreaRef,\n      instance\n    });\n    return () => {\n      return renderTextArea();\n    };\n  }\n});\nexport default ResizableTextArea;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}