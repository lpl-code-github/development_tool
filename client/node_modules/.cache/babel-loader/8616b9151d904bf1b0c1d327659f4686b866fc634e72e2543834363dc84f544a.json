{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport zhCN from 'ant-design-vue/es/locale/zh_CN'; //引入antd中文包\nimport moment from 'moment';\n//引入moment\nmoment.locale('zh-cn'); //配置moment中文环境\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      locale: zhCN,\n      //传值给a-config-provider组件\n      logData: [],\n      calendarData: null\n    };\n  },\n  watch: {\n    calendarData: {\n      handler: function (newVal, oldVal) {\n        console.log(newValmoment.format('YYYY-MM-DD'));\n        this.getLogs(newVal);\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  async created() {\n    await this.getLogs(new moment());\n  },\n  methods: {\n    getListData(value) {\n      let listData = [];\n      this.logData.forEach(item => {\n        if (item.created_at.split(\" \")[0] === value.format('YYYY-MM-DD')) {\n          listData.push({\n            type: item.status === 'failure' ? 'warning' : \"success\",\n            content: item.name\n          });\n        }\n      });\n      return listData || [];\n    },\n    getPanelChange(moment) {\n      this.getLogs(moment);\n    },\n    getStartDate(moment) {\n      var m = moment;\n      return m.startOf('month').subtract(1, 'month').format('YYYY-MM-DD');\n    },\n    getEndDate(moment) {\n      var m = moment;\n      return moment.endOf('month').add(2, 'month').format('YYYY-MM-DD');\n    },\n    getLogs(moment) {\n      var startDate = this.getStartDate(moment);\n      var endDate = this.getEndDate(moment);\n      var param = \"?start=\" + startDate + \"&target=\" + endDate;\n      this.$request.getLog(param).then(res => {\n        this.logData = res.data.data;\n      });\n    },\n    onSelect(value) {\n      const date = moment(value);\n      const formattedDate = date.format('YYYY-MM-DD');\n      var param = \"?created_at=\" + formattedDate;\n      this.$request.getLog(param).then(res => {});\n    }\n  }\n};","map":{"version":3,"names":["zhCN","moment","locale","name","data","logData","calendarData","watch","handler","newVal","oldVal","console","log","newValmoment","format","getLogs","deep","created","methods","getListData","value","listData","forEach","item","created_at","split","push","type","status","content","getPanelChange","getStartDate","m","startOf","subtract","getEndDate","endOf","add","startDate","endDate","param","$request","getLog","then","res","onSelect","date","formattedDate"],"sources":["src/Index.vue"],"sourcesContent":["<template>\n  <div class=\"index\">\n    <a-calendar :locale=\"locale\" @select=\"onSelect\"  v-model=\"calendarData\">\n      <ul slot=\"dateCellRender\" slot-scope=\"value\" class=\"events\" >\n        <li v-for=\"(item,index) in getListData(value)\" :key=\"index\">\n          <a-badge :status=\"item.type\" :text=\"item.content\" />\n        </li>\n      </ul>\n    </a-calendar>\n  </div>\n</template>\n\n<script>\nimport zhCN from 'ant-design-vue/es/locale/zh_CN';//引入antd中文包\nimport moment from 'moment';\n//引入moment\nmoment.locale('zh-cn');//配置moment中文环境\nexport default {\n  name: \"Index\",\n  data(){\n    return{\n      locale:zhCN,//传值给a-config-provider组件\n      logData:[],\n      calendarData:null\n    }\n  },\n  watch: {\n    calendarData: {\n      handler: function (newVal,oldVal) {\n        console.log(newValmoment.format('YYYY-MM-DD'))\n        this.getLogs(newVal)\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  async created() {\n    await this.getLogs(new moment())\n  },\n  methods: {\n    getListData(value) {\n      let listData = [];\n      this.logData.forEach(item=>{\n        if (item.created_at.split(\" \")[0] === value.format('YYYY-MM-DD')){\n          listData.push({ type: item.status === 'failure' ? 'warning' : \"success\", content: item.name })\n        }\n      })\n      return listData || [];\n    },\n\n    getPanelChange(moment){\n      this.getLogs(moment)\n    },\n    getStartDate(moment){\n      var m = moment\n      return m.startOf('month').subtract(1, 'month').format('YYYY-MM-DD');\n    },\n    getEndDate(moment){\n      var m = moment\n      return moment.endOf('month').add(2, 'month').format('YYYY-MM-DD');\n    },\n    getLogs(moment){\n      var startDate = this.getStartDate(moment);\n      var endDate = this.getEndDate(moment);\n      var param = \"?start=\"+startDate+\"&target=\"+endDate\n      this.$request.getLog(param).then(res=>{\n        this.logData = res.data.data\n      })\n    },\n    onSelect(value) {\n      const date = moment(value);\n      const formattedDate = date.format('YYYY-MM-DD');\n      var param = \"?created_at=\"+formattedDate\n      this.$request.getLog(param).then(res=>{\n\n      })\n\n    },\n\n  },\n}\n</script>\n\n<style scoped>\n.events {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.events .ant-badge-status {\n  overflow: hidden;\n  white-space: nowrap;\n  width: 100%;\n  text-overflow: ellipsis;\n  font-size: 12px;\n}\n.notes-month {\n  text-align: center;\n  font-size: 28px;\n}\n.notes-month section {\n  font-size: 28px;\n}\n/deep/ .ant-radio-group {\n  display: none!important;\n}\n\n</style>\n"],"mappings":";AAaA,OAAAA,IAAA;AACA,OAAAC,MAAA;AACA;AACAA,MAAA,CAAAC,MAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAF,MAAA,EAAAF,IAAA;MAAA;MACAK,OAAA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACAD,YAAA;MACAE,OAAA,WAAAA,CAAAC,MAAA,EAAAC,MAAA;QACAC,OAAA,CAAAC,GAAA,CAAAC,YAAA,CAAAC,MAAA;QACA,KAAAC,OAAA,CAAAN,MAAA;MACA;MACA;MACAO,IAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,WAAAF,OAAA,KAAAd,MAAA;EACA;EACAiB,OAAA;IACAC,YAAAC,KAAA;MACA,IAAAC,QAAA;MACA,KAAAhB,OAAA,CAAAiB,OAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,UAAA,CAAAC,KAAA,aAAAL,KAAA,CAAAN,MAAA;UACAO,QAAA,CAAAK,IAAA;YAAAC,IAAA,EAAAJ,IAAA,CAAAK,MAAA;YAAAC,OAAA,EAAAN,IAAA,CAAApB;UAAA;QACA;MACA;MACA,OAAAkB,QAAA;IACA;IAEAS,eAAA7B,MAAA;MACA,KAAAc,OAAA,CAAAd,MAAA;IACA;IACA8B,aAAA9B,MAAA;MACA,IAAA+B,CAAA,GAAA/B,MAAA;MACA,OAAA+B,CAAA,CAAAC,OAAA,UAAAC,QAAA,aAAApB,MAAA;IACA;IACAqB,WAAAlC,MAAA;MACA,IAAA+B,CAAA,GAAA/B,MAAA;MACA,OAAAA,MAAA,CAAAmC,KAAA,UAAAC,GAAA,aAAAvB,MAAA;IACA;IACAC,QAAAd,MAAA;MACA,IAAAqC,SAAA,QAAAP,YAAA,CAAA9B,MAAA;MACA,IAAAsC,OAAA,QAAAJ,UAAA,CAAAlC,MAAA;MACA,IAAAuC,KAAA,eAAAF,SAAA,gBAAAC,OAAA;MACA,KAAAE,QAAA,CAAAC,MAAA,CAAAF,KAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,KAAAvC,OAAA,GAAAuC,GAAA,CAAAxC,IAAA,CAAAA,IAAA;MACA;IACA;IACAyC,SAAAzB,KAAA;MACA,MAAA0B,IAAA,GAAA7C,MAAA,CAAAmB,KAAA;MACA,MAAA2B,aAAA,GAAAD,IAAA,CAAAhC,MAAA;MACA,IAAA0B,KAAA,oBAAAO,aAAA;MACA,KAAAN,QAAA,CAAAC,MAAA,CAAAF,KAAA,EAAAG,IAAA,CAAAC,GAAA,KAEA;IAEA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}