{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\n\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\nvar SearchInput = {\n  name: 'SearchInput',\n  props: {\n    open: PropTypes.bool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.bool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.bool,\n    ariaId: PropTypes.string\n  },\n  inject: {\n    vcTreeSelect: {\n      'default': function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      mirrorSearchValue: this.searchValue\n    };\n  },\n  watch: {\n    searchValue: function searchValue(val) {\n      this.mirrorSearchValue = val;\n    }\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.mirrorInputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n        open = _$props.open,\n        needAlign = _$props.needAlign;\n      if (needAlign) {\n        _this.alignInputWidth();\n      }\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n    var _$props2 = this.$props,\n      open = _$props2.open,\n      searchValue = _$props2.searchValue,\n      needAlign = _$props2.needAlign;\n    var prevProps = this.prevProps;\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n      if (needAlign && searchValue !== prevProps.searchValue) {\n        _this2.alignInputWidth();\n      }\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n  methods: {\n    /**\n     * `scrollWidth` is not correct in IE, do the workaround.\n     * ref: https://github.com/react-component/tree-select/issues/65\n     *  clientWidth 0 when mounted in vue. why?\n     */\n    alignInputWidth: function alignInputWidth() {\n      this.inputRef.current.style.width = (this.mirrorInputRef.current.clientWidth || this.mirrorInputRef.current.offsetWidth) + 'px';\n    },\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n        value = _e$target.value,\n        composing = _e$target.composing;\n      var _searchValue = this.searchValue,\n        searchValue = _searchValue === undefined ? '' : _searchValue;\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var _$props3 = this.$props,\n      searchValue = _$props3.searchValue,\n      prefixCls = _$props3.prefixCls,\n      disabled = _$props3.disabled,\n      renderPlaceholder = _$props3.renderPlaceholder,\n      open = _$props3.open,\n      ariaId = _$props3.ariaId;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n      handleInputChange = this.handleInputChange,\n      mirrorSearchValue = this.mirrorSearchValue;\n    return h('span', {\n      'class': prefixCls + '-search__field__wrap'\n    }, [h('input', _mergeJSXProps([{\n      attrs: {\n        type: 'text'\n      }\n    }, {\n      directives: [{\n        name: 'ant-ref',\n        value: this.inputRef\n      }, {\n        name: 'ant-input'\n      }]\n    }, {\n      on: {\n        'input': handleInputChange,\n        'keydown': onSearchInputKeyDown\n      },\n      domProps: {\n        'value': searchValue\n      },\n      attrs: {\n        disabled: disabled,\n        'aria-label': 'filter select',\n        'aria-autocomplete': 'list',\n        'aria-controls': open ? ariaId : undefined,\n        'aria-multiline': 'false'\n      },\n      'class': prefixCls + '-search__field'\n    }])), h('span', _mergeJSXProps([{\n      directives: [{\n        name: 'ant-ref',\n        value: this.mirrorInputRef\n      }]\n    }, {\n      'class': prefixCls + '-search__field__mirror'\n    }]), [mirrorSearchValue, '\\xA0']), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]);\n  }\n};\nexport default SearchInput;","map":{"version":3,"names":["_mergeJSXProps","_extends","PropTypes","createRef","SearchInput","name","props","open","bool","searchValue","string","prefixCls","disabled","renderPlaceholder","func","needAlign","ariaId","inject","vcTreeSelect","_default","data","mirrorSearchValue","watch","val","created","inputRef","mirrorInputRef","prevProps","$props","mounted","_this","$nextTick","_$props","alignInputWidth","focus","updated","_this2","_$props2","methods","current","style","width","clientWidth","offsetWidth","isDidMount","_this3","setTimeout","blur","handleInputChange","e","_e$target","target","value","composing","_searchValue","undefined","isComposing","onSearchInputChange","render","h","arguments","_$props3","onSearchInputKeyDown","attrs","type","directives","on","domProps"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/client/node_modules/ant-design-vue/es/vc-tree-select/src/SearchInput.js"],"sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _extends from 'babel-runtime/helpers/extends';\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\n\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\n\nvar SearchInput = {\n  name: 'SearchInput',\n  props: {\n    open: PropTypes.bool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.bool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.bool,\n    ariaId: PropTypes.string\n  },\n  inject: {\n    vcTreeSelect: { 'default': function _default() {\n        return {};\n      } }\n  },\n  data: function data() {\n    return {\n      mirrorSearchValue: this.searchValue\n    };\n  },\n\n  watch: {\n    searchValue: function searchValue(val) {\n      this.mirrorSearchValue = val;\n    }\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.mirrorInputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var _$props = _this.$props,\n          open = _$props.open,\n          needAlign = _$props.needAlign;\n\n      if (needAlign) {\n        _this.alignInputWidth();\n      }\n\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var _$props2 = this.$props,\n        open = _$props2.open,\n        searchValue = _$props2.searchValue,\n        needAlign = _$props2.needAlign;\n    var prevProps = this.prevProps;\n\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n      if (needAlign && searchValue !== prevProps.searchValue) {\n        _this2.alignInputWidth();\n      }\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n\n  methods: {\n    /**\n     * `scrollWidth` is not correct in IE, do the workaround.\n     * ref: https://github.com/react-component/tree-select/issues/65\n     *  clientWidth 0 when mounted in vue. why?\n     */\n    alignInputWidth: function alignInputWidth() {\n      this.inputRef.current.style.width = (this.mirrorInputRef.current.clientWidth || this.mirrorInputRef.current.offsetWidth) + 'px';\n    },\n\n\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      var _searchValue = this.searchValue,\n          searchValue = _searchValue === undefined ? '' : _searchValue;\n\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var _$props3 = this.$props,\n        searchValue = _$props3.searchValue,\n        prefixCls = _$props3.prefixCls,\n        disabled = _$props3.disabled,\n        renderPlaceholder = _$props3.renderPlaceholder,\n        open = _$props3.open,\n        ariaId = _$props3.ariaId;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n        handleInputChange = this.handleInputChange,\n        mirrorSearchValue = this.mirrorSearchValue;\n\n    return h(\n      'span',\n      { 'class': prefixCls + '-search__field__wrap' },\n      [h('input', _mergeJSXProps([{\n        attrs: {\n          type: 'text'\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.inputRef\n        }, {\n          name: 'ant-input'\n        }]\n      }, {\n        on: {\n          'input': handleInputChange,\n          'keydown': onSearchInputKeyDown\n        },\n        domProps: {\n          'value': searchValue\n        },\n        attrs: {\n          disabled: disabled,\n\n          'aria-label': 'filter select',\n          'aria-autocomplete': 'list',\n          'aria-controls': open ? ariaId : undefined,\n          'aria-multiline': 'false'\n        },\n        'class': prefixCls + '-search__field' }])), h(\n        'span',\n        _mergeJSXProps([{\n          directives: [{\n            name: 'ant-ref',\n            value: this.mirrorInputRef\n          }]\n        }, {\n          'class': prefixCls + '-search__field__mirror'\n        }]),\n        [mirrorSearchValue, '\\xA0']\n      ), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]\n    );\n  }\n};\n\nexport default SearchInput;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}