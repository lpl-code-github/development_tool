{"ast":null,"code":"import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from './vue-types';\nimport _switchScrollingEffect from './switchScrollingEffect';\nimport setStyle from './setStyle';\nimport Portal from './Portal';\nvar openCount = 0;\nvar windowIsUndefined = !(typeof window !== 'undefined' && window.document && window.document.createElement);\n// https://github.com/ant-design/ant-design/issues/19340\n// https://github.com/ant-design/ant-design/issues/19332\nvar cacheOverflow = {};\nexport default {\n  name: 'PortalWrapper',\n  props: {\n    wrapperClassName: PropTypes.string,\n    forceRender: PropTypes.bool,\n    getContainer: PropTypes.any,\n    children: PropTypes.func,\n    visible: PropTypes.bool\n  },\n  data: function data() {\n    var visible = this.$props.visible;\n    openCount = visible ? openCount + 1 : openCount;\n    return {};\n  },\n  updated: function updated() {\n    this.setWrapperClassName();\n  },\n  watch: {\n    visible: function visible(val) {\n      openCount = val ? openCount + 1 : openCount - 1;\n    },\n    getContainer: function getContainer(_getContainer, prevGetContainer) {\n      var getContainerIsFunc = typeof _getContainer === 'function' && typeof prevGetContainer === 'function';\n      if (getContainerIsFunc ? _getContainer.toString() !== prevGetContainer.toString() : _getContainer !== prevGetContainer) {\n        this.removeCurrentContainer(false);\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var visible = this.$props.visible;\n    // 离开时不会 render， 导到离开时数值不变，改用 func 。。\n\n    openCount = visible && openCount ? openCount - 1 : openCount;\n    this.removeCurrentContainer(visible);\n  },\n  methods: {\n    getParent: function getParent() {\n      var getContainer = this.$props.getContainer;\n      if (getContainer) {\n        if (typeof getContainer === 'string') {\n          return document.querySelectorAll(getContainer)[0];\n        }\n        if (typeof getContainer === 'function') {\n          return getContainer();\n        }\n        if ((typeof getContainer === 'undefined' ? 'undefined' : _typeof(getContainer)) === 'object' && getContainer instanceof window.HTMLElement) {\n          return getContainer;\n        }\n      }\n      return document.body;\n    },\n    getDomContainer: function getDomContainer() {\n      if (windowIsUndefined) {\n        return null;\n      }\n      if (!this.container) {\n        this.container = document.createElement('div');\n        var parent = this.getParent();\n        if (parent) {\n          parent.appendChild(this.container);\n        }\n      }\n      this.setWrapperClassName();\n      return this.container;\n    },\n    setWrapperClassName: function setWrapperClassName() {\n      var wrapperClassName = this.$props.wrapperClassName;\n      if (this.container && wrapperClassName && wrapperClassName !== this.container.className) {\n        this.container.className = wrapperClassName;\n      }\n    },\n    savePortal: function savePortal(c) {\n      // Warning: don't rename _component\n      // https://github.com/react-component/util/pull/65#discussion_r352407916\n      this._component = c;\n    },\n    removeCurrentContainer: function removeCurrentContainer() {\n      this.container = null;\n      this._component = null;\n    },\n    /**\n     * Enhance ./switchScrollingEffect\n     * 1. Simulate document body scroll bar with\n     * 2. Record body has overflow style and recover when all of PortalWrapper invisible\n     * 3. Disable body scroll when PortalWrapper has open\n     *\n     * @memberof PortalWrapper\n     */\n    switchScrollingEffect: function switchScrollingEffect() {\n      if (openCount === 1 && !Object.keys(cacheOverflow).length) {\n        _switchScrollingEffect();\n        // Must be set after switchScrollingEffect\n        cacheOverflow = setStyle({\n          overflow: 'hidden',\n          overflowX: 'hidden',\n          overflowY: 'hidden'\n        });\n      } else if (!openCount) {\n        setStyle(cacheOverflow);\n        cacheOverflow = {};\n        _switchScrollingEffect(true);\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var _$props = this.$props,\n      children = _$props.children,\n      forceRender = _$props.forceRender,\n      visible = _$props.visible;\n    var portal = null;\n    var childProps = {\n      getOpenCount: function getOpenCount() {\n        return openCount;\n      },\n      getContainer: this.getDomContainer,\n      switchScrollingEffect: this.switchScrollingEffect\n    };\n    if (forceRender || visible || this._component) {\n      portal = h(Portal, _mergeJSXProps([{\n        attrs: {\n          getContainer: this.getDomContainer,\n          children: children(childProps)\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.savePortal\n        }]\n      }]));\n    }\n    return portal;\n  }\n};","map":{"version":3,"names":["_mergeJSXProps","_typeof","PropTypes","_switchScrollingEffect","setStyle","Portal","openCount","windowIsUndefined","window","document","createElement","cacheOverflow","name","props","wrapperClassName","string","forceRender","bool","getContainer","any","children","func","visible","data","$props","updated","setWrapperClassName","watch","val","_getContainer","prevGetContainer","getContainerIsFunc","toString","removeCurrentContainer","beforeDestroy","methods","getParent","querySelectorAll","HTMLElement","body","getDomContainer","container","parent","appendChild","className","savePortal","c","_component","switchScrollingEffect","Object","keys","length","overflow","overflowX","overflowY","render","h","arguments","_$props","portal","childProps","getOpenCount","attrs","directives","value"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/client/node_modules/ant-design-vue/es/_util/PortalWrapper.js"],"sourcesContent":["import _mergeJSXProps from 'babel-helper-vue-jsx-merge-props';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport PropTypes from './vue-types';\nimport _switchScrollingEffect from './switchScrollingEffect';\nimport setStyle from './setStyle';\nimport Portal from './Portal';\n\nvar openCount = 0;\nvar windowIsUndefined = !(typeof window !== 'undefined' && window.document && window.document.createElement);\n// https://github.com/ant-design/ant-design/issues/19340\n// https://github.com/ant-design/ant-design/issues/19332\nvar cacheOverflow = {};\n\nexport default {\n  name: 'PortalWrapper',\n  props: {\n    wrapperClassName: PropTypes.string,\n    forceRender: PropTypes.bool,\n    getContainer: PropTypes.any,\n    children: PropTypes.func,\n    visible: PropTypes.bool\n  },\n  data: function data() {\n    var visible = this.$props.visible;\n\n    openCount = visible ? openCount + 1 : openCount;\n    return {};\n  },\n  updated: function updated() {\n    this.setWrapperClassName();\n  },\n\n  watch: {\n    visible: function visible(val) {\n      openCount = val ? openCount + 1 : openCount - 1;\n    },\n    getContainer: function getContainer(_getContainer, prevGetContainer) {\n      var getContainerIsFunc = typeof _getContainer === 'function' && typeof prevGetContainer === 'function';\n      if (getContainerIsFunc ? _getContainer.toString() !== prevGetContainer.toString() : _getContainer !== prevGetContainer) {\n        this.removeCurrentContainer(false);\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    var visible = this.$props.visible;\n    // 离开时不会 render， 导到离开时数值不变，改用 func 。。\n\n    openCount = visible && openCount ? openCount - 1 : openCount;\n    this.removeCurrentContainer(visible);\n  },\n\n  methods: {\n    getParent: function getParent() {\n      var getContainer = this.$props.getContainer;\n\n      if (getContainer) {\n        if (typeof getContainer === 'string') {\n          return document.querySelectorAll(getContainer)[0];\n        }\n        if (typeof getContainer === 'function') {\n          return getContainer();\n        }\n        if ((typeof getContainer === 'undefined' ? 'undefined' : _typeof(getContainer)) === 'object' && getContainer instanceof window.HTMLElement) {\n          return getContainer;\n        }\n      }\n      return document.body;\n    },\n    getDomContainer: function getDomContainer() {\n      if (windowIsUndefined) {\n        return null;\n      }\n      if (!this.container) {\n        this.container = document.createElement('div');\n        var parent = this.getParent();\n        if (parent) {\n          parent.appendChild(this.container);\n        }\n      }\n      this.setWrapperClassName();\n      return this.container;\n    },\n    setWrapperClassName: function setWrapperClassName() {\n      var wrapperClassName = this.$props.wrapperClassName;\n\n      if (this.container && wrapperClassName && wrapperClassName !== this.container.className) {\n        this.container.className = wrapperClassName;\n      }\n    },\n    savePortal: function savePortal(c) {\n      // Warning: don't rename _component\n      // https://github.com/react-component/util/pull/65#discussion_r352407916\n      this._component = c;\n    },\n    removeCurrentContainer: function removeCurrentContainer() {\n      this.container = null;\n      this._component = null;\n    },\n\n\n    /**\n     * Enhance ./switchScrollingEffect\n     * 1. Simulate document body scroll bar with\n     * 2. Record body has overflow style and recover when all of PortalWrapper invisible\n     * 3. Disable body scroll when PortalWrapper has open\n     *\n     * @memberof PortalWrapper\n     */\n    switchScrollingEffect: function switchScrollingEffect() {\n      if (openCount === 1 && !Object.keys(cacheOverflow).length) {\n        _switchScrollingEffect();\n        // Must be set after switchScrollingEffect\n        cacheOverflow = setStyle({\n          overflow: 'hidden',\n          overflowX: 'hidden',\n          overflowY: 'hidden'\n        });\n      } else if (!openCount) {\n        setStyle(cacheOverflow);\n        cacheOverflow = {};\n        _switchScrollingEffect(true);\n      }\n    }\n  },\n\n  render: function render() {\n    var h = arguments[0];\n    var _$props = this.$props,\n        children = _$props.children,\n        forceRender = _$props.forceRender,\n        visible = _$props.visible;\n\n    var portal = null;\n    var childProps = {\n      getOpenCount: function getOpenCount() {\n        return openCount;\n      },\n      getContainer: this.getDomContainer,\n      switchScrollingEffect: this.switchScrollingEffect\n    };\n    if (forceRender || visible || this._component) {\n      portal = h(Portal, _mergeJSXProps([{\n        attrs: {\n          getContainer: this.getDomContainer,\n          children: children(childProps)\n        }\n      }, {\n        directives: [{\n          name: 'ant-ref',\n          value: this.savePortal\n        }]\n      }]));\n    }\n    return portal;\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}