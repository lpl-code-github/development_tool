{"ast":null,"code":"import clipboard from \"clipboard\";\nexport default {\n  props: {\n    codeText: {\n      type: String,\n      required: true\n    }\n  },\n  watch: {\n    codeText: {\n      handler: function (newVal, oldVal) {\n        console.log(newVal);\n        this.codeText = newVal;\n        this.updateSourceCode(newVal);\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  name: \"Code\",\n  data() {\n    return {\n      copySuccess: false\n    };\n  },\n  methods: {\n    updateSourceCode(code) {\n      this.codeText = code;\n    },\n    copyMessage() {\n      let _this = this;\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["clipboard","props","codeText","type","String","required","watch","handler","newVal","oldVal","console","log","updateSourceCode","deep","name","data","copySuccess","methods","code","copyMessage","_this","clipboardObj","on","e","$message","success","destroy","error"],"sources":["src/components/code/Code.vue"],"sourcesContent":["<template>\n  <div class=\"my-code\">\n\n     <pre v-highlight style=\"margin: 0!important;\">\n       <!-- 复制按钮 -->\n        \n        <code style=\"height: 60vh\" class=\"lang-javascript\" v-text=\"codeText\"></code>\n    </pre>\n  </div>\n</template>\n\n<script>\nimport clipboard from \"clipboard\";\nexport default {\n  props:{\n    codeText: {\n      type: String,\n      required: true\n    },\n  },\n  watch:{\n    codeText:{\n      handler: function (newVal,oldVal) {\n        console.log(newVal)\n        this.codeText = newVal\n        this.updateSourceCode(newVal)\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  name: \"Code\",\n  data(){\n    return{\n      copySuccess: false,\n    }\n  },\n  methods:{\n    updateSourceCode(code) {\n      this.codeText = code\n    },\n    copyMessage() {\n      let _this = this;\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-code{\n  margin-top: -20px!important;\n  overflow-y: visible;\n}\n</style>\n"],"mappings":"AAYA,OAAAA,SAAA;AACA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACAJ,QAAA;MACAK,OAAA,WAAAA,CAAAC,MAAA,EAAAC,MAAA;QACAC,OAAA,CAAAC,GAAA,CAAAH,MAAA;QACA,KAAAN,QAAA,GAAAM,MAAA;QACA,KAAAI,gBAAA,CAAAJ,MAAA;MACA;MACA;MACAK,IAAA;IACA;EACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;IACA;EACA;EACAC,OAAA;IACAL,iBAAAM,IAAA;MACA,KAAAhB,QAAA,GAAAgB,IAAA;IACA;IACAC,YAAA;MACA,IAAAC,KAAA;MACAA,KAAA,CAAAJ,WAAA;MACA,IAAAK,YAAA,OAAArB,SAAA;MACAqB,YAAA,CAAAC,EAAA,sBAAAC,CAAA;QACAH,KAAA,CAAAJ,WAAA;QACAI,KAAA,CAAAI,QAAA,CAAAC,OAAA;QACAJ,YAAA,CAAAK,OAAA;MACA;;MACAL,YAAA,CAAAC,EAAA;QACAF,KAAA,CAAAI,QAAA,CAAAG,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}