{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { onBeforeUnmount, shallowRef, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nconst StatusQueue = ['measure', 'align', null, 'motion'];\nexport default ((visible, doMeasure) => {\n  const status = shallowRef(null);\n  const rafRef = shallowRef();\n  const destroyRef = shallowRef(false);\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(() => {\n      // Only align should be manually trigger\n      let newStatus = status.value;\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n        case 'motion':\n          newStatus = 'stable';\n          break;\n        default:\n      }\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n  watch(visible, () => {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(() => {\n    // Go next status\n    watch(status, () => {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n        default:\n      }\n      if (status.value) {\n        rafRef.value = raf(() => __awaiter(void 0, void 0, void 0, function* () {\n          const index = StatusQueue.indexOf(status.value);\n          const nextStatus = StatusQueue[index + 1];\n          if (nextStatus && index !== -1) {\n            setStatus(nextStatus);\n          }\n        }));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(() => {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","onBeforeUnmount","shallowRef","watch","onMounted","raf","StatusQueue","visible","doMeasure","status","rafRef","destroyRef","setStatus","nextStatus","cancelRaf","cancel","goNextStatus","callback","newStatus","immediate","flush","index","indexOf"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/vc-trigger/Popup/useVisibleStatus.js"],"sourcesContent":["var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { onBeforeUnmount, shallowRef, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nconst StatusQueue = ['measure', 'align', null, 'motion'];\nexport default ((visible, doMeasure) => {\n  const status = shallowRef(null);\n  const rafRef = shallowRef();\n  const destroyRef = shallowRef(false);\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(() => {\n      // Only align should be manually trigger\n      let newStatus = status.value;\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n        case 'motion':\n          newStatus = 'stable';\n          break;\n        default:\n      }\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n  watch(visible, () => {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(() => {\n    // Go next status\n    watch(status, () => {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n        default:\n      }\n      if (status.value) {\n        rafRef.value = raf(() => __awaiter(void 0, void 0, void 0, function* () {\n          const index = StatusQueue.indexOf(status.value);\n          const nextStatus = StatusQueue[index + 1];\n          if (nextStatus && index !== -1) {\n            setStatus(nextStatus);\n          }\n        }));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(() => {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}