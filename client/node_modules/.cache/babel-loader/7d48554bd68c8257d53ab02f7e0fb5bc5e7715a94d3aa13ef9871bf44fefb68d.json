{"ast":null,"code":"// 引入axios\nimport axios from 'axios';\n\n// 顶部loading\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\n\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true;\n\n// ant design的notification组件\nimport notification from 'ant-design-vue/lib/notification';\n// 引入封装好的接口模块\nimport * as request from './request.js';\nimport * as url from \"url\";\n\n// 请求超时时间\naxios.defaults.timeout = 100000;\n\n// 代理接口 部署时应该换为后台实际地址\nconst service = axios.create({\n  baseURL: '/apis'\n});\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(config => {\n  console.log(config.url);\n  if (url !== '/functional/getSystemStatus') {}\n  // 加载顶部loading\n  NProgress.start();\n  return config;\n}, err => {\n  // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n  return Promise.reject(err);\n});\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(response => {\n  // 关闭顶部loading\n  NProgress.done();\n\n  // 返回响应体\n  return response;\n}, error => {\n  const {\n    data\n  } = error.response;\n  // duration代表notification设置了不关闭，因为有些报错信息内容中可能存在需要复制的场景\n  if (data.code === 404) {\n    notification.error({\n      message: '未找到',\n      description: error.response.data.message,\n      duration: null\n    });\n  } else {\n    notification.error({\n      message: '错误的请求',\n      description: error.response.data.message,\n      duration: null\n    });\n  }\n\n  // 关闭顶部loading\n  NProgress.done();\n  // 请求超时\n  if (error.message.indexOf('timeout') !== -1) {\n    notification.error({\n      message: '请求超时，请稍后再试'\n    });\n  }\n  return error;\n});\nexport { request, service };","map":{"version":3,"names":["axios","NProgress","defaults","withCredentials","notification","request","url","timeout","service","create","baseURL","interceptors","use","config","console","log","start","err","Promise","reject","response","done","error","data","code","message","description","duration","indexOf"],"sources":["/Users/lpl/Teamsupport/development_tool/client/src/api/index.js"],"sourcesContent":["// 引入axios\nimport axios from 'axios'\n\n// 顶部loading\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true\n\n// ant design的notification组件\nimport notification from 'ant-design-vue/lib/notification';\n// 引入封装好的接口模块\nimport * as request from './request.js'\nimport * as url from \"url\";\n\n// 请求超时时间\naxios.defaults.timeout = 100000\n\n// 代理接口 部署时应该换为后台实际地址\nconst service = axios.create({\n    baseURL: '/apis'\n})\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(\n    config => {\n        console.log(config.url)\n        if (url !== '/functional/getSystemStatus'){\n            \n        }\n        // 加载顶部loading\n        NProgress.start()\n        return config\n    },\n    err => {\n        // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n        return Promise.reject(err)\n    }\n)\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(\n    response => {\n        // 关闭顶部loading\n        NProgress.done()\n\n        // 返回响应体\n        return response\n    },\n    error => {\n        const { data } = error.response\n        // duration代表notification设置了不关闭，因为有些报错信息内容中可能存在需要复制的场景\n        if (data.code ===404){\n            notification.error({\n                message: '未找到',\n                description: error.response.data.message,\n                duration: null\n            });\n        }else {\n            notification.error({\n                message: '错误的请求',\n                description: error.response.data.message,\n                duration: null\n            });\n        }\n\n        // 关闭顶部loading\n        NProgress.done()\n        // 请求超时\n        if (error.message.indexOf('timeout') !== -1) {\n            notification.error({\n                message: '请求超时，请稍后再试'\n            });\n        }\n        return error\n    }\n)\n\nexport {\n    request,\n    service\n}\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAOC,SAAS,MAAM,WAAW;AACjC,OAAO,yBAAyB;;AAEhC;AACAD,KAAK,CAACE,QAAQ,CAACC,eAAe,GAAG,IAAI;;AAErC;AACA,OAAOC,YAAY,MAAM,iCAAiC;AAC1D;AACA,OAAO,KAAKC,OAAO,MAAM,cAAc;AACvC,OAAO,KAAKC,GAAG,MAAM,KAAK;;AAE1B;AACAN,KAAK,CAACE,QAAQ,CAACK,OAAO,GAAG,MAAM;;AAE/B;AACA,MAAMC,OAAO,GAAGR,KAAK,CAACS,MAAM,CAAC;EACzBC,OAAO,EAAE;AACb,CAAC,CAAC;;AAEF;AACAF,OAAO,CAACG,YAAY,CAACN,OAAO,CAACO,GAAG,CAC5BC,MAAM,IAAI;EACNC,OAAO,CAACC,GAAG,CAACF,MAAM,CAACP,GAAG,CAAC;EACvB,IAAIA,GAAG,KAAK,6BAA6B,EAAC,CAE1C;EACA;EACAL,SAAS,CAACe,KAAK,CAAC,CAAC;EACjB,OAAOH,MAAM;AACjB,CAAC,EACDI,GAAG,IAAI;EACH;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;AAC9B,CACJ,CAAC;;AAED;AACAT,OAAO,CAACG,YAAY,CAACS,QAAQ,CAACR,GAAG,CAC7BQ,QAAQ,IAAI;EACR;EACAnB,SAAS,CAACoB,IAAI,CAAC,CAAC;;EAEhB;EACA,OAAOD,QAAQ;AACnB,CAAC,EACDE,KAAK,IAAI;EACL,MAAM;IAAEC;EAAK,CAAC,GAAGD,KAAK,CAACF,QAAQ;EAC/B;EACA,IAAIG,IAAI,CAACC,IAAI,KAAI,GAAG,EAAC;IACjBpB,YAAY,CAACkB,KAAK,CAAC;MACfG,OAAO,EAAE,KAAK;MACdC,WAAW,EAAEJ,KAAK,CAACF,QAAQ,CAACG,IAAI,CAACE,OAAO;MACxCE,QAAQ,EAAE;IACd,CAAC,CAAC;EACN,CAAC,MAAK;IACFvB,YAAY,CAACkB,KAAK,CAAC;MACfG,OAAO,EAAE,OAAO;MAChBC,WAAW,EAAEJ,KAAK,CAACF,QAAQ,CAACG,IAAI,CAACE,OAAO;MACxCE,QAAQ,EAAE;IACd,CAAC,CAAC;EACN;;EAEA;EACA1B,SAAS,CAACoB,IAAI,CAAC,CAAC;EAChB;EACA,IAAIC,KAAK,CAACG,OAAO,CAACG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACzCxB,YAAY,CAACkB,KAAK,CAAC;MACfG,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EACA,OAAOH,KAAK;AAChB,CACJ,CAAC;AAED,SACIjB,OAAO,EACPG,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}