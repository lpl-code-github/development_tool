{"ast":null,"code":"export default {\n  name: \"AddBackUp\",\n  props: {\n    openFlag: {\n      type: Boolean,\n      required: true\n    },\n    dbList: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      visible: false,\n      formLayout: 'horizontal',\n      form: this.$form.createForm(this, {\n        name: 'coordinated',\n        desc: 'coordinated',\n        db: 'coordinated'\n      }),\n      componentKey: \"\",\n      param: {\n        data: {\n          name: \"\",\n          desc: \"\",\n          db: \"\"\n        }\n      }\n    };\n  },\n  watch: {\n    openFlag: {\n      handler: function (newVal, oldVal) {\n        console.log(newVal);\n        this.visible = newVal;\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  mounted() {\n    this.visible = this.openFlag;\n  },\n  methods: {\n    handleOk(e) {\n      this.loading = true;\n      e.preventDefault();\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n        } else {\n          this.loading = false;\n        }\n      });\n      setTimeout(() => {\n        this.initFormData();\n        this.$emit('updateModelStatus', false);\n        this.loading = false;\n      }, 3000);\n    },\n    handleCancel(e) {\n      this.initFormData();\n      this.$emit('updateModelStatus', false);\n    },\n    afterClose(e) {\n      this.initFormData();\n      this.$emit('updateModelStatus', false);\n    },\n    filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    handleSelect() {},\n    initFormData() {\n      this.param = {\n        data: {\n          name: \"\",\n          desc: \"\",\n          db: \"\"\n        }\n      };\n      console.log(this.param);\n      this.componentKey += 1;\n    }\n  }\n};","map":{"version":3,"names":["name","props","openFlag","type","Boolean","required","dbList","Array","data","loading","visible","formLayout","form","$form","createForm","desc","db","componentKey","param","watch","handler","newVal","oldVal","console","log","deep","mounted","methods","handleOk","e","preventDefault","validateFields","err","values","setTimeout","initFormData","$emit","handleCancel","afterClose","filterOption","input","option","componentOptions","children","text","toLowerCase","indexOf","handleSelect"],"sources":["src/components/backup/AddBackUp.vue"],"sourcesContent":["<template>\n  <div>\n    <a-modal v-model=\"visible\" title=\"Title\" on-ok=\"handleOk\" :afterClose=\"afterClose\">\n      <template slot=\"footer\">\n        <a-button key=\"back\" @click=\"handleCancel\">\n          取消\n        </a-button>\n        <a-button key=\"submit\" type=\"primary\" :loading=\"loading\" @click=\"handleOk\">\n          提交\n        </a-button>\n      </template>\n      <a-form :form=\"form\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 20}\" style=\"width: 100%\">\n        <a-form-item label=\"名称\">\n          <a-input\n              v-model=\"param.data.name\"\n              v-decorator=\"['name', { rules: [{ required: true, message: '请输入备份操作名称' }] }]\"\n          />\n        </a-form-item>\n        <a-form-model-item label=\"描述\" prop=\"desc\">\n          <a-input v-model=\"param.data.desc\" type=\"textarea\"/>\n        </a-form-model-item>\n        <a-form-model-item label=\"DB\" prop=\"db\">\n          <a-select\n              v-decorator=\"['db', { rules: [{ required: true, message: '请选择需要备份的数据库' }] }]\"\n              show-search\n              placeholder=\"选择数据库\"\n              option-filter-prop=\"children\"\n              :filter-option=\"filterOption\"\n              @select=\"handleSelect\"\n              :key=\"componentKey\"\n              :value=\"param.data.db\"\n          >\n            <a-select-option v-for=\"(item,index) in dbList\" :key=\"index\" :value=\"item\">\n              {{ item }}\n            </a-select-option>\n          </a-select>\n        </a-form-model-item>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"AddBackUp\",\n  props: {\n    openFlag: {\n      type: Boolean,\n      required: true\n    },\n    dbList: {\n      type: Array,\n      required: true\n    },\n  },\n  data() {\n    return {\n      loading: false,\n      visible: false,\n      formLayout: 'horizontal',\n      form: this.$form.createForm(this, {\n        name: 'coordinated',\n        desc: 'coordinated',\n        db: 'coordinated',\n      }),\n      componentKey: \"\",\n      param: {\n        data: {\n          name: \"\",\n          desc: \"\",\n          db: \"\"\n        }\n      }\n    };\n  },\n  watch: {\n    openFlag: {\n      handler: function (newVal, oldVal) {\n        console.log(newVal)\n        this.visible = newVal\n      },\n      // 深度观察监听\n      deep: true\n    }\n  },\n  mounted() {\n    this.visible = this.openFlag\n  },\n  methods: {\n    handleOk(e) {\n      this.loading = true;\n      e.preventDefault();\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n        } else {\n          this.loading = false;\n        }\n      });\n\n      setTimeout(() => {\n        this.initFormData()\n        this.$emit('updateModelStatus', false)\n        this.loading = false;\n      }, 3000);\n    },\n    handleCancel(e) {\n      this.initFormData()\n      this.$emit('updateModelStatus', false)\n    },\n    afterClose(e) {\n      this.initFormData()\n      this.$emit('updateModelStatus', false)\n    },\n    filterOption(input, option) {\n      return (\n          option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      );\n    },\n    handleSelect() {\n\n    },\n    initFormData() {\n      this.param = {\n        data: {\n          name: \"\",\n          desc: \"\",\n          db: \"\"\n        }\n      }\n      console.log(this.param)\n      this.componentKey += 1\n\n    }\n  },\n};\n</script>\n"],"mappings":"AA0CA;EACAA,IAAA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,MAAA;MACAH,IAAA,EAAAI,KAAA;MACAF,QAAA;IACA;EACA;EACAG,KAAA;IACA;MACAC,OAAA;MACAC,OAAA;MACAC,UAAA;MACAC,IAAA,OAAAC,KAAA,CAAAC,UAAA;QACAd,IAAA;QACAe,IAAA;QACAC,EAAA;MACA;MACAC,YAAA;MACAC,KAAA;QACAV,IAAA;UACAR,IAAA;UACAe,IAAA;UACAC,EAAA;QACA;MACA;IACA;EACA;EACAG,KAAA;IACAjB,QAAA;MACAkB,OAAA,WAAAA,CAAAC,MAAA,EAAAC,MAAA;QACAC,OAAA,CAAAC,GAAA,CAAAH,MAAA;QACA,KAAAX,OAAA,GAAAW,MAAA;MACA;MACA;MACAI,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAhB,OAAA,QAAAR,QAAA;EACA;EACAyB,OAAA;IACAC,SAAAC,CAAA;MACA,KAAApB,OAAA;MACAoB,CAAA,CAAAC,cAAA;MACA,KAAAlB,IAAA,CAAAmB,cAAA,EAAAC,GAAA,EAAAC,MAAA;QACA,KAAAD,GAAA;UACAT,OAAA,CAAAC,GAAA,8BAAAS,MAAA;QACA;UACA,KAAAxB,OAAA;QACA;MACA;MAEAyB,UAAA;QACA,KAAAC,YAAA;QACA,KAAAC,KAAA;QACA,KAAA3B,OAAA;MACA;IACA;IACA4B,aAAAR,CAAA;MACA,KAAAM,YAAA;MACA,KAAAC,KAAA;IACA;IACAE,WAAAT,CAAA;MACA,KAAAM,YAAA;MACA,KAAAC,KAAA;IACA;IACAG,aAAAC,KAAA,EAAAC,MAAA;MACA,OACAA,MAAA,CAAAC,gBAAA,CAAAC,QAAA,IAAAC,IAAA,CAAAC,WAAA,GAAAC,OAAA,CAAAN,KAAA,CAAAK,WAAA;IAEA;IACAE,aAAA,GAEA;IACAZ,aAAA;MACA,KAAAjB,KAAA;QACAV,IAAA;UACAR,IAAA;UACAe,IAAA;UACAC,EAAA;QACA;MACA;MACAO,OAAA,CAAAC,GAAA,MAAAN,KAAA;MACA,KAAAD,YAAA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}