{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport addEventListenerWrap from '../../vc-util/Dom/addEventListener';\nimport raf from '../../_util/raf';\nimport { defineComponent, onUnmounted, computed, shallowRef, watchEffect, getCurrentInstance } from 'vue';\nimport devWarning from '../../vc-util/devWarning';\nimport { useInjectTableContext } from '../../table/context';\nimport supportsPassive from '../../_util/supportsPassive';\nconst events = {\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  },\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  }\n};\nconst defaultMinWidth = 50;\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'DragHandle',\n  props: {\n    prefixCls: String,\n    width: {\n      type: Number,\n      required: true\n    },\n    minWidth: {\n      type: Number,\n      default: defaultMinWidth\n    },\n    maxWidth: {\n      type: Number,\n      default: Infinity\n    },\n    column: {\n      type: Object,\n      default: undefined\n    }\n  },\n  setup(props) {\n    let startX = 0;\n    let moveEvent = {\n      remove: () => {}\n    };\n    let stopEvent = {\n      remove: () => {}\n    };\n    const removeEvents = () => {\n      moveEvent.remove();\n      stopEvent.remove();\n    };\n    onUnmounted(() => {\n      removeEvents();\n    });\n    watchEffect(() => {\n      devWarning(!isNaN(props.width), 'Table', 'width must be a number when use resizable');\n    });\n    const {\n      onResizeColumn\n    } = useInjectTableContext();\n    const minWidth = computed(() => {\n      return typeof props.minWidth === 'number' && !isNaN(props.minWidth) ? props.minWidth : defaultMinWidth;\n    });\n    const maxWidth = computed(() => {\n      return typeof props.maxWidth === 'number' && !isNaN(props.maxWidth) ? props.maxWidth : Infinity;\n    });\n    const instance = getCurrentInstance();\n    let baseWidth = 0;\n    const dragging = shallowRef(false);\n    let rafId;\n    const updateWidth = e => {\n      let pageX = 0;\n      if (e.touches) {\n        if (e.touches.length) {\n          // touchmove\n          pageX = e.touches[0].pageX;\n        } else {\n          // touchend\n          pageX = e.changedTouches[0].pageX;\n        }\n      } else {\n        pageX = e.pageX;\n      }\n      const tmpDeltaX = startX - pageX;\n      let w = Math.max(baseWidth - tmpDeltaX, minWidth.value);\n      w = Math.min(w, maxWidth.value);\n      raf.cancel(rafId);\n      rafId = raf(() => {\n        onResizeColumn(w, props.column.__originColumn__);\n      });\n    };\n    const handleMove = e => {\n      updateWidth(e);\n    };\n    const handleStop = e => {\n      dragging.value = false;\n      updateWidth(e);\n      removeEvents();\n    };\n    const handleStart = (e, eventsFor) => {\n      dragging.value = true;\n      removeEvents();\n      baseWidth = instance.vnode.el.parentNode.getBoundingClientRect().width;\n      if (e instanceof MouseEvent && e.which !== 1) {\n        return;\n      }\n      if (e.stopPropagation) e.stopPropagation();\n      startX = e.touches ? e.touches[0].pageX : e.pageX;\n      moveEvent = addEventListenerWrap(document.documentElement, eventsFor.move, handleMove);\n      stopEvent = addEventListenerWrap(document.documentElement, eventsFor.stop, handleStop);\n    };\n    const handleDown = e => {\n      e.stopPropagation();\n      e.preventDefault();\n      handleStart(e, events.mouse);\n    };\n    const handleTouchDown = e => {\n      e.stopPropagation();\n      e.preventDefault();\n      handleStart(e, events.touch);\n    };\n    const handleClick = e => {\n      e.stopPropagation();\n      e.preventDefault();\n    };\n    return () => {\n      const {\n        prefixCls\n      } = props;\n      const touchEvents = {\n        [supportsPassive ? 'onTouchstartPassive' : 'onTouchstart']: e => handleTouchDown(e)\n      };\n      return _createVNode(\"div\", _objectSpread(_objectSpread({\n        \"class\": `${prefixCls}-resize-handle ${dragging.value ? 'dragging' : ''}`,\n        \"onMousedown\": handleDown\n      }, touchEvents), {}, {\n        \"onClick\": handleClick\n      }), [_createVNode(\"div\", {\n        \"class\": `${prefixCls}-resize-handle-line`\n      }, null)]);\n    };\n  }\n});","map":{"version":3,"names":["_objectSpread","createVNode","_createVNode","addEventListenerWrap","raf","defineComponent","onUnmounted","computed","shallowRef","watchEffect","getCurrentInstance","devWarning","useInjectTableContext","supportsPassive","events","mouse","start","move","stop","touch","defaultMinWidth","compatConfig","MODE","name","props","prefixCls","String","width","type","Number","required","minWidth","default","maxWidth","Infinity","column","Object","undefined","setup","startX","moveEvent","remove","stopEvent","removeEvents","isNaN","onResizeColumn","instance","baseWidth","dragging","rafId","updateWidth","e","pageX","touches","length","changedTouches","tmpDeltaX","w","Math","max","value","min","cancel","__originColumn__","handleMove","handleStop","handleStart","eventsFor","vnode","el","parentNode","getBoundingClientRect","MouseEvent","which","stopPropagation","document","documentElement","handleDown","preventDefault","handleTouchDown","handleClick","touchEvents"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/vc-table/Header/DragHandle.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport addEventListenerWrap from '../../vc-util/Dom/addEventListener';\nimport raf from '../../_util/raf';\nimport { defineComponent, onUnmounted, computed, shallowRef, watchEffect, getCurrentInstance } from 'vue';\nimport devWarning from '../../vc-util/devWarning';\nimport { useInjectTableContext } from '../../table/context';\nimport supportsPassive from '../../_util/supportsPassive';\nconst events = {\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  },\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  }\n};\nconst defaultMinWidth = 50;\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'DragHandle',\n  props: {\n    prefixCls: String,\n    width: {\n      type: Number,\n      required: true\n    },\n    minWidth: {\n      type: Number,\n      default: defaultMinWidth\n    },\n    maxWidth: {\n      type: Number,\n      default: Infinity\n    },\n    column: {\n      type: Object,\n      default: undefined\n    }\n  },\n  setup(props) {\n    let startX = 0;\n    let moveEvent = {\n      remove: () => {}\n    };\n    let stopEvent = {\n      remove: () => {}\n    };\n    const removeEvents = () => {\n      moveEvent.remove();\n      stopEvent.remove();\n    };\n    onUnmounted(() => {\n      removeEvents();\n    });\n    watchEffect(() => {\n      devWarning(!isNaN(props.width), 'Table', 'width must be a number when use resizable');\n    });\n    const {\n      onResizeColumn\n    } = useInjectTableContext();\n    const minWidth = computed(() => {\n      return typeof props.minWidth === 'number' && !isNaN(props.minWidth) ? props.minWidth : defaultMinWidth;\n    });\n    const maxWidth = computed(() => {\n      return typeof props.maxWidth === 'number' && !isNaN(props.maxWidth) ? props.maxWidth : Infinity;\n    });\n    const instance = getCurrentInstance();\n    let baseWidth = 0;\n    const dragging = shallowRef(false);\n    let rafId;\n    const updateWidth = e => {\n      let pageX = 0;\n      if (e.touches) {\n        if (e.touches.length) {\n          // touchmove\n          pageX = e.touches[0].pageX;\n        } else {\n          // touchend\n          pageX = e.changedTouches[0].pageX;\n        }\n      } else {\n        pageX = e.pageX;\n      }\n      const tmpDeltaX = startX - pageX;\n      let w = Math.max(baseWidth - tmpDeltaX, minWidth.value);\n      w = Math.min(w, maxWidth.value);\n      raf.cancel(rafId);\n      rafId = raf(() => {\n        onResizeColumn(w, props.column.__originColumn__);\n      });\n    };\n    const handleMove = e => {\n      updateWidth(e);\n    };\n    const handleStop = e => {\n      dragging.value = false;\n      updateWidth(e);\n      removeEvents();\n    };\n    const handleStart = (e, eventsFor) => {\n      dragging.value = true;\n      removeEvents();\n      baseWidth = instance.vnode.el.parentNode.getBoundingClientRect().width;\n      if (e instanceof MouseEvent && e.which !== 1) {\n        return;\n      }\n      if (e.stopPropagation) e.stopPropagation();\n      startX = e.touches ? e.touches[0].pageX : e.pageX;\n      moveEvent = addEventListenerWrap(document.documentElement, eventsFor.move, handleMove);\n      stopEvent = addEventListenerWrap(document.documentElement, eventsFor.stop, handleStop);\n    };\n    const handleDown = e => {\n      e.stopPropagation();\n      e.preventDefault();\n      handleStart(e, events.mouse);\n    };\n    const handleTouchDown = e => {\n      e.stopPropagation();\n      e.preventDefault();\n      handleStart(e, events.touch);\n    };\n    const handleClick = e => {\n      e.stopPropagation();\n      e.preventDefault();\n    };\n    return () => {\n      const {\n        prefixCls\n      } = props;\n      const touchEvents = {\n        [supportsPassive ? 'onTouchstartPassive' : 'onTouchstart']: e => handleTouchDown(e)\n      };\n      return _createVNode(\"div\", _objectSpread(_objectSpread({\n        \"class\": `${prefixCls}-resize-handle ${dragging.value ? 'dragging' : ''}`,\n        \"onMousedown\": handleDown\n      }, touchEvents), {}, {\n        \"onClick\": handleClick\n      }), [_createVNode(\"div\", {\n        \"class\": `${prefixCls}-resize-handle-line`\n      }, null)]);\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}