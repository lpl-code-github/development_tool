{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { onBeforeUnmount, onMounted, Transition, render, defineComponent, shallowRef } from 'vue';\nimport useState from '../hooks/useState';\nimport { objectType } from '../type';\nimport { getTargetWaveColor } from './util';\nimport wrapperRaf from '../raf';\nfunction validateNum(value) {\n  return Number.isNaN(value) ? 0 : value;\n}\nconst WaveEffect = defineComponent({\n  props: {\n    target: objectType(),\n    className: String\n  },\n  setup(props) {\n    const divRef = shallowRef(null);\n    const [color, setWaveColor] = useState(null);\n    const [borderRadius, setBorderRadius] = useState([]);\n    const [left, setLeft] = useState(0);\n    const [top, setTop] = useState(0);\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n    const [enabled, setEnabled] = useState(false);\n    function syncPos() {\n      const {\n        target\n      } = props;\n      const nodeStyle = getComputedStyle(target);\n      // Get wave color from target\n      setWaveColor(getTargetWaveColor(target));\n      const isStatic = nodeStyle.position === 'static';\n      // Rect\n      const {\n        borderLeftWidth,\n        borderTopWidth\n      } = nodeStyle;\n      setLeft(isStatic ? target.offsetLeft : validateNum(-parseFloat(borderLeftWidth)));\n      setTop(isStatic ? target.offsetTop : validateNum(-parseFloat(borderTopWidth)));\n      setWidth(target.offsetWidth);\n      setHeight(target.offsetHeight);\n      // Get border radius\n      const {\n        borderTopLeftRadius,\n        borderTopRightRadius,\n        borderBottomLeftRadius,\n        borderBottomRightRadius\n      } = nodeStyle;\n      setBorderRadius([borderTopLeftRadius, borderTopRightRadius, borderBottomRightRadius, borderBottomLeftRadius].map(radius => validateNum(parseFloat(radius))));\n    }\n    // Add resize observer to follow size\n    let resizeObserver;\n    let rafId;\n    let timeoutId;\n    const clear = () => {\n      clearTimeout(timeoutId);\n      wrapperRaf.cancel(rafId);\n      resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect();\n    };\n    const removeDom = () => {\n      var _a;\n      const holder = (_a = divRef.value) === null || _a === void 0 ? void 0 : _a.parentElement;\n      if (holder) {\n        render(null, holder);\n        if (holder.parentElement) {\n          holder.parentElement.removeChild(holder);\n        }\n      }\n    };\n    onMounted(() => {\n      clear();\n      timeoutId = setTimeout(() => {\n        removeDom();\n      }, 5000);\n      const {\n        target\n      } = props;\n      if (target) {\n        // We need delay to check position here\n        // since UI may change after click\n        rafId = wrapperRaf(() => {\n          syncPos();\n          setEnabled(true);\n        });\n        if (typeof ResizeObserver !== 'undefined') {\n          resizeObserver = new ResizeObserver(syncPos);\n          resizeObserver.observe(target);\n        }\n      }\n    });\n    onBeforeUnmount(() => {\n      clear();\n    });\n    const onTransitionend = e => {\n      if (e.propertyName === 'opacity') {\n        removeDom();\n      }\n    };\n    return () => {\n      if (!enabled.value) {\n        return null;\n      }\n      const waveStyle = {\n        left: `${left.value}px`,\n        top: `${top.value}px`,\n        width: `${width.value}px`,\n        height: `${height.value}px`,\n        borderRadius: borderRadius.value.map(radius => `${radius}px`).join(' ')\n      };\n      if (color) {\n        waveStyle['--wave-color'] = color.value;\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"name\": \"wave-motion\",\n        \"appearFromClass\": \"wave-motion-appear\",\n        \"appearActiveClass\": \"wave-motion-appear\",\n        \"appearToClass\": \"wave-motion-appear wave-motion-appear-active\"\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"ref\": divRef,\n          \"class\": props.className,\n          \"style\": waveStyle,\n          \"onTransitionend\": onTransitionend\n        }, null)]\n      });\n    };\n  }\n});\nfunction showWaveEffect(node, className) {\n  // Create holder\n  const holder = document.createElement('div');\n  holder.style.position = 'absolute';\n  holder.style.left = `0px`;\n  holder.style.top = `0px`;\n  node === null || node === void 0 ? void 0 : node.insertBefore(holder, node === null || node === void 0 ? void 0 : node.firstChild);\n  render(_createVNode(WaveEffect, {\n    \"target\": node,\n    \"className\": className\n  }, null), holder);\n}\nexport default showWaveEffect;","map":{"version":3,"names":["createVNode","_createVNode","onBeforeUnmount","onMounted","Transition","render","defineComponent","shallowRef","useState","objectType","getTargetWaveColor","wrapperRaf","validateNum","value","Number","isNaN","WaveEffect","props","target","className","String","setup","divRef","color","setWaveColor","borderRadius","setBorderRadius","left","setLeft","top","setTop","width","setWidth","height","setHeight","enabled","setEnabled","syncPos","nodeStyle","getComputedStyle","isStatic","position","borderLeftWidth","borderTopWidth","offsetLeft","parseFloat","offsetTop","offsetWidth","offsetHeight","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","map","radius","resizeObserver","rafId","timeoutId","clear","clearTimeout","cancel","disconnect","removeDom","_a","holder","parentElement","removeChild","setTimeout","ResizeObserver","observe","onTransitionend","e","propertyName","waveStyle","join","default","showWaveEffect","node","document","createElement","style","insertBefore","firstChild"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/_util/wave/WaveEffect.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { onBeforeUnmount, onMounted, Transition, render, defineComponent, shallowRef } from 'vue';\nimport useState from '../hooks/useState';\nimport { objectType } from '../type';\nimport { getTargetWaveColor } from './util';\nimport wrapperRaf from '../raf';\nfunction validateNum(value) {\n  return Number.isNaN(value) ? 0 : value;\n}\nconst WaveEffect = defineComponent({\n  props: {\n    target: objectType(),\n    className: String\n  },\n  setup(props) {\n    const divRef = shallowRef(null);\n    const [color, setWaveColor] = useState(null);\n    const [borderRadius, setBorderRadius] = useState([]);\n    const [left, setLeft] = useState(0);\n    const [top, setTop] = useState(0);\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n    const [enabled, setEnabled] = useState(false);\n    function syncPos() {\n      const {\n        target\n      } = props;\n      const nodeStyle = getComputedStyle(target);\n      // Get wave color from target\n      setWaveColor(getTargetWaveColor(target));\n      const isStatic = nodeStyle.position === 'static';\n      // Rect\n      const {\n        borderLeftWidth,\n        borderTopWidth\n      } = nodeStyle;\n      setLeft(isStatic ? target.offsetLeft : validateNum(-parseFloat(borderLeftWidth)));\n      setTop(isStatic ? target.offsetTop : validateNum(-parseFloat(borderTopWidth)));\n      setWidth(target.offsetWidth);\n      setHeight(target.offsetHeight);\n      // Get border radius\n      const {\n        borderTopLeftRadius,\n        borderTopRightRadius,\n        borderBottomLeftRadius,\n        borderBottomRightRadius\n      } = nodeStyle;\n      setBorderRadius([borderTopLeftRadius, borderTopRightRadius, borderBottomRightRadius, borderBottomLeftRadius].map(radius => validateNum(parseFloat(radius))));\n    }\n    // Add resize observer to follow size\n    let resizeObserver;\n    let rafId;\n    let timeoutId;\n    const clear = () => {\n      clearTimeout(timeoutId);\n      wrapperRaf.cancel(rafId);\n      resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect();\n    };\n    const removeDom = () => {\n      var _a;\n      const holder = (_a = divRef.value) === null || _a === void 0 ? void 0 : _a.parentElement;\n      if (holder) {\n        render(null, holder);\n        if (holder.parentElement) {\n          holder.parentElement.removeChild(holder);\n        }\n      }\n    };\n    onMounted(() => {\n      clear();\n      timeoutId = setTimeout(() => {\n        removeDom();\n      }, 5000);\n      const {\n        target\n      } = props;\n      if (target) {\n        // We need delay to check position here\n        // since UI may change after click\n        rafId = wrapperRaf(() => {\n          syncPos();\n          setEnabled(true);\n        });\n        if (typeof ResizeObserver !== 'undefined') {\n          resizeObserver = new ResizeObserver(syncPos);\n          resizeObserver.observe(target);\n        }\n      }\n    });\n    onBeforeUnmount(() => {\n      clear();\n    });\n    const onTransitionend = e => {\n      if (e.propertyName === 'opacity') {\n        removeDom();\n      }\n    };\n    return () => {\n      if (!enabled.value) {\n        return null;\n      }\n      const waveStyle = {\n        left: `${left.value}px`,\n        top: `${top.value}px`,\n        width: `${width.value}px`,\n        height: `${height.value}px`,\n        borderRadius: borderRadius.value.map(radius => `${radius}px`).join(' ')\n      };\n      if (color) {\n        waveStyle['--wave-color'] = color.value;\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"name\": \"wave-motion\",\n        \"appearFromClass\": \"wave-motion-appear\",\n        \"appearActiveClass\": \"wave-motion-appear\",\n        \"appearToClass\": \"wave-motion-appear wave-motion-appear-active\"\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"ref\": divRef,\n          \"class\": props.className,\n          \"style\": waveStyle,\n          \"onTransitionend\": onTransitionend\n        }, null)]\n      });\n    };\n  }\n});\nfunction showWaveEffect(node, className) {\n  // Create holder\n  const holder = document.createElement('div');\n  holder.style.position = 'absolute';\n  holder.style.left = `0px`;\n  holder.style.top = `0px`;\n  node === null || node === void 0 ? void 0 : node.insertBefore(holder, node === null || node === void 0 ? void 0 : node.firstChild);\n  render(_createVNode(WaveEffect, {\n    \"target\": node,\n    \"className\": className\n  }, null), holder);\n}\nexport default showWaveEffect;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}