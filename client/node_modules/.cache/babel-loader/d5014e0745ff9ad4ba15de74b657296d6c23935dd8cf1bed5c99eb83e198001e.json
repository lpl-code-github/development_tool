{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport raf from '../../_util/raf';\nimport { onBeforeUnmount, ref, shallowRef } from 'vue';\nexport function useLayoutState(defaultState) {\n  const stateRef = shallowRef(defaultState);\n  let rafId;\n  const updateBatchRef = shallowRef([]);\n  function setFrameState(updater) {\n    updateBatchRef.value.push(updater);\n    raf.cancel(rafId);\n    rafId = raf(() => {\n      const prevBatch = updateBatchRef.value;\n      // const prevState = stateRef.value;\n      updateBatchRef.value = [];\n      prevBatch.forEach(batchUpdater => {\n        stateRef.value = batchUpdater(stateRef.value);\n      });\n    });\n  }\n  onBeforeUnmount(() => {\n    raf.cancel(rafId);\n  });\n  return [stateRef, setFrameState];\n}\n/** Lock frame, when frame pass reset the lock. */\nexport function useTimeoutLock(defaultState) {\n  const frameRef = ref(defaultState || null);\n  const timeoutRef = ref();\n  function cleanUp() {\n    clearTimeout(timeoutRef.value);\n  }\n  function setState(newState) {\n    frameRef.value = newState;\n    cleanUp();\n    timeoutRef.value = setTimeout(() => {\n      frameRef.value = null;\n      timeoutRef.value = undefined;\n    }, 100);\n  }\n  function getState() {\n    return frameRef.value;\n  }\n  onBeforeUnmount(() => {\n    cleanUp();\n  });\n  return [setState, getState];\n}","map":{"version":3,"names":["raf","onBeforeUnmount","ref","shallowRef","useLayoutState","defaultState","stateRef","rafId","updateBatchRef","setFrameState","updater","value","push","cancel","prevBatch","forEach","batchUpdater","useTimeoutLock","frameRef","timeoutRef","cleanUp","clearTimeout","setState","newState","setTimeout","undefined","getState"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/vc-table/hooks/useFrame.js"],"sourcesContent":["import raf from '../../_util/raf';\nimport { onBeforeUnmount, ref, shallowRef } from 'vue';\nexport function useLayoutState(defaultState) {\n  const stateRef = shallowRef(defaultState);\n  let rafId;\n  const updateBatchRef = shallowRef([]);\n  function setFrameState(updater) {\n    updateBatchRef.value.push(updater);\n    raf.cancel(rafId);\n    rafId = raf(() => {\n      const prevBatch = updateBatchRef.value;\n      // const prevState = stateRef.value;\n      updateBatchRef.value = [];\n      prevBatch.forEach(batchUpdater => {\n        stateRef.value = batchUpdater(stateRef.value);\n      });\n    });\n  }\n  onBeforeUnmount(() => {\n    raf.cancel(rafId);\n  });\n  return [stateRef, setFrameState];\n}\n/** Lock frame, when frame pass reset the lock. */\nexport function useTimeoutLock(defaultState) {\n  const frameRef = ref(defaultState || null);\n  const timeoutRef = ref();\n  function cleanUp() {\n    clearTimeout(timeoutRef.value);\n  }\n  function setState(newState) {\n    frameRef.value = newState;\n    cleanUp();\n    timeoutRef.value = setTimeout(() => {\n      frameRef.value = null;\n      timeoutRef.value = undefined;\n    }, 100);\n  }\n  function getState() {\n    return frameRef.value;\n  }\n  onBeforeUnmount(() => {\n    cleanUp();\n  });\n  return [setState, getState];\n}"],"mappings":";AAAA,OAAOA,GAAG,MAAM,iBAAiB;AACjC,SAASC,eAAe,EAAEC,GAAG,EAAEC,UAAU,QAAQ,KAAK;AACtD,OAAO,SAASC,cAAcA,CAACC,YAAY,EAAE;EAC3C,MAAMC,QAAQ,GAAGH,UAAU,CAACE,YAAY,CAAC;EACzC,IAAIE,KAAK;EACT,MAAMC,cAAc,GAAGL,UAAU,CAAC,EAAE,CAAC;EACrC,SAASM,aAAaA,CAACC,OAAO,EAAE;IAC9BF,cAAc,CAACG,KAAK,CAACC,IAAI,CAACF,OAAO,CAAC;IAClCV,GAAG,CAACa,MAAM,CAACN,KAAK,CAAC;IACjBA,KAAK,GAAGP,GAAG,CAAC,MAAM;MAChB,MAAMc,SAAS,GAAGN,cAAc,CAACG,KAAK;MACtC;MACAH,cAAc,CAACG,KAAK,GAAG,EAAE;MACzBG,SAAS,CAACC,OAAO,CAACC,YAAY,IAAI;QAChCV,QAAQ,CAACK,KAAK,GAAGK,YAAY,CAACV,QAAQ,CAACK,KAAK,CAAC;MAC/C,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACAV,eAAe,CAAC,MAAM;IACpBD,GAAG,CAACa,MAAM,CAACN,KAAK,CAAC;EACnB,CAAC,CAAC;EACF,OAAO,CAACD,QAAQ,EAAEG,aAAa,CAAC;AAClC;AACA;AACA,OAAO,SAASQ,cAAcA,CAACZ,YAAY,EAAE;EAC3C,MAAMa,QAAQ,GAAGhB,GAAG,CAACG,YAAY,IAAI,IAAI,CAAC;EAC1C,MAAMc,UAAU,GAAGjB,GAAG,CAAC,CAAC;EACxB,SAASkB,OAAOA,CAAA,EAAG;IACjBC,YAAY,CAACF,UAAU,CAACR,KAAK,CAAC;EAChC;EACA,SAASW,QAAQA,CAACC,QAAQ,EAAE;IAC1BL,QAAQ,CAACP,KAAK,GAAGY,QAAQ;IACzBH,OAAO,CAAC,CAAC;IACTD,UAAU,CAACR,KAAK,GAAGa,UAAU,CAAC,MAAM;MAClCN,QAAQ,CAACP,KAAK,GAAG,IAAI;MACrBQ,UAAU,CAACR,KAAK,GAAGc,SAAS;IAC9B,CAAC,EAAE,GAAG,CAAC;EACT;EACA,SAASC,QAAQA,CAAA,EAAG;IAClB,OAAOR,QAAQ,CAACP,KAAK;EACvB;EACAV,eAAe,CAAC,MAAM;IACpBmB,OAAO,CAAC,CAAC;EACX,CAAC,CAAC;EACF,OAAO,CAACE,QAAQ,EAAEI,QAAQ,CAAC;AAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}