{"ast":null,"code":"// 引入axios\nimport axios from 'axios';\n\n// 顶部loading\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\n\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true;\n\n// ant design的notification组件\nimport notification from 'ant-design-vue/lib/notification';\n// 引入封装好的接口模块\nimport * as request from './request.js';\n\n// 请求超时时间\naxios.defaults.timeout = 100000;\n\n// 代理接口 部署时应该换为后台实际地址\nconst service = axios.create({\n  baseURL: '/apis'\n});\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(config => {\n  // 加载顶部loading\n  NProgress.start();\n  return config;\n}, err => {\n  // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n  return Promise.reject(err);\n});\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(response => {\n  // 关闭顶部loading\n  NProgress.done();\n\n  // 返回响应体\n  return response;\n}, error => {\n  const {\n    data\n  } = error.response;\n  if (data.code === 404) {\n    notification.error({\n      message: '未找到'\n    });\n  } else {\n    notification.error({\n      message: '错误的请求',\n      description: error.response.data.message,\n      duration: null\n    });\n  }\n\n  // 关闭顶部loading\n  NProgress.done();\n  // 请求超时\n  if (error.message.indexOf('timeout') !== -1) {\n    notification.error({\n      message: '请求超时，请稍后再试'\n    });\n  }\n  return error;\n});\nexport { request, service };","map":{"version":3,"names":["axios","NProgress","defaults","withCredentials","notification","request","timeout","service","create","baseURL","interceptors","use","config","start","err","Promise","reject","response","done","error","data","code","message","description","duration","indexOf"],"sources":["/Users/lpl/Teamsupport/development_tool/client/src/api/index.js"],"sourcesContent":["// 引入axios\nimport axios from 'axios'\n\n// 顶部loading\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true\n\n// ant design的notification组件\nimport notification from 'ant-design-vue/lib/notification';\n// 引入封装好的接口模块\nimport * as request from './request.js'\n\n// 请求超时时间\naxios.defaults.timeout = 100000\n\n// 代理接口 部署时应该换为后台实际地址\nconst service = axios.create({\n    baseURL: '/apis'\n})\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(\n    config => {\n        // 加载顶部loading\n        NProgress.start()\n        return config\n    },\n    err => {\n        // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n        return Promise.reject(err)\n    }\n)\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(\n    response => {\n        // 关闭顶部loading\n        NProgress.done()\n\n        // 返回响应体\n        return response\n    },\n    error => {\n        const { data } = error.response\n        if (data.code ===404){\n            notification.error({\n                message: '未找到',\n            });\n        }else {\n            notification.error({\n                message: '错误的请求',\n                description: error.response.data.message,\n                duration:null\n            });\n        }\n\n        // 关闭顶部loading\n        NProgress.done()\n        // 请求超时\n        if (error.message.indexOf('timeout') !== -1) {\n            notification.error({\n                message: '请求超时，请稍后再试'\n            });\n        }\n        return error\n    }\n)\n\nexport {\n    request,\n    service\n}\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAOC,SAAS,MAAM,WAAW;AACjC,OAAO,yBAAyB;;AAEhC;AACAD,KAAK,CAACE,QAAQ,CAACC,eAAe,GAAG,IAAI;;AAErC;AACA,OAAOC,YAAY,MAAM,iCAAiC;AAC1D;AACA,OAAO,KAAKC,OAAO,MAAM,cAAc;;AAEvC;AACAL,KAAK,CAACE,QAAQ,CAACI,OAAO,GAAG,MAAM;;AAE/B;AACA,MAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAM,CAAC;EACzBC,OAAO,EAAE;AACb,CAAC,CAAC;;AAEF;AACAF,OAAO,CAACG,YAAY,CAACL,OAAO,CAACM,GAAG,CAC5BC,MAAM,IAAI;EACN;EACAX,SAAS,CAACY,KAAK,CAAC,CAAC;EACjB,OAAOD,MAAM;AACjB,CAAC,EACDE,GAAG,IAAI;EACH;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;AAC9B,CACJ,CAAC;;AAED;AACAP,OAAO,CAACG,YAAY,CAACO,QAAQ,CAACN,GAAG,CAC7BM,QAAQ,IAAI;EACR;EACAhB,SAAS,CAACiB,IAAI,CAAC,CAAC;;EAEhB;EACA,OAAOD,QAAQ;AACnB,CAAC,EACDE,KAAK,IAAI;EACL,MAAM;IAAEC;EAAK,CAAC,GAAGD,KAAK,CAACF,QAAQ;EAC/B,IAAIG,IAAI,CAACC,IAAI,KAAI,GAAG,EAAC;IACjBjB,YAAY,CAACe,KAAK,CAAC;MACfG,OAAO,EAAE;IACb,CAAC,CAAC;EACN,CAAC,MAAK;IACFlB,YAAY,CAACe,KAAK,CAAC;MACfG,OAAO,EAAE,OAAO;MAChBC,WAAW,EAAEJ,KAAK,CAACF,QAAQ,CAACG,IAAI,CAACE,OAAO;MACxCE,QAAQ,EAAC;IACb,CAAC,CAAC;EACN;;EAEA;EACAvB,SAAS,CAACiB,IAAI,CAAC,CAAC;EAChB;EACA,IAAIC,KAAK,CAACG,OAAO,CAACG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACzCrB,YAAY,CAACe,KAAK,CAAC;MACfG,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EACA,OAAOH,KAAK;AAChB,CACJ,CAAC;AAED,SACId,OAAO,EACPE,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}