{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\nimport { uploadProps } from './interface';\nimport { defineComponent, onBeforeUnmount, onMounted, ref } from 'vue';\nimport pickAttrs from '../_util/pickAttrs';\nimport partition from 'lodash-es/partition';\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'AjaxUploader',\n  inheritAttrs: false,\n  props: uploadProps(),\n  setup(props, _ref) {\n    let {\n      slots,\n      attrs,\n      expose\n    } = _ref;\n    const uid = ref(getUid());\n    const reqs = {};\n    const fileInput = ref();\n    let isMounted = false;\n    /**\n     * Process file before upload. When all the file is ready, we start upload.\n     */\n    const processFile = (file, fileList) => __awaiter(this, void 0, void 0, function* () {\n      const {\n        beforeUpload\n      } = props;\n      let transformedFile = file;\n      if (beforeUpload) {\n        try {\n          transformedFile = yield beforeUpload(file, fileList);\n        } catch (e) {\n          // Rejection will also trade as false\n          transformedFile = false;\n        }\n        if (transformedFile === false) {\n          return {\n            origin: file,\n            parsedFile: null,\n            action: null,\n            data: null\n          };\n        }\n      }\n      // Get latest action\n      const {\n        action\n      } = props;\n      let mergedAction;\n      if (typeof action === 'function') {\n        mergedAction = yield action(file);\n      } else {\n        mergedAction = action;\n      }\n      // Get latest data\n      const {\n        data\n      } = props;\n      let mergedData;\n      if (typeof data === 'function') {\n        mergedData = yield data(file);\n      } else {\n        mergedData = data;\n      }\n      const parsedData =\n      // string type is from legacy `transformFile`.\n      // Not sure if this will work since no related test case works with it\n      (typeof transformedFile === 'object' || typeof transformedFile === 'string') && transformedFile ? transformedFile : file;\n      let parsedFile;\n      if (parsedData instanceof File) {\n        parsedFile = parsedData;\n      } else {\n        parsedFile = new File([parsedData], file.name, {\n          type: file.type\n        });\n      }\n      const mergedParsedFile = parsedFile;\n      mergedParsedFile.uid = file.uid;\n      return {\n        origin: file,\n        data: mergedData,\n        parsedFile: mergedParsedFile,\n        action: mergedAction\n      };\n    });\n    const post = _ref2 => {\n      let {\n        data,\n        origin,\n        action,\n        parsedFile\n      } = _ref2;\n      if (!isMounted) {\n        return;\n      }\n      const {\n        onStart,\n        customRequest,\n        name,\n        headers,\n        withCredentials,\n        method\n      } = props;\n      const {\n        uid\n      } = origin;\n      const request = customRequest || defaultRequest;\n      const requestOption = {\n        action,\n        filename: name,\n        data,\n        file: parsedFile,\n        headers,\n        withCredentials,\n        method: method || 'post',\n        onProgress: e => {\n          const {\n            onProgress\n          } = props;\n          onProgress === null || onProgress === void 0 ? void 0 : onProgress(e, parsedFile);\n        },\n        onSuccess: (ret, xhr) => {\n          const {\n            onSuccess\n          } = props;\n          onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(ret, parsedFile, xhr);\n          delete reqs[uid];\n        },\n        onError: (err, ret) => {\n          const {\n            onError\n          } = props;\n          onError === null || onError === void 0 ? void 0 : onError(err, ret, parsedFile);\n          delete reqs[uid];\n        }\n      };\n      onStart(origin);\n      reqs[uid] = request(requestOption);\n    };\n    const reset = () => {\n      uid.value = getUid();\n    };\n    const abort = file => {\n      if (file) {\n        const uid = file.uid ? file.uid : file;\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(uid => {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n          delete reqs[uid];\n        });\n      }\n    };\n    onMounted(() => {\n      isMounted = true;\n    });\n    onBeforeUnmount(() => {\n      isMounted = false;\n      abort();\n    });\n    const uploadFiles = files => {\n      const originFiles = [...files];\n      const postFiles = originFiles.map(file => {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return processFile(file, originFiles);\n      });\n      // Batch upload files\n      Promise.all(postFiles).then(fileList => {\n        const {\n          onBatchStart\n        } = props;\n        onBatchStart === null || onBatchStart === void 0 ? void 0 : onBatchStart(fileList.map(_ref3 => {\n          let {\n            origin,\n            parsedFile\n          } = _ref3;\n          return {\n            file: origin,\n            parsedFile\n          };\n        }));\n        fileList.filter(file => file.parsedFile !== null).forEach(file => {\n          post(file);\n        });\n      });\n    };\n    const onChange = e => {\n      const {\n        accept,\n        directory\n      } = props;\n      const {\n        files\n      } = e.target;\n      const acceptedFiles = [...files].filter(file => !directory || attrAccept(file, accept));\n      uploadFiles(acceptedFiles);\n      reset();\n    };\n    const onClick = e => {\n      const el = fileInput.value;\n      if (!el) {\n        return;\n      }\n      const {\n        onClick\n      } = props;\n      // TODO\n      // if (children && (children as any).type === 'button') {\n      //   const parent = el.parentNode as HTMLInputElement;\n      //   parent.focus();\n      //   parent.querySelector('button').blur();\n      // }\n      el.click();\n      if (onClick) {\n        onClick(e);\n      }\n    };\n    const onKeyDown = e => {\n      if (e.key === 'Enter') {\n        onClick(e);\n      }\n    };\n    const onFileDrop = e => {\n      const {\n        multiple\n      } = props;\n      e.preventDefault();\n      if (e.type === 'dragover') {\n        return;\n      }\n      if (props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), uploadFiles, _file => attrAccept(_file, props.accept));\n      } else {\n        const files = partition(Array.prototype.slice.call(e.dataTransfer.files), file => attrAccept(file, props.accept));\n        let successFiles = files[0];\n        const errorFiles = files[1];\n        if (multiple === false) {\n          successFiles = successFiles.slice(0, 1);\n        }\n        uploadFiles(successFiles);\n        if (errorFiles.length && props.onReject) props.onReject(errorFiles);\n      }\n    };\n    expose({\n      abort\n    });\n    return () => {\n      var _a;\n      const {\n          componentTag: Tag,\n          prefixCls,\n          disabled,\n          id,\n          multiple,\n          accept,\n          capture,\n          directory,\n          openFileDialogOnClick,\n          onMouseenter,\n          onMouseleave\n        } = props,\n        otherProps = __rest(props, [\"componentTag\", \"prefixCls\", \"disabled\", \"id\", \"multiple\", \"accept\", \"capture\", \"directory\", \"openFileDialogOnClick\", \"onMouseenter\", \"onMouseleave\"]);\n      const cls = {\n        [prefixCls]: true,\n        [`${prefixCls}-disabled`]: disabled,\n        [attrs.class]: !!attrs.class\n      };\n      // because input don't have directory/webkitdirectory type declaration\n      const dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      const events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? onClick : () => {},\n        onKeydown: openFileDialogOnClick ? onKeyDown : () => {},\n        onMouseenter,\n        onMouseleave,\n        onDrop: onFileDrop,\n        onDragover: onFileDrop,\n        tabindex: '0'\n      };\n      return _createVNode(Tag, _objectSpread(_objectSpread({}, events), {}, {\n        \"class\": cls,\n        \"role\": \"button\",\n        \"style\": attrs.style\n      }), {\n        default: () => [_createVNode(\"input\", _objectSpread(_objectSpread(_objectSpread({}, pickAttrs(otherProps, {\n          aria: true,\n          data: true\n        })), {}, {\n          \"id\": id,\n          \"type\": \"file\",\n          \"ref\": fileInput,\n          \"onClick\": e => e.stopPropagation(),\n          \"key\": uid.value,\n          \"style\": {\n            display: 'none'\n          },\n          \"accept\": accept\n        }, dirProps), {}, {\n          \"multiple\": multiple,\n          \"onChange\": onChange\n        }, capture != null ? {\n          capture\n        } : {}), null), (_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]\n      });\n    };\n  }\n});","map":{"version":3,"names":["_objectSpread","createVNode","_createVNode","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","defaultRequest","getUid","attrAccept","traverseFileTree","uploadProps","defineComponent","onBeforeUnmount","onMounted","ref","pickAttrs","partition","compatConfig","MODE","name","inheritAttrs","props","setup","_ref","slots","attrs","expose","uid","reqs","fileInput","isMounted","processFile","file","fileList","beforeUpload","transformedFile","origin","parsedFile","action","data","mergedAction","mergedData","parsedData","File","type","mergedParsedFile","post","_ref2","onStart","customRequest","headers","withCredentials","method","request","requestOption","filename","onProgress","onSuccess","ret","xhr","onError","err","reset","abort","keys","forEach","uploadFiles","files","originFiles","postFiles","map","all","onBatchStart","_ref3","filter","onChange","accept","directory","target","acceptedFiles","onClick","el","click","onKeyDown","key","onFileDrop","multiple","preventDefault","Array","slice","dataTransfer","items","_file","successFiles","errorFiles","onReject","_a","componentTag","Tag","prefixCls","disabled","id","capture","openFileDialogOnClick","onMouseenter","onMouseleave","otherProps","cls","class","dirProps","webkitdirectory","events","onKeydown","onDrop","onDragover","tabindex","style","default","aria","stopPropagation","display"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/vc-upload/AjaxUploader.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\nimport { uploadProps } from './interface';\nimport { defineComponent, onBeforeUnmount, onMounted, ref } from 'vue';\nimport pickAttrs from '../_util/pickAttrs';\nimport partition from 'lodash-es/partition';\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'AjaxUploader',\n  inheritAttrs: false,\n  props: uploadProps(),\n  setup(props, _ref) {\n    let {\n      slots,\n      attrs,\n      expose\n    } = _ref;\n    const uid = ref(getUid());\n    const reqs = {};\n    const fileInput = ref();\n    let isMounted = false;\n    /**\n     * Process file before upload. When all the file is ready, we start upload.\n     */\n    const processFile = (file, fileList) => __awaiter(this, void 0, void 0, function* () {\n      const {\n        beforeUpload\n      } = props;\n      let transformedFile = file;\n      if (beforeUpload) {\n        try {\n          transformedFile = yield beforeUpload(file, fileList);\n        } catch (e) {\n          // Rejection will also trade as false\n          transformedFile = false;\n        }\n        if (transformedFile === false) {\n          return {\n            origin: file,\n            parsedFile: null,\n            action: null,\n            data: null\n          };\n        }\n      }\n      // Get latest action\n      const {\n        action\n      } = props;\n      let mergedAction;\n      if (typeof action === 'function') {\n        mergedAction = yield action(file);\n      } else {\n        mergedAction = action;\n      }\n      // Get latest data\n      const {\n        data\n      } = props;\n      let mergedData;\n      if (typeof data === 'function') {\n        mergedData = yield data(file);\n      } else {\n        mergedData = data;\n      }\n      const parsedData =\n      // string type is from legacy `transformFile`.\n      // Not sure if this will work since no related test case works with it\n      (typeof transformedFile === 'object' || typeof transformedFile === 'string') && transformedFile ? transformedFile : file;\n      let parsedFile;\n      if (parsedData instanceof File) {\n        parsedFile = parsedData;\n      } else {\n        parsedFile = new File([parsedData], file.name, {\n          type: file.type\n        });\n      }\n      const mergedParsedFile = parsedFile;\n      mergedParsedFile.uid = file.uid;\n      return {\n        origin: file,\n        data: mergedData,\n        parsedFile: mergedParsedFile,\n        action: mergedAction\n      };\n    });\n    const post = _ref2 => {\n      let {\n        data,\n        origin,\n        action,\n        parsedFile\n      } = _ref2;\n      if (!isMounted) {\n        return;\n      }\n      const {\n        onStart,\n        customRequest,\n        name,\n        headers,\n        withCredentials,\n        method\n      } = props;\n      const {\n        uid\n      } = origin;\n      const request = customRequest || defaultRequest;\n      const requestOption = {\n        action,\n        filename: name,\n        data,\n        file: parsedFile,\n        headers,\n        withCredentials,\n        method: method || 'post',\n        onProgress: e => {\n          const {\n            onProgress\n          } = props;\n          onProgress === null || onProgress === void 0 ? void 0 : onProgress(e, parsedFile);\n        },\n        onSuccess: (ret, xhr) => {\n          const {\n            onSuccess\n          } = props;\n          onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(ret, parsedFile, xhr);\n          delete reqs[uid];\n        },\n        onError: (err, ret) => {\n          const {\n            onError\n          } = props;\n          onError === null || onError === void 0 ? void 0 : onError(err, ret, parsedFile);\n          delete reqs[uid];\n        }\n      };\n      onStart(origin);\n      reqs[uid] = request(requestOption);\n    };\n    const reset = () => {\n      uid.value = getUid();\n    };\n    const abort = file => {\n      if (file) {\n        const uid = file.uid ? file.uid : file;\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(uid => {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n          delete reqs[uid];\n        });\n      }\n    };\n    onMounted(() => {\n      isMounted = true;\n    });\n    onBeforeUnmount(() => {\n      isMounted = false;\n      abort();\n    });\n    const uploadFiles = files => {\n      const originFiles = [...files];\n      const postFiles = originFiles.map(file => {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return processFile(file, originFiles);\n      });\n      // Batch upload files\n      Promise.all(postFiles).then(fileList => {\n        const {\n          onBatchStart\n        } = props;\n        onBatchStart === null || onBatchStart === void 0 ? void 0 : onBatchStart(fileList.map(_ref3 => {\n          let {\n            origin,\n            parsedFile\n          } = _ref3;\n          return {\n            file: origin,\n            parsedFile\n          };\n        }));\n        fileList.filter(file => file.parsedFile !== null).forEach(file => {\n          post(file);\n        });\n      });\n    };\n    const onChange = e => {\n      const {\n        accept,\n        directory\n      } = props;\n      const {\n        files\n      } = e.target;\n      const acceptedFiles = [...files].filter(file => !directory || attrAccept(file, accept));\n      uploadFiles(acceptedFiles);\n      reset();\n    };\n    const onClick = e => {\n      const el = fileInput.value;\n      if (!el) {\n        return;\n      }\n      const {\n        onClick\n      } = props;\n      // TODO\n      // if (children && (children as any).type === 'button') {\n      //   const parent = el.parentNode as HTMLInputElement;\n      //   parent.focus();\n      //   parent.querySelector('button').blur();\n      // }\n      el.click();\n      if (onClick) {\n        onClick(e);\n      }\n    };\n    const onKeyDown = e => {\n      if (e.key === 'Enter') {\n        onClick(e);\n      }\n    };\n    const onFileDrop = e => {\n      const {\n        multiple\n      } = props;\n      e.preventDefault();\n      if (e.type === 'dragover') {\n        return;\n      }\n      if (props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), uploadFiles, _file => attrAccept(_file, props.accept));\n      } else {\n        const files = partition(Array.prototype.slice.call(e.dataTransfer.files), file => attrAccept(file, props.accept));\n        let successFiles = files[0];\n        const errorFiles = files[1];\n        if (multiple === false) {\n          successFiles = successFiles.slice(0, 1);\n        }\n        uploadFiles(successFiles);\n        if (errorFiles.length && props.onReject) props.onReject(errorFiles);\n      }\n    };\n    expose({\n      abort\n    });\n    return () => {\n      var _a;\n      const {\n          componentTag: Tag,\n          prefixCls,\n          disabled,\n          id,\n          multiple,\n          accept,\n          capture,\n          directory,\n          openFileDialogOnClick,\n          onMouseenter,\n          onMouseleave\n        } = props,\n        otherProps = __rest(props, [\"componentTag\", \"prefixCls\", \"disabled\", \"id\", \"multiple\", \"accept\", \"capture\", \"directory\", \"openFileDialogOnClick\", \"onMouseenter\", \"onMouseleave\"]);\n      const cls = {\n        [prefixCls]: true,\n        [`${prefixCls}-disabled`]: disabled,\n        [attrs.class]: !!attrs.class\n      };\n      // because input don't have directory/webkitdirectory type declaration\n      const dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      const events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? onClick : () => {},\n        onKeydown: openFileDialogOnClick ? onKeyDown : () => {},\n        onMouseenter,\n        onMouseleave,\n        onDrop: onFileDrop,\n        onDragover: onFileDrop,\n        tabindex: '0'\n      };\n      return _createVNode(Tag, _objectSpread(_objectSpread({}, events), {}, {\n        \"class\": cls,\n        \"role\": \"button\",\n        \"style\": attrs.style\n      }), {\n        default: () => [_createVNode(\"input\", _objectSpread(_objectSpread(_objectSpread({}, pickAttrs(otherProps, {\n          aria: true,\n          data: true\n        })), {}, {\n          \"id\": id,\n          \"type\": \"file\",\n          \"ref\": fileInput,\n          \"onClick\": e => e.stopPropagation(),\n          \"key\": uid.value,\n          \"style\": {\n            display: 'none'\n          },\n          \"accept\": accept\n        }, dirProps), {}, {\n          \"multiple\": multiple,\n          \"onChange\": onChange\n        }, capture != null ? {\n          capture\n        } : {}), null), (_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]\n      });\n    };\n  }\n});"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE,SAASC,WAAW,IAAIC,YAAY,QAAQ,KAAK;AACjD,IAAIC,SAAS,GAAG,IAAI,IAAI,IAAI,CAACA,SAAS,IAAI,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAKA,CAACC,KAAK,EAAE;IACpB,OAAOA,KAAK,YAAYH,CAAC,GAAGG,KAAK,GAAG,IAAIH,CAAC,CAAC,UAAUI,OAAO,EAAE;MAC3DA,OAAO,CAACD,KAAK,CAAC;IAChB,CAAC,CAAC;EACJ;EACA,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAO,CAAC,EAAE,UAAUD,OAAO,EAAEE,MAAM,EAAE;IACzD,SAASC,SAASA,CAACJ,KAAK,EAAE;MACxB,IAAI;QACFK,IAAI,CAACP,SAAS,CAACQ,IAAI,CAACN,KAAK,CAAC,CAAC;MAC7B,CAAC,CAAC,OAAOO,CAAC,EAAE;QACVJ,MAAM,CAACI,CAAC,CAAC;MACX;IACF;IACA,SAASC,QAAQA,CAACR,KAAK,EAAE;MACvB,IAAI;QACFK,IAAI,CAACP,SAAS,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,CAAC;MACjC,CAAC,CAAC,OAAOO,CAAC,EAAE;QACVJ,MAAM,CAACI,CAAC,CAAC;MACX;IACF;IACA,SAASF,IAAIA,CAACI,MAAM,EAAE;MACpBA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACT,KAAK,CAAC,GAAGD,KAAK,CAACU,MAAM,CAACT,KAAK,CAAC,CAACW,IAAI,CAACP,SAAS,EAAEI,QAAQ,CAAC;IACrF;IACAH,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAK,CAACjB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAEU,IAAI,CAAC,CAAC,CAAC;EACvE,CAAC,CAAC;AACJ,CAAC;AACD,IAAIO,MAAM,GAAG,IAAI,IAAI,IAAI,CAACA,MAAM,IAAI,UAAUC,CAAC,EAAEP,CAAC,EAAE;EAClD,IAAIQ,CAAC,GAAG,CAAC,CAAC;EACV,KAAK,IAAIC,CAAC,IAAIF,CAAC,EAAE,IAAIG,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACN,CAAC,EAAEE,CAAC,CAAC,IAAIT,CAAC,CAACc,OAAO,CAACL,CAAC,CAAC,GAAG,CAAC,EAAED,CAAC,CAACC,CAAC,CAAC,GAAGF,CAAC,CAACE,CAAC,CAAC;EAChG,IAAIF,CAAC,IAAI,IAAI,IAAI,OAAOG,MAAM,CAACK,qBAAqB,KAAK,UAAU,EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEP,CAAC,GAAGC,MAAM,CAACK,qBAAqB,CAACR,CAAC,CAAC,EAAES,CAAC,GAAGP,CAAC,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;IAC3I,IAAIhB,CAAC,CAACc,OAAO,CAACL,CAAC,CAACO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIN,MAAM,CAACC,SAAS,CAACO,oBAAoB,CAACL,IAAI,CAACN,CAAC,EAAEE,CAAC,CAACO,CAAC,CAAC,CAAC,EAAER,CAAC,CAACC,CAAC,CAACO,CAAC,CAAC,CAAC,GAAGT,CAAC,CAACE,CAAC,CAACO,CAAC,CAAC,CAAC;EACnG;EACA,OAAOR,CAAC;AACV,CAAC;AACD,OAAOW,cAAc,MAAM,WAAW;AACtC,OAAOC,MAAM,MAAM,OAAO;AAC1B,OAAOC,UAAU,MAAM,eAAe;AACtC,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,eAAe,EAAEC,eAAe,EAAEC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACtE,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,eAAeL,eAAe,CAAC;EAC7BM,YAAY,EAAE;IACZC,IAAI,EAAE;EACR,CAAC;EACDC,IAAI,EAAE,cAAc;EACpBC,YAAY,EAAE,KAAK;EACnBC,KAAK,EAAEX,WAAW,CAAC,CAAC;EACpBY,KAAKA,CAACD,KAAK,EAAEE,IAAI,EAAE;IACjB,IAAI;MACFC,KAAK;MACLC,KAAK;MACLC;IACF,CAAC,GAAGH,IAAI;IACR,MAAMI,GAAG,GAAGb,GAAG,CAACP,MAAM,CAAC,CAAC,CAAC;IACzB,MAAMqB,IAAI,GAAG,CAAC,CAAC;IACf,MAAMC,SAAS,GAAGf,GAAG,CAAC,CAAC;IACvB,IAAIgB,SAAS,GAAG,KAAK;IACrB;AACJ;AACA;IACI,MAAMC,WAAW,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK3D,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,aAAa;MACnF,MAAM;QACJ4D;MACF,CAAC,GAAGb,KAAK;MACT,IAAIc,eAAe,GAAGH,IAAI;MAC1B,IAAIE,YAAY,EAAE;QAChB,IAAI;UACFC,eAAe,GAAG,MAAMD,YAAY,CAACF,IAAI,EAAEC,QAAQ,CAAC;QACtD,CAAC,CAAC,OAAO9C,CAAC,EAAE;UACV;UACAgD,eAAe,GAAG,KAAK;QACzB;QACA,IAAIA,eAAe,KAAK,KAAK,EAAE;UAC7B,OAAO;YACLC,MAAM,EAAEJ,IAAI;YACZK,UAAU,EAAE,IAAI;YAChBC,MAAM,EAAE,IAAI;YACZC,IAAI,EAAE;UACR,CAAC;QACH;MACF;MACA;MACA,MAAM;QACJD;MACF,CAAC,GAAGjB,KAAK;MACT,IAAImB,YAAY;MAChB,IAAI,OAAOF,MAAM,KAAK,UAAU,EAAE;QAChCE,YAAY,GAAG,MAAMF,MAAM,CAACN,IAAI,CAAC;MACnC,CAAC,MAAM;QACLQ,YAAY,GAAGF,MAAM;MACvB;MACA;MACA,MAAM;QACJC;MACF,CAAC,GAAGlB,KAAK;MACT,IAAIoB,UAAU;MACd,IAAI,OAAOF,IAAI,KAAK,UAAU,EAAE;QAC9BE,UAAU,GAAG,MAAMF,IAAI,CAACP,IAAI,CAAC;MAC/B,CAAC,MAAM;QACLS,UAAU,GAAGF,IAAI;MACnB;MACA,MAAMG,UAAU;MAChB;MACA;MACA,CAAC,OAAOP,eAAe,KAAK,QAAQ,IAAI,OAAOA,eAAe,KAAK,QAAQ,KAAKA,eAAe,GAAGA,eAAe,GAAGH,IAAI;MACxH,IAAIK,UAAU;MACd,IAAIK,UAAU,YAAYC,IAAI,EAAE;QAC9BN,UAAU,GAAGK,UAAU;MACzB,CAAC,MAAM;QACLL,UAAU,GAAG,IAAIM,IAAI,CAAC,CAACD,UAAU,CAAC,EAAEV,IAAI,CAACb,IAAI,EAAE;UAC7CyB,IAAI,EAAEZ,IAAI,CAACY;QACb,CAAC,CAAC;MACJ;MACA,MAAMC,gBAAgB,GAAGR,UAAU;MACnCQ,gBAAgB,CAAClB,GAAG,GAAGK,IAAI,CAACL,GAAG;MAC/B,OAAO;QACLS,MAAM,EAAEJ,IAAI;QACZO,IAAI,EAAEE,UAAU;QAChBJ,UAAU,EAAEQ,gBAAgB;QAC5BP,MAAM,EAAEE;MACV,CAAC;IACH,CAAC,CAAC;IACF,MAAMM,IAAI,GAAGC,KAAK,IAAI;MACpB,IAAI;QACFR,IAAI;QACJH,MAAM;QACNE,MAAM;QACND;MACF,CAAC,GAAGU,KAAK;MACT,IAAI,CAACjB,SAAS,EAAE;QACd;MACF;MACA,MAAM;QACJkB,OAAO;QACPC,aAAa;QACb9B,IAAI;QACJ+B,OAAO;QACPC,eAAe;QACfC;MACF,CAAC,GAAG/B,KAAK;MACT,MAAM;QACJM;MACF,CAAC,GAAGS,MAAM;MACV,MAAMiB,OAAO,GAAGJ,aAAa,IAAI3C,cAAc;MAC/C,MAAMgD,aAAa,GAAG;QACpBhB,MAAM;QACNiB,QAAQ,EAAEpC,IAAI;QACdoB,IAAI;QACJP,IAAI,EAAEK,UAAU;QAChBa,OAAO;QACPC,eAAe;QACfC,MAAM,EAAEA,MAAM,IAAI,MAAM;QACxBI,UAAU,EAAErE,CAAC,IAAI;UACf,MAAM;YACJqE;UACF,CAAC,GAAGnC,KAAK;UACTmC,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACrE,CAAC,EAAEkD,UAAU,CAAC;QACnF,CAAC;QACDoB,SAAS,EAAEA,CAACC,GAAG,EAAEC,GAAG,KAAK;UACvB,MAAM;YACJF;UACF,CAAC,GAAGpC,KAAK;UACToC,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACC,GAAG,EAAErB,UAAU,EAAEsB,GAAG,CAAC;UACrF,OAAO/B,IAAI,CAACD,GAAG,CAAC;QAClB,CAAC;QACDiC,OAAO,EAAEA,CAACC,GAAG,EAAEH,GAAG,KAAK;UACrB,MAAM;YACJE;UACF,CAAC,GAAGvC,KAAK;UACTuC,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACC,GAAG,EAAEH,GAAG,EAAErB,UAAU,CAAC;UAC/E,OAAOT,IAAI,CAACD,GAAG,CAAC;QAClB;MACF,CAAC;MACDqB,OAAO,CAACZ,MAAM,CAAC;MACfR,IAAI,CAACD,GAAG,CAAC,GAAG0B,OAAO,CAACC,aAAa,CAAC;IACpC,CAAC;IACD,MAAMQ,KAAK,GAAGA,CAAA,KAAM;MAClBnC,GAAG,CAAC/C,KAAK,GAAG2B,MAAM,CAAC,CAAC;IACtB,CAAC;IACD,MAAMwD,KAAK,GAAG/B,IAAI,IAAI;MACpB,IAAIA,IAAI,EAAE;QACR,MAAML,GAAG,GAAGK,IAAI,CAACL,GAAG,GAAGK,IAAI,CAACL,GAAG,GAAGK,IAAI;QACtC,IAAIJ,IAAI,CAACD,GAAG,CAAC,IAAIC,IAAI,CAACD,GAAG,CAAC,CAACoC,KAAK,EAAE;UAChCnC,IAAI,CAACD,GAAG,CAAC,CAACoC,KAAK,CAAC,CAAC;QACnB;QACA,OAAOnC,IAAI,CAACD,GAAG,CAAC;MAClB,CAAC,MAAM;QACL9B,MAAM,CAACmE,IAAI,CAACpC,IAAI,CAAC,CAACqC,OAAO,CAACtC,GAAG,IAAI;UAC/B,IAAIC,IAAI,CAACD,GAAG,CAAC,IAAIC,IAAI,CAACD,GAAG,CAAC,CAACoC,KAAK,EAAE;YAChCnC,IAAI,CAACD,GAAG,CAAC,CAACoC,KAAK,CAAC,CAAC;UACnB;UACA,OAAOnC,IAAI,CAACD,GAAG,CAAC;QAClB,CAAC,CAAC;MACJ;IACF,CAAC;IACDd,SAAS,CAAC,MAAM;MACdiB,SAAS,GAAG,IAAI;IAClB,CAAC,CAAC;IACFlB,eAAe,CAAC,MAAM;MACpBkB,SAAS,GAAG,KAAK;MACjBiC,KAAK,CAAC,CAAC;IACT,CAAC,CAAC;IACF,MAAMG,WAAW,GAAGC,KAAK,IAAI;MAC3B,MAAMC,WAAW,GAAG,CAAC,GAAGD,KAAK,CAAC;MAC9B,MAAME,SAAS,GAAGD,WAAW,CAACE,GAAG,CAACtC,IAAI,IAAI;QACxC;QACAA,IAAI,CAACL,GAAG,GAAGpB,MAAM,CAAC,CAAC;QACnB,OAAOwB,WAAW,CAACC,IAAI,EAAEoC,WAAW,CAAC;MACvC,CAAC,CAAC;MACF;MACAtF,OAAO,CAACyF,GAAG,CAACF,SAAS,CAAC,CAAC9E,IAAI,CAAC0C,QAAQ,IAAI;QACtC,MAAM;UACJuC;QACF,CAAC,GAAGnD,KAAK;QACTmD,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACvC,QAAQ,CAACqC,GAAG,CAACG,KAAK,IAAI;UAC7F,IAAI;YACFrC,MAAM;YACNC;UACF,CAAC,GAAGoC,KAAK;UACT,OAAO;YACLzC,IAAI,EAAEI,MAAM;YACZC;UACF,CAAC;QACH,CAAC,CAAC,CAAC;QACHJ,QAAQ,CAACyC,MAAM,CAAC1C,IAAI,IAAIA,IAAI,CAACK,UAAU,KAAK,IAAI,CAAC,CAAC4B,OAAO,CAACjC,IAAI,IAAI;UAChEc,IAAI,CAACd,IAAI,CAAC;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACD,MAAM2C,QAAQ,GAAGxF,CAAC,IAAI;MACpB,MAAM;QACJyF,MAAM;QACNC;MACF,CAAC,GAAGxD,KAAK;MACT,MAAM;QACJ8C;MACF,CAAC,GAAGhF,CAAC,CAAC2F,MAAM;MACZ,MAAMC,aAAa,GAAG,CAAC,GAAGZ,KAAK,CAAC,CAACO,MAAM,CAAC1C,IAAI,IAAI,CAAC6C,SAAS,IAAIrE,UAAU,CAACwB,IAAI,EAAE4C,MAAM,CAAC,CAAC;MACvFV,WAAW,CAACa,aAAa,CAAC;MAC1BjB,KAAK,CAAC,CAAC;IACT,CAAC;IACD,MAAMkB,OAAO,GAAG7F,CAAC,IAAI;MACnB,MAAM8F,EAAE,GAAGpD,SAAS,CAACjD,KAAK;MAC1B,IAAI,CAACqG,EAAE,EAAE;QACP;MACF;MACA,MAAM;QACJD;MACF,CAAC,GAAG3D,KAAK;MACT;MACA;MACA;MACA;MACA;MACA;MACA4D,EAAE,CAACC,KAAK,CAAC,CAAC;MACV,IAAIF,OAAO,EAAE;QACXA,OAAO,CAAC7F,CAAC,CAAC;MACZ;IACF,CAAC;IACD,MAAMgG,SAAS,GAAGhG,CAAC,IAAI;MACrB,IAAIA,CAAC,CAACiG,GAAG,KAAK,OAAO,EAAE;QACrBJ,OAAO,CAAC7F,CAAC,CAAC;MACZ;IACF,CAAC;IACD,MAAMkG,UAAU,GAAGlG,CAAC,IAAI;MACtB,MAAM;QACJmG;MACF,CAAC,GAAGjE,KAAK;MACTlC,CAAC,CAACoG,cAAc,CAAC,CAAC;MAClB,IAAIpG,CAAC,CAACyD,IAAI,KAAK,UAAU,EAAE;QACzB;MACF;MACA,IAAIvB,KAAK,CAACwD,SAAS,EAAE;QACnBpE,gBAAgB,CAAC+E,KAAK,CAAC1F,SAAS,CAAC2F,KAAK,CAACzF,IAAI,CAACb,CAAC,CAACuG,YAAY,CAACC,KAAK,CAAC,EAAEzB,WAAW,EAAE0B,KAAK,IAAIpF,UAAU,CAACoF,KAAK,EAAEvE,KAAK,CAACuD,MAAM,CAAC,CAAC;MAC3H,CAAC,MAAM;QACL,MAAMT,KAAK,GAAGnD,SAAS,CAACwE,KAAK,CAAC1F,SAAS,CAAC2F,KAAK,CAACzF,IAAI,CAACb,CAAC,CAACuG,YAAY,CAACvB,KAAK,CAAC,EAAEnC,IAAI,IAAIxB,UAAU,CAACwB,IAAI,EAAEX,KAAK,CAACuD,MAAM,CAAC,CAAC;QACjH,IAAIiB,YAAY,GAAG1B,KAAK,CAAC,CAAC,CAAC;QAC3B,MAAM2B,UAAU,GAAG3B,KAAK,CAAC,CAAC,CAAC;QAC3B,IAAImB,QAAQ,KAAK,KAAK,EAAE;UACtBO,YAAY,GAAGA,YAAY,CAACJ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACzC;QACAvB,WAAW,CAAC2B,YAAY,CAAC;QACzB,IAAIC,UAAU,CAAC1F,MAAM,IAAIiB,KAAK,CAAC0E,QAAQ,EAAE1E,KAAK,CAAC0E,QAAQ,CAACD,UAAU,CAAC;MACrE;IACF,CAAC;IACDpE,MAAM,CAAC;MACLqC;IACF,CAAC,CAAC;IACF,OAAO,MAAM;MACX,IAAIiC,EAAE;MACN,MAAM;UACFC,YAAY,EAAEC,GAAG;UACjBC,SAAS;UACTC,QAAQ;UACRC,EAAE;UACFf,QAAQ;UACRV,MAAM;UACN0B,OAAO;UACPzB,SAAS;UACT0B,qBAAqB;UACrBC,YAAY;UACZC;QACF,CAAC,GAAGpF,KAAK;QACTqF,UAAU,GAAGjH,MAAM,CAAC4B,KAAK,EAAE,CAAC,cAAc,EAAE,WAAW,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,uBAAuB,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;MACpL,MAAMsF,GAAG,GAAG;QACV,CAACR,SAAS,GAAG,IAAI;QACjB,CAAE,GAAEA,SAAU,WAAU,GAAGC,QAAQ;QACnC,CAAC3E,KAAK,CAACmF,KAAK,GAAG,CAAC,CAACnF,KAAK,CAACmF;MACzB,CAAC;MACD;MACA,MAAMC,QAAQ,GAAGhC,SAAS,GAAG;QAC3BA,SAAS,EAAE,WAAW;QACtBiC,eAAe,EAAE;MACnB,CAAC,GAAG,CAAC,CAAC;MACN,MAAMC,MAAM,GAAGX,QAAQ,GAAG,CAAC,CAAC,GAAG;QAC7BpB,OAAO,EAAEuB,qBAAqB,GAAGvB,OAAO,GAAG,MAAM,CAAC,CAAC;QACnDgC,SAAS,EAAET,qBAAqB,GAAGpB,SAAS,GAAG,MAAM,CAAC,CAAC;QACvDqB,YAAY;QACZC,YAAY;QACZQ,MAAM,EAAE5B,UAAU;QAClB6B,UAAU,EAAE7B,UAAU;QACtB8B,QAAQ,EAAE;MACZ,CAAC;MACD,OAAO9I,YAAY,CAAC6H,GAAG,EAAE/H,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE4I,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;QACpE,OAAO,EAAEJ,GAAG;QACZ,MAAM,EAAE,QAAQ;QAChB,OAAO,EAAElF,KAAK,CAAC2F;MACjB,CAAC,CAAC,EAAE;QACFC,OAAO,EAAEA,CAAA,KAAM,CAAChJ,YAAY,CAAC,OAAO,EAAEF,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE4C,SAAS,CAAC2F,UAAU,EAAE;UACxGY,IAAI,EAAE,IAAI;UACV/E,IAAI,EAAE;QACR,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;UACP,IAAI,EAAE8D,EAAE;UACR,MAAM,EAAE,MAAM;UACd,KAAK,EAAExE,SAAS;UAChB,SAAS,EAAE1C,CAAC,IAAIA,CAAC,CAACoI,eAAe,CAAC,CAAC;UACnC,KAAK,EAAE5F,GAAG,CAAC/C,KAAK;UAChB,OAAO,EAAE;YACP4I,OAAO,EAAE;UACX,CAAC;UACD,QAAQ,EAAE5C;QACZ,CAAC,EAAEiC,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE;UAChB,UAAU,EAAEvB,QAAQ;UACpB,UAAU,EAAEX;QACd,CAAC,EAAE2B,OAAO,IAAI,IAAI,GAAG;UACnBA;QACF,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAACN,EAAE,GAAGxE,KAAK,CAAC6F,OAAO,MAAM,IAAI,IAAIrB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChG,IAAI,CAACwB,KAAK,CAAC;MAC1F,CAAC,CAAC;IACJ,CAAC;EACH;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}