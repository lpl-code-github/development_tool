{"ast":null,"code":"import Code from \"@/components/code/Code\";\nimport Json from \"@/components/code/Json\";\nimport clipboard from \"clipboard\"; // 复制组件\nexport default {\n  name: \"TsInterfaceGenerator\",\n  components: {\n    Json,\n    Code\n  },\n  data() {\n    return {\n      jsonData: {\n        hasJsonFlag: false\n      },\n      codeText: \"\",\n      loading: false,\n      copySuccess: false,\n      responseName: ''\n    };\n  },\n  methods: {\n    // 子组件的回调\n    getJsonData(jsonData) {\n      this.jsonData = jsonData;\n    },\n    // 生成Interface\n    generateInterface() {\n      if (!this.jsonData.hasJsonFlag) {\n        this.$message.warning(\"Json格式错误或为空，请检查\");\n        return;\n      }\n      // if (this.responseName === ''){\n      //   this.$message.warning(\"请输入Response的名称\")\n      //   return\n      // }\n      this.loading = true;\n      var jsonReq = this.jsonData.value;\n      this.$request.generateTsInterface(jsonReq, this.responseName).then(res => {\n        if (res.status === 200) {\n          this.codeText = res.data;\n          this.loading = false;\n        } else {\n          this.loading = false;\n        }\n      });\n    },\n    // 复制文本\n    copyMessage() {\n      let _this = this;\n      if (_this.codeText === \"\") {\n        _this.$message.warn(\"没有可以复制的内容\");\n        return;\n      }\n      _this.copySuccess = false;\n      let clipboardObj = new clipboard(\".code-data-copy\");\n      clipboardObj.on(\"success\", function (e) {\n        _this.copySuccess = true;\n        _this.$message.success(\"已复制到剪贴板\");\n        clipboardObj.destroy(); // 销毁,避免多次点击重复出现\n      });\n\n      clipboardObj.on(\"error\", function () {\n        _this.$message.error(\"复制错误\");\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}