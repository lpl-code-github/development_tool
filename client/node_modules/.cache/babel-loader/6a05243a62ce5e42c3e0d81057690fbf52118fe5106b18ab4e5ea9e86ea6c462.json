{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { addClass, removeClass } from '../../vc-util/Dom/class';\nimport { onBeforeUnmount, nextTick, Transition, watch, defineComponent, computed, ref } from 'vue';\nimport { anyType } from '../../_util/type';\nconst calcThumbStyle = targetElement => targetElement ? {\n  left: targetElement.offsetLeft,\n  right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n  width: targetElement.clientWidth\n} : null;\nconst toPX = value => value !== undefined ? `${value}px` : undefined;\nconst MotionThumb = defineComponent({\n  props: {\n    value: anyType(),\n    getValueIndex: anyType(),\n    prefixCls: anyType(),\n    motionName: anyType(),\n    onMotionStart: anyType(),\n    onMotionEnd: anyType(),\n    direction: anyType(),\n    containerRef: anyType()\n  },\n  emits: ['motionStart', 'motionEnd'],\n  setup(props, _ref) {\n    let {\n      emit\n    } = _ref;\n    const thumbRef = ref();\n    // =========================== Effect ===========================\n    const findValueElement = val => {\n      var _a;\n      const index = props.getValueIndex(val);\n      const ele = (_a = props.containerRef.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(`.${props.prefixCls}-item`)[index];\n      return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n    };\n    const prevStyle = ref(null);\n    const nextStyle = ref(null);\n    watch(() => props.value, (value, prevValue) => {\n      const prev = findValueElement(prevValue);\n      const next = findValueElement(value);\n      const calcPrevStyle = calcThumbStyle(prev);\n      const calcNextStyle = calcThumbStyle(next);\n      prevStyle.value = calcPrevStyle;\n      nextStyle.value = calcNextStyle;\n      if (prev && next) {\n        emit('motionStart');\n      } else {\n        emit('motionEnd');\n      }\n    }, {\n      flush: 'post'\n    });\n    const thumbStart = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = prevStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    const thumbActive = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = nextStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    // =========================== Motion ===========================\n    let timeid;\n    const onAppearStart = el => {\n      clearTimeout(timeid);\n      nextTick(() => {\n        if (el) {\n          el.style.transform = `translateX(var(--thumb-start-left))`;\n          el.style.width = `var(--thumb-start-width)`;\n        }\n      });\n    };\n    const onAppearActive = el => {\n      timeid = setTimeout(() => {\n        if (el) {\n          addClass(el, `${props.motionName}-appear-active`);\n          el.style.transform = `translateX(var(--thumb-active-left))`;\n          el.style.width = `var(--thumb-active-width)`;\n        }\n      });\n    };\n    const onAppearEnd = el => {\n      prevStyle.value = null;\n      nextStyle.value = null;\n      if (el) {\n        el.style.transform = null;\n        el.style.width = null;\n        removeClass(el, `${props.motionName}-appear-active`);\n      }\n      emit('motionEnd');\n    };\n    const mergedStyle = computed(() => {\n      var _a, _b;\n      return {\n        '--thumb-start-left': thumbStart.value,\n        '--thumb-start-width': toPX((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.width),\n        '--thumb-active-left': thumbActive.value,\n        '--thumb-active-width': toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.width)\n      };\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeid);\n    });\n    return () => {\n      // It's little ugly which should be refactor when @umi/test update to latest jsdom\n      const motionProps = {\n        ref: thumbRef,\n        style: mergedStyle.value,\n        class: [`${props.prefixCls}-thumb`]\n      };\n      if (process.env.NODE_ENV === 'test') {\n        motionProps['data-test-style'] = JSON.stringify(mergedStyle.value);\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"onBeforeEnter\": onAppearStart,\n        \"onEnter\": onAppearActive,\n        \"onAfterEnter\": onAppearEnd\n      }, {\n        default: () => [!prevStyle.value || !nextStyle.value ? null : _createVNode(\"div\", motionProps, null)]\n      });\n    };\n  }\n});\nexport default MotionThumb;","map":{"version":3,"names":["createVNode","_createVNode","addClass","removeClass","onBeforeUnmount","nextTick","Transition","watch","defineComponent","computed","ref","anyType","calcThumbStyle","targetElement","left","offsetLeft","right","parentElement","clientWidth","width","toPX","value","undefined","MotionThumb","props","getValueIndex","prefixCls","motionName","onMotionStart","onMotionEnd","direction","containerRef","emits","setup","_ref","emit","thumbRef","findValueElement","val","_a","index","ele","querySelectorAll","offsetParent","prevStyle","nextStyle","prevValue","prev","next","calcPrevStyle","calcNextStyle","flush","thumbStart","_b","thumbActive","timeid","onAppearStart","el","clearTimeout","style","transform","onAppearActive","setTimeout","onAppearEnd","mergedStyle","motionProps","class","process","env","NODE_ENV","JSON","stringify","default"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/segmented/src/MotionThumb.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { addClass, removeClass } from '../../vc-util/Dom/class';\nimport { onBeforeUnmount, nextTick, Transition, watch, defineComponent, computed, ref } from 'vue';\nimport { anyType } from '../../_util/type';\nconst calcThumbStyle = targetElement => targetElement ? {\n  left: targetElement.offsetLeft,\n  right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n  width: targetElement.clientWidth\n} : null;\nconst toPX = value => value !== undefined ? `${value}px` : undefined;\nconst MotionThumb = defineComponent({\n  props: {\n    value: anyType(),\n    getValueIndex: anyType(),\n    prefixCls: anyType(),\n    motionName: anyType(),\n    onMotionStart: anyType(),\n    onMotionEnd: anyType(),\n    direction: anyType(),\n    containerRef: anyType()\n  },\n  emits: ['motionStart', 'motionEnd'],\n  setup(props, _ref) {\n    let {\n      emit\n    } = _ref;\n    const thumbRef = ref();\n    // =========================== Effect ===========================\n    const findValueElement = val => {\n      var _a;\n      const index = props.getValueIndex(val);\n      const ele = (_a = props.containerRef.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(`.${props.prefixCls}-item`)[index];\n      return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n    };\n    const prevStyle = ref(null);\n    const nextStyle = ref(null);\n    watch(() => props.value, (value, prevValue) => {\n      const prev = findValueElement(prevValue);\n      const next = findValueElement(value);\n      const calcPrevStyle = calcThumbStyle(prev);\n      const calcNextStyle = calcThumbStyle(next);\n      prevStyle.value = calcPrevStyle;\n      nextStyle.value = calcNextStyle;\n      if (prev && next) {\n        emit('motionStart');\n      } else {\n        emit('motionEnd');\n      }\n    }, {\n      flush: 'post'\n    });\n    const thumbStart = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = prevStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    const thumbActive = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = nextStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    // =========================== Motion ===========================\n    let timeid;\n    const onAppearStart = el => {\n      clearTimeout(timeid);\n      nextTick(() => {\n        if (el) {\n          el.style.transform = `translateX(var(--thumb-start-left))`;\n          el.style.width = `var(--thumb-start-width)`;\n        }\n      });\n    };\n    const onAppearActive = el => {\n      timeid = setTimeout(() => {\n        if (el) {\n          addClass(el, `${props.motionName}-appear-active`);\n          el.style.transform = `translateX(var(--thumb-active-left))`;\n          el.style.width = `var(--thumb-active-width)`;\n        }\n      });\n    };\n    const onAppearEnd = el => {\n      prevStyle.value = null;\n      nextStyle.value = null;\n      if (el) {\n        el.style.transform = null;\n        el.style.width = null;\n        removeClass(el, `${props.motionName}-appear-active`);\n      }\n      emit('motionEnd');\n    };\n    const mergedStyle = computed(() => {\n      var _a, _b;\n      return {\n        '--thumb-start-left': thumbStart.value,\n        '--thumb-start-width': toPX((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.width),\n        '--thumb-active-left': thumbActive.value,\n        '--thumb-active-width': toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.width)\n      };\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeid);\n    });\n    return () => {\n      // It's little ugly which should be refactor when @umi/test update to latest jsdom\n      const motionProps = {\n        ref: thumbRef,\n        style: mergedStyle.value,\n        class: [`${props.prefixCls}-thumb`]\n      };\n      if (process.env.NODE_ENV === 'test') {\n        motionProps['data-test-style'] = JSON.stringify(mergedStyle.value);\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"onBeforeEnter\": onAppearStart,\n        \"onEnter\": onAppearActive,\n        \"onAfterEnter\": onAppearEnd\n      }, {\n        default: () => [!prevStyle.value || !nextStyle.value ? null : _createVNode(\"div\", motionProps, null)]\n      });\n    };\n  }\n});\nexport default MotionThumb;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}