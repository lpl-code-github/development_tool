{"ast":null,"code":"// 引入axios\nimport axios from 'axios';\n// 引入element的Message提示组件\nimport router from '../router/index';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true;\nimport Notification from 'ant-design-vue';\n// 引入封装好的接口模块\nimport * as request from './request.js';\n\n// 请求超时时间\naxios.defaults.timeout = 100000;\n\n// 代理接口\nconst service = axios.create({\n  baseURL: '/apis'\n});\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(config => {\n  // 加载顶部loading\n  NProgress.start();\n  return config;\n}, err => {\n  // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n  return Promise.reject(err);\n});\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(response => {\n  // 关闭顶部loading\n  NProgress.done();\n\n  // 返回响应体\n  return response;\n}, error => {\n  const {\n    data\n  } = error.response;\n  if (data.code === 404) {\n    notification.error({\n      message: '接口错误',\n      description: data.status\n    });\n    setTimeout(() => {\n      //需要定时执行的代码\n      router.go(-1);\n    }, 2000);\n  } else {\n    notification.error({\n      message: '接口错误',\n      description: data.status\n    });\n  }\n\n  // 关闭顶部loading\n  NProgress.done();\n  // 请求超时\n  if (error.message.indexOf('timeout') !== -1) {\n    notification.error({\n      message: '请求超时，请稍后再试'\n    });\n  }\n  return error;\n});\nexport { request, service };","map":{"version":3,"names":["axios","router","NProgress","defaults","withCredentials","Notification","request","timeout","service","create","baseURL","interceptors","use","config","start","err","Promise","reject","response","done","error","data","code","notification","message","description","status","setTimeout","go","indexOf"],"sources":["/Users/lpl/工作/Teamsupport/development_tool/client/src/api/index.js"],"sourcesContent":["// 引入axios\nimport axios from 'axios'\n// 引入element的Message提示组件\nimport router from '../router/index'\n\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n//axios打开允许跨域携带cookie信息\naxios.defaults.withCredentials = true\nimport Notification from 'ant-design-vue';\n// 引入封装好的接口模块\nimport * as request from './request.js'\n\n\n// 请求超时时间\naxios.defaults.timeout = 100000\n\n// 代理接口\nconst service = axios.create({\n    baseURL: '/apis'\n})\n\n// 请求拦截器(在请求之前进行一些配置)\nservice.interceptors.request.use(\n    config => {\n        // 加载顶部loading\n        NProgress.start()\n        return config\n    },\n    err => {\n        // Promise.reject()方法返回一个带有拒绝原因的Promise对象\n        return Promise.reject(err)\n    }\n)\n\n// 响应拦截器(响应之后对数据做一些处理)\nservice.interceptors.response.use(\n    response => {\n        // 关闭顶部loading\n        NProgress.done()\n\n        // 返回响应体\n        return response\n    },\n    error => {\n        const { data } = error.response\n        if (data.code ===404){\n            notification.error({\n                message: '接口错误',\n                description: data.status\n            });\n            setTimeout(() => {\n                //需要定时执行的代码\n                router.go(-1)\n            }, 2000)\n        }else {\n            notification.error({\n                message: '接口错误',\n                description: data.status\n            });\n        }\n\n        // 关闭顶部loading\n        NProgress.done()\n        // 请求超时\n        if (error.message.indexOf('timeout') !== -1) {\n            notification.error({\n                message: '请求超时，请稍后再试'\n            });\n        }\n        return error\n    }\n)\n\nexport {\n    request,\n    service\n}\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB;AACA,OAAOC,MAAM,MAAM,iBAAiB;AAEpC,OAAOC,SAAS,MAAM,WAAW;AACjC,OAAO,yBAAyB;AAChC;AACAF,KAAK,CAACG,QAAQ,CAACC,eAAe,GAAG,IAAI;AACrC,OAAOC,YAAY,MAAM,gBAAgB;AACzC;AACA,OAAO,KAAKC,OAAO,MAAM,cAAc;;AAGvC;AACAN,KAAK,CAACG,QAAQ,CAACI,OAAO,GAAG,MAAM;;AAE/B;AACA,MAAMC,OAAO,GAAGR,KAAK,CAACS,MAAM,CAAC;EACzBC,OAAO,EAAE;AACb,CAAC,CAAC;;AAEF;AACAF,OAAO,CAACG,YAAY,CAACL,OAAO,CAACM,GAAG,CAC5BC,MAAM,IAAI;EACN;EACAX,SAAS,CAACY,KAAK,CAAC,CAAC;EACjB,OAAOD,MAAM;AACjB,CAAC,EACDE,GAAG,IAAI;EACH;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;AAC9B,CACJ,CAAC;;AAED;AACAP,OAAO,CAACG,YAAY,CAACO,QAAQ,CAACN,GAAG,CAC7BM,QAAQ,IAAI;EACR;EACAhB,SAAS,CAACiB,IAAI,CAAC,CAAC;;EAEhB;EACA,OAAOD,QAAQ;AACnB,CAAC,EACDE,KAAK,IAAI;EACL,MAAM;IAAEC;EAAK,CAAC,GAAGD,KAAK,CAACF,QAAQ;EAC/B,IAAIG,IAAI,CAACC,IAAI,KAAI,GAAG,EAAC;IACjBC,YAAY,CAACH,KAAK,CAAC;MACfI,OAAO,EAAE,MAAM;MACfC,WAAW,EAAEJ,IAAI,CAACK;IACtB,CAAC,CAAC;IACFC,UAAU,CAAC,MAAM;MACb;MACA1B,MAAM,CAAC2B,EAAE,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,EAAE,IAAI,CAAC;EACZ,CAAC,MAAK;IACFL,YAAY,CAACH,KAAK,CAAC;MACfI,OAAO,EAAE,MAAM;MACfC,WAAW,EAAEJ,IAAI,CAACK;IACtB,CAAC,CAAC;EACN;;EAEA;EACAxB,SAAS,CAACiB,IAAI,CAAC,CAAC;EAChB;EACA,IAAIC,KAAK,CAACI,OAAO,CAACK,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACzCN,YAAY,CAACH,KAAK,CAAC;MACfI,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EACA,OAAOJ,KAAK;AAChB,CACJ,CAAC;AAED,SACId,OAAO,EACPE,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}