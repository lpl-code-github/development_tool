{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport { shallowRef, onMounted, defineComponent, onBeforeUnmount } from 'vue';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonTypes';\nimport useDestroyed from './hooks/useDestroyed';\nimport { objectType } from './type';\nimport { findDOMNode } from './props-util';\nconst actionButtonProps = {\n  type: {\n    type: String\n  },\n  actionFn: Function,\n  close: Function,\n  autofocus: Boolean,\n  prefixCls: String,\n  buttonProps: objectType(),\n  emitEvent: Boolean,\n  quitOnNullishReturnValue: Boolean\n};\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'ActionButton',\n  props: actionButtonProps,\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const clickedRef = shallowRef(false);\n    const buttonRef = shallowRef();\n    const loading = shallowRef(false);\n    let timeoutId;\n    const isDestroyed = useDestroyed();\n    onMounted(() => {\n      if (props.autofocus) {\n        timeoutId = setTimeout(() => {\n          var _a, _b;\n          return (_b = (_a = findDOMNode(buttonRef.value)) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeoutId);\n    });\n    const onInternalClose = function () {\n      var _a;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_a = props.close) === null || _a === void 0 ? void 0 : _a.call(props, ...args);\n    };\n    const handlePromiseOnOk = returnValueOfOnOk => {\n      if (!isThenable(returnValueOfOnOk)) {\n        return;\n      }\n      loading.value = true;\n      returnValueOfOnOk.then(function () {\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        onInternalClose(...arguments);\n        clickedRef.value = false;\n      }, e => {\n        // See: https://github.com/ant-design/ant-design/issues/6183\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        clickedRef.value = false;\n        return Promise.reject(e);\n      });\n    };\n    const onClick = e => {\n      const {\n        actionFn\n      } = props;\n      if (clickedRef.value) {\n        return;\n      }\n      clickedRef.value = true;\n      if (!actionFn) {\n        onInternalClose();\n        return;\n      }\n      let returnValueOfOnOk;\n      if (props.emitEvent) {\n        returnValueOfOnOk = actionFn(e);\n        if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n          clickedRef.value = false;\n          onInternalClose(e);\n          return;\n        }\n      } else if (actionFn.length) {\n        returnValueOfOnOk = actionFn(props.close);\n        // https://github.com/ant-design/ant-design/issues/23358\n        clickedRef.value = false;\n      } else {\n        returnValueOfOnOk = actionFn();\n        if (!returnValueOfOnOk) {\n          onInternalClose();\n          return;\n        }\n      }\n      handlePromiseOnOk(returnValueOfOnOk);\n    };\n    return () => {\n      const {\n        type,\n        prefixCls,\n        buttonProps\n      } = props;\n      return _createVNode(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n        \"onClick\": onClick,\n        \"loading\": loading.value,\n        \"prefixCls\": prefixCls\n      }, buttonProps), {}, {\n        \"ref\": buttonRef\n      }), slots);\n    };\n  }\n});","map":{"version":3,"names":["_objectSpread","createVNode","_createVNode","resolveDirective","_resolveDirective","shallowRef","onMounted","defineComponent","onBeforeUnmount","Button","convertLegacyProps","useDestroyed","objectType","findDOMNode","actionButtonProps","type","String","actionFn","Function","close","autofocus","Boolean","prefixCls","buttonProps","emitEvent","quitOnNullishReturnValue","isThenable","thing","then","compatConfig","MODE","name","props","setup","_ref","slots","clickedRef","buttonRef","loading","timeoutId","isDestroyed","setTimeout","_a","_b","value","focus","call","clearTimeout","onInternalClose","_len","arguments","length","args","Array","_key","handlePromiseOnOk","returnValueOfOnOk","e","Promise","reject","onClick"],"sources":["/Users/lpl/工作/Teamsupport/develop_help/node_modules/ant-design-vue/es/_util/ActionButton.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport { shallowRef, onMounted, defineComponent, onBeforeUnmount } from 'vue';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonTypes';\nimport useDestroyed from './hooks/useDestroyed';\nimport { objectType } from './type';\nimport { findDOMNode } from './props-util';\nconst actionButtonProps = {\n  type: {\n    type: String\n  },\n  actionFn: Function,\n  close: Function,\n  autofocus: Boolean,\n  prefixCls: String,\n  buttonProps: objectType(),\n  emitEvent: Boolean,\n  quitOnNullishReturnValue: Boolean\n};\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'ActionButton',\n  props: actionButtonProps,\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const clickedRef = shallowRef(false);\n    const buttonRef = shallowRef();\n    const loading = shallowRef(false);\n    let timeoutId;\n    const isDestroyed = useDestroyed();\n    onMounted(() => {\n      if (props.autofocus) {\n        timeoutId = setTimeout(() => {\n          var _a, _b;\n          return (_b = (_a = findDOMNode(buttonRef.value)) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeoutId);\n    });\n    const onInternalClose = function () {\n      var _a;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_a = props.close) === null || _a === void 0 ? void 0 : _a.call(props, ...args);\n    };\n    const handlePromiseOnOk = returnValueOfOnOk => {\n      if (!isThenable(returnValueOfOnOk)) {\n        return;\n      }\n      loading.value = true;\n      returnValueOfOnOk.then(function () {\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        onInternalClose(...arguments);\n        clickedRef.value = false;\n      }, e => {\n        // See: https://github.com/ant-design/ant-design/issues/6183\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        clickedRef.value = false;\n        return Promise.reject(e);\n      });\n    };\n    const onClick = e => {\n      const {\n        actionFn\n      } = props;\n      if (clickedRef.value) {\n        return;\n      }\n      clickedRef.value = true;\n      if (!actionFn) {\n        onInternalClose();\n        return;\n      }\n      let returnValueOfOnOk;\n      if (props.emitEvent) {\n        returnValueOfOnOk = actionFn(e);\n        if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n          clickedRef.value = false;\n          onInternalClose(e);\n          return;\n        }\n      } else if (actionFn.length) {\n        returnValueOfOnOk = actionFn(props.close);\n        // https://github.com/ant-design/ant-design/issues/23358\n        clickedRef.value = false;\n      } else {\n        returnValueOfOnOk = actionFn();\n        if (!returnValueOfOnOk) {\n          onInternalClose();\n          return;\n        }\n      }\n      handlePromiseOnOk(returnValueOfOnOk);\n    };\n    return () => {\n      const {\n        type,\n        prefixCls,\n        buttonProps\n      } = props;\n      return _createVNode(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n        \"onClick\": onClick,\n        \"loading\": loading.value,\n        \"prefixCls\": prefixCls\n      }, buttonProps), {}, {\n        \"ref\": buttonRef\n      }), slots);\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}